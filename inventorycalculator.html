<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TSP Sandwich Planning Guide</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            font-weight: 400;
            line-height: 1.7;
            color: #2c3e50;
            background: linear-gradient(135deg, #236383 0%, #007E8C 100%);
            min-height: 100vh;
            font-size: 16px;
        }
        
        h1 {
            font-weight: 700;
            font-size: 2.5em;
        }
        
        h2 {
            font-weight: 500;
            font-size: 1.8em;
        }
        
        h3 {
            font-weight: 500;
            font-size: 1.3em;
        }
        
        h4 {
            font-weight: 500;
            font-size: 1.1em;
        }
        
        p, li, span {
            font-weight: 400;
            font-size: 1.1em;
        }
        
        .number, strong {
            font-weight: 500;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        
        .header h1 {
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .header p {
            color: #7f8c8d;
            font-size: 1.2em;
        }
        
        .logo {
            display: inline-block;
            background: linear-gradient(45deg, #FBAD3F, #A31C41);
            color: white;
            padding: 10px 20px;
            border-radius: 50px;
            margin-bottom: 20px;
            font-weight: 700;
        }
        
        .section {
            background: white;
            padding: 35px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: 35px;
        }
        
        .section h2 {
            color: #1a4d66;
            margin-bottom: 25px;
            padding-bottom: 12px;
            border-bottom: 4px solid #FBAD3F;
            font-size: 2em;
            font-weight: 700;
            text-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }
        
        .quick-ref {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 2.5em; /* Increased gap for more space between cards */
            margin-bottom: 30px;
        }
        
        @media (max-width: 768px) {
            .quick-ref {
                grid-template-columns: 1fr;
            }
        }
        
        .ref-card {
            background: #fff;
            color: #333;
            padding: 30px 25px;
            border-radius: 16px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(35, 99, 131, 0.15);
            border: 2px solid #f0f0f0;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .ref-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #007E8C, #47B3CB);
            border-radius: 16px 16px 0 0;
        }
        
        .ref-card:nth-child(1) {
            border-top-color: #007E8C;
        }
        
        .ref-card:nth-child(2) {
            border-top-color: #47B3CB;
        }
        
        .ref-card:nth-child(3) {
            border-top-color: #FBAD3F;
        }
        
        .ref-card:nth-child(4) {
            border-top-color: #A31C41;
        }
        
        @media (max-width: 900px) {
          .quick-ref {
            gap: 1.2em;
          }
          .ref-card {
            margin-bottom: 18px;
          }
        }
        
        .ref-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 15px 40px rgba(35, 99, 131, 0.2);
        }
        
        .ref-card h3 {
            font-size: 2.2em;
            margin-bottom: 12px;
            font-weight: 700;
            color: #1a4d66;
        }
        
        .ref-card .serves {
            background: #f8f9fa;
            padding: 10px 18px;
            border-radius: 20px;
            font-size: 1em;
            margin-bottom: 18px;
            display: inline-block;
            font-weight: 500;
            color: #666;
            border: 1px solid #e9ecef;
        }
        
        .cost-display {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin: 18px 0 0 0;
        }
        
        .cost-item {
            background: #f8f9fa;
            padding: 12px 16px;
            border-radius: 10px;
            font-size: 1em;
            font-weight: 600;
            color: #333;
            border: 1px solid #e9ecef;
            transition: all 0.2s ease;
        }
        
        .cost-item:hover {
            background: #e9ecef;
            transform: translateY(-1px);
        }
        
        .shopping-calculator {
            background: linear-gradient(135deg, #007E8C 0%, #47B3CB 100%);
            padding: 40px;
            border-radius: 20px;
            color: white;
            margin-bottom: 20px;
            box-shadow: 0 15px 40px rgba(0,126,140,0.3);
            overflow-x: hidden;
        }
        
        .calc-form {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }
        
        /* PB&J Calculator specific layout fixes */
        #pbj-calculator .calc-form {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
            align-items: start;
        }
        
        #pbj-calculator .calc-input-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
            width: 100%;
        }
        
        #pbj-calculator .calc-input-group input,
        #pbj-calculator .calc-input-group select {
            width: 100%;
            min-width: 0;
            box-sizing: border-box;
        }
        
        @media (max-width: 768px) {
            #pbj-calculator .calc-form {
                grid-template-columns: 1fr;
                gap: 25px;
            }
        }
        
        .calc-input-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
            width: 100%;
            min-width: 0;
        }
        
        .calc-input-group label {
            font-weight: 700;
            font-size: 1.2em;
            color: rgba(255,255,255,0.98);
            text-transform: uppercase;
            letter-spacing: 0.8px;
            margin-bottom: 8px;
            text-shadow: 0 1px 2px rgba(0,0,0,0.2);
        }
        
        .calc-input-group input, .calc-input-group select {
            padding: 18px 24px;
            border: none;
            border-radius: 12px;
            font-size: 1.2em;
            font-weight: 500;
            background: rgba(255,255,255,0.98);
            color: #2c3e50;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            border: 2px solid transparent;
            width: 100%;
            box-sizing: border-box;
            min-width: 0;
        }
        
        .calc-input-group input:focus, .calc-input-group select:focus {
            outline: none;
            background: white;
            border-color: #FBAD3F;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .calc-input-group input::placeholder {
            color: #7f8c8d;
            font-style: italic;
        }
        
        .calc-button {
            background: linear-gradient(135deg, #A31C41 0%, #8B1639 100%);
            color: white;
            border: none;
            padding: 18px 40px;
            border-radius: 12px;
            font-size: 1.2em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 6px 20px rgba(163,28,65,0.4);
            margin-top: 10px;
            width: 100%;
            max-width: 200px;
            justify-self: center;
        }
        
        .calc-button:hover {
            background: linear-gradient(135deg, #8B1639 0%, #A31C41 100%);
            color: white;
            box-shadow: 0 10px 30px rgba(163,28,65,0.6);
        }
        
        .calc-button:active {
            transform: translateY(-1px);
        }
        
        .export-button {
            background: linear-gradient(135deg, #FBAD3F 0%, #F39C12 100%);
            color: white;
            border: none;
            padding: 15px 35px;
            border-radius: 12px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 6px 20px rgba(251,173,63,0.4);
            margin: 15px auto;
            display: block;
            max-width: 250px;
        }
        
        .export-button:hover {
            background: linear-gradient(135deg, #F39C12 0%, #FBAD3F 100%);
            color: white;
            box-shadow: 0 10px 30px rgba(251,173,63,0.6);
        }
        
        .export-button:active {
            transform: translateY(-1px);
        }
        
        /* Print styles for PDF export */
        @media print {
            body * {
                visibility: hidden;
            }
            .pdf-content, .pdf-content * {
                visibility: visible;
            }
            .pdf-content {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
            }
            
            .pdf-header {
                text-align: center;
                margin-bottom: 30px;
            }
            
            .pdf-section {
                margin-bottom: 20px;
                page-break-inside: avoid;
            }
            
            .pdf-section h3 {
                border-bottom: 2px solid #236383;
                padding-bottom: 5px;
                margin-bottom: 15px;
            }
            
            .pdf-grid {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 20px;
                margin-bottom: 20px;
            }
            
            .pdf-checklist {
                list-style: none;
                padding: 0;
            }
            
            .pdf-checklist li {
                margin: 8px 0;
                font-size: 11px;
            }
            
            .no-print {
                display: none !important;
            }
        }
        
        .calc-button-container {
            grid-column: 1 / -1;
            display: flex;
            justify-content: center;
            margin-top: 15px;
        }
        
        .calc-result {
            background: rgba(255,255,255,0.12);
            padding: 30px;
            border-radius: 16px;
            margin-top: 25px;
            display: none;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .result-summary {
            text-align: center;
            margin-bottom: 24px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255,255,255,0.2);
        }

        .result-summary h3 {
            color: #fff;
            font-size: 1.3em;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .result-summary .total-sandwiches {
            font-size: 2.4em;
            font-weight: 700;
            color: #fff;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .result-summary .total-cost {
            font-size: 1.3em;
            color: rgba(255,255,255,0.9);
            margin-top: 4px;
        }

        .package-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 24px;
        }

        .package-tile {
            background: rgba(255,255,255,0.12);
            border: 1px solid rgba(255,255,255,0.15);
            border-radius: 10px;
            padding: 16px 12px;
            text-align: center;
        }

        .package-tile .pkg-count {
            font-size: 2.2em;
            font-weight: 700;
            color: #fff;
            line-height: 1.1;
        }

        .package-tile .pkg-label {
            font-size: 0.78em;
            color: rgba(255,255,255,0.55);
            margin-top: 4px;
            line-height: 1.2;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .package-tile .pkg-product {
            font-size: 1.05em;
            color: rgba(255,255,255,0.9);
            margin-top: 6px;
            line-height: 1.3;
            font-weight: 600;
        }

        .package-tile .pkg-price {
            font-size: 0.9em;
            color: #fff;
            margin-top: 6px;
            font-weight: 600;
        }

        @media (max-width: 480px) {
            .package-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .shopping-receipt {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .shopping-receipt li {
            display: flex;
            align-items: flex-start;
            gap: 14px;
            padding: 14px 16px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            color: #fff;
            font-size: 1.05em;
            line-height: 1.5;
        }

        .shopping-receipt li:last-child {
            border-bottom: none;
        }

        .shopping-receipt input[type="checkbox"] {
            margin-top: 4px;
            transform: scale(1.3);
            flex-shrink: 0;
            accent-color: #007E8C;
        }

        .shopping-receipt .item-details {
            flex: 1;
        }

        .shopping-receipt .item-name {
            font-weight: 600;
        }

        .shopping-receipt .item-meta {
            font-size: 0.88em;
            color: rgba(255,255,255,0.7);
            margin-top: 2px;
        }

        .shopping-receipt .item-price {
            font-weight: 600;
            white-space: nowrap;
            color: rgba(255,255,255,0.95);
        }

        .shopping-receipt .section-label {
            padding: 10px 16px 4px 16px;
            font-size: 0.8em;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            color: rgba(255,255,255,0.5);
            border-bottom: none;
        }

        .receipt-total {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px;
            margin-top: 8px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            font-size: 1.2em;
            font-weight: 700;
            color: #fff;
        }

        .per-sandwich-cost {
            text-align: center;
            margin-top: 12px;
            font-size: 0.95em;
            color: rgba(255,255,255,0.7);
        }

        .pricing-note {
            text-align: center;
            margin-top: 16px;
            padding: 12px 16px;
            font-size: 0.82em;
            color: rgba(255,255,255,0.5);
            line-height: 1.5;
            border-top: 1px solid rgba(255,255,255,0.1);
        }

        /* Legacy shopping list (hidden, replaced by receipt) */
        .shopping-list {
            display: none;
        }

        .shopping-list h3 {
            color: #A31C41;
            margin-bottom: 15px;
        }

        .checklist {
            list-style: none;
        }

        .checklist li {
            padding: 10px 0;
            border-bottom: 1px solid #dee2e6;
            display: flex;
            align-items: center;
        }

        .checklist input[type="checkbox"] {
            margin-right: 15px;
            transform: scale(1.2);
        }
        
        .tips-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .tip-card {
            background: linear-gradient(135deg, #236383 0%, #007E8C 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
        }
        
        .tip-card h3 {
            margin-bottom: 15px;
            font-size: 1.3em;
        }
        
        .tip-card ul {
            list-style: none;
        }
        
        .tip-card li {
            padding: 5px 0;
            padding-left: 20px;
            position: relative;
        }
        
        .tip-card li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            top: 5px;
            background: rgba(255,255,255,0.2);
            border-radius: 50%;
            width: 16px;
            height: 16px;
            text-align: center;
            font-size: 12px;
            line-height: 16px;
        }
        
        .safety-banner {
            background: linear-gradient(135deg, #A31C41 0%, #8B1639 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            font-weight: 500;
            font-size: 1em;
            margin: 20px 0;
        }
        
        .recipe-card {
            background: linear-gradient(135deg, #236383 0%, #007E8C 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
        }
        
        .recipe-ingredients {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }
        
        /* PB&J Calculator ingredient alignment fix */
        #pbj-calculator .recipe-ingredients {
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
            max-width: 100%;
        }
        
        @media (max-width: 768px) {
            #pbj-calculator .recipe-ingredients {
                grid-template-columns: 1fr;
            }
        }
        
        /* Additional PB&J Calculator improvements */
        #pbj-calculator .calc-input-group label {
            font-size: 1.1em;
            margin-bottom: 10px;
            text-align: left;
        }
        
        #pbj-calculator .calc-input-group input,
        #pbj-calculator .calc-input-group select {
            padding: 16px 20px;
            font-size: 1.1em;
            width: 100%;
            box-sizing: border-box;
        }
        
        #pbj-calculator .calc-input-group input::placeholder {
            color: #7f8c8d;
            font-style: italic;
        }
        
        #pbj-calculator .calc-input-group span {
            font-size: 0.95em;
            color: white;
            margin-top: 5px;
            line-height: 1.4;
            text-shadow: 0 1px 2px rgba(0,0,0,0.3);
            font-weight: 500;
        }
        
        .ingredient {
            background: rgba(255,255,255,0.2);
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            line-height: 1.4;
        }
        
        .ingredient .amount {
            font-size: 1.4em;
            font-weight: 600;
            margin-right: 8px;
        }
        
        .ingredient .item {
            font-size: 1.1em;
            font-weight: 400;
        }
        
        @media (max-width: 768px) {
            body {
                font-size: 18px;
            }
            
            .calc-form {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .calc-input-group input, .calc-input-group select {
                padding: 16px 20px;
                font-size: 1.1em;
            }
            
            .calc-input-group label {
                font-size: 1em;
            }
            
            .calc-button {
                width: 100%;
                padding: 16px 24px;
                font-size: 1.1em;
            }
            
            .section {
                padding: 20px;
            }
            
            .shopping-calculator {
                padding: 20px;
            }
            
            .shopping-calculator h3 {
                font-size: 1.2em;
            }
            
            .recipe-ingredients {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2.2em;
            }
            
            .section h2 {
                font-size: 1.7em;
            }
            
            .shopping-receipt li {
                padding: 12px 10px;
                font-size: 0.95em;
            }

            .result-summary .total-sandwiches {
                font-size: 2em;
            }

            .receipt-total {
                font-size: 1.05em;
            }
        }
        .shopping-calculator .plan-mode-label,
        .plan-mode-label {
            color: #236383 !important;
            background: rgba(255,255,255,0.95) !important;
            border-radius: 8px;
            padding: 6px 12px;
            font-weight: 600;
            font-size: 1.05em;
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 4px;
        }
        .plan-mode-label input[type="radio"] {
            accent-color: #A31C41;
        }
        .section h2, .shopping-calculator h3 {
            color: #236383;
            text-shadow: none;
        }
        .price-badge {
            background: #fffbe8;
            color: #A31C41;
            border-radius: 4px;
            padding: 2px 7px;
            font-weight: 700;
            font-size: 1em;
            margin-left: 2px;
            display: inline-block;
        }

        .cta-banner {
            background: linear-gradient(135deg, #A31C41 0%, #8B1639 100%);
            color: white;
            padding: 24px 32px;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(163, 28, 65, 0.35);
            margin-bottom: 28px;
            text-align: center;
            border: 3px solid rgba(251, 173, 63, 0.5);
        }

        .cta-banner h2 {
            color: white !important;
            font-size: 1.8em;
            font-weight: 700;
            margin-bottom: 12px;
            border: none;
            padding: 0;
        }

        .cta-banner p {
            font-size: 1.15em;
            margin-bottom: 18px;
            line-height: 1.5;
        }

        .cta-button {
            display: inline-block;
            background: linear-gradient(135deg, #FBAD3F 0%, #F39C12 100%);
            color: #fff;
            text-decoration: none;
            padding: 16px 40px;
            border-radius: 10px;
            font-size: 1.2em;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            box-shadow: 0 6px 20px rgba(251, 173, 63, 0.4);
            transition: all 0.3s ease;
        }

        .cta-button:hover {
            background: linear-gradient(135deg, #F39C12 0%, #FBAD3F 100%);
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(251, 173, 63, 0.6);
        }

        @media (max-width: 768px) {
            .cta-banner {
                padding: 20px 24px;
            }

            .cta-banner h2 {
                font-size: 1.5em;
            }

            .cta-banner p {
                font-size: 1.05em;
            }

            .cta-button {
                padding: 14px 32px;
                font-size: 1.1em;
            }
        }

        .nav-menu {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            margin-bottom: 25px;
            text-align: center;
        }

        .nav-menu h3 {
            color: #1a4d66;
            font-size: 1.2em;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .nav-links {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            justify-content: center;
        }

        .nav-link {
            background: linear-gradient(135deg, #007E8C 0%, #47B3CB 100%);
            color: white;
            text-decoration: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(0,126,140,0.2);
        }

        .nav-link:hover {
            background: linear-gradient(135deg, #47B3CB 0%, #007E8C 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,126,140,0.3);
        }

        @media (max-width: 768px) {
            .nav-links {
                flex-direction: column;
            }

            .nav-link {
                width: 100%;
            }
        }

        /* Extra small mobile screens (portrait phones) */
        @media (max-width: 480px) {
            .container {
                padding: 12px;
            }

            .header {
                padding: 20px 15px;
            }

            .header h1 {
                font-size: 1.8em;
            }

            .section {
                padding: 16px;
            }
            
            .shopping-calculator {
                padding: 16px;
            }

            .section h2 {
                font-size: 1.5em;
            }

            .calc-input-group label {
                font-size: 1em;
            }

            .calc-input-group input,
            .calc-input-group select {
                padding: 14px 16px;
                font-size: 1em;
            }

            .calc-button {
                padding: 14px 20px;
                font-size: 1em;
            }

            .recipe-card {
                padding: 18px;
            }

            .product-title {
                font-size: 1em;
                line-height: 1.2;
            }

            .product-price {
                font-size: 1.3em;
            }

            .price-note {
                font-size: 0.95em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <img src="CMYK_PRINT_TSP-01-01.jpg" alt="The Sandwich Project Logo" style="max-width: 500px; width: 100%; height: auto; margin-bottom: 20px;">
            <p>Interactive Group Event Planning Guide</p>
        </div>

        <div class="nav-menu">
            <h3>Quick Navigation</h3>
            <div class="nav-links">
                <a href="eventestimator/sandwichprojecteventestimator.html" class="nav-link">üë• Group Capacity Estimator</a>
                <a href="#calculator" class="nav-link">üßÆ Deli Calculator</a>
                <a href="#pbj-calculator" class="nav-link">ü•ú PB&J Calculator</a>
                <a href="#pricing-info" class="nav-link">üìä Pricing Info</a>
                <a href="#recipe" class="nav-link">ü•™ Recipes</a>
                <a href="#food-safety" class="nav-link">üõ°Ô∏è Food Safety</a>
            </div>
        </div>


        <div class="section" id="intro-section" style="margin-bottom: 28px; background: linear-gradient(135deg, #f8f9fa 80%, #e3f6f9 100%); border: 2px solid #FBAD3F; box-shadow: 0 4px 16px #FBAD3F22;">
            <h2 style="color: #A31C41; font-size: 1.7em; font-weight: 700; margin-bottom: 10px;">Welcome to the Sandwich Project Planning Tool!</h2>
            <p style="font-size: 1.15em; color: #236383; margin-bottom: 10px;">
                This page is designed to help volunteers and organizers plan group sandwich-making events when working with The Sandwich Project! Use this tool to estimate costs, quantities, and supplies for your event‚Äî whether you‚Äôre making 20 or 2,000 sandwiches!
            </p>
            <ul style="font-size: 1.08em; color: #236383; margin-bottom: 10px; padding-left: 22px;">
                <li>üßÆ <strong>Interactive Calculator:</strong> Plan by sandwich count or budget.</li>
                <li>üìä <strong>Current Ingredient Pricing:</strong> See up-to-date price estimates for bread, meat, cheese, and bags.</li>
                <li>üéØ <strong>Quick Reference:</strong> Popular quantities and cost estimates at a glance.</li>
                <li>ü•™ <strong>Recipe & Safety:</strong> Standard sandwich recipe and food safety tips.</li>
                <li>üí° <strong>Planning Tips:</strong> Advice for smooth, safe, and successful events.</li>
            </ul>
            <p style="font-size: 1em; color: #888; margin-bottom: 0;">
                <strong>How to use:</strong> Start with the calculator below, or jump to any section for details and tips. All pricing is based on recent shopping at various retailers (Costco, Kroger, Publix, etc.) and may vary by location.
            </p>
        </div>
        
        <!-- Interactive Calculator Section -->
        <div class="section" id="calculator">
            <h2>üßÆ Interactive Calculator</h2>
            <div class="shopping-calculator">
                <h3 style="color: #fff; text-shadow: 0 2px 8px rgba(35,99,131,0.18);">Plan Your Sandwich Making Shopping Trip</h3>
                <div style="margin-bottom: 24px; padding: 18px 32px; background: #f8f9fa; border-radius: 10px; border: 1.5px solid #e0e0e0;">
                    <label style="font-weight: 600; font-size: 1.1em; display: block; margin-bottom: 10px; color: #236383;">How would you like to plan your sandwich making shopping trip?</label>
                    <div style="display: flex; flex-direction: column; gap: 12px; padding-left: 8px; padding-right: 8px;">
                        <label class="plan-mode-label" style="display: flex; align-items: center; gap: 10px; font-size: 1.05em; cursor:pointer;">
                            <input type="radio" name="planMode" id="planBySandwiches" value="sandwiches" checked onchange="togglePlanMode()">
                            How much will it cost us to make ___ # of sandwiches?
                        </label>
                        <label class="plan-mode-label" style="display: flex; align-items: center; gap: 10px; font-size: 1.05em; cursor:pointer;">
                            <input type="radio" name="planMode" id="planByBudget" value="budget" onchange="togglePlanMode()">
                            How many sandwiches can we make with a budget of $____?
                        </label>
                    </div>
                </div>
                <div class="calc-form">
                    <div class="calc-input-group" id="sandwichCountGroup">
                        <label for="sandwichCount">Number of sandwiches</label>
                        <input type="number" id="sandwichCount" min="1" max="2000" placeholder="Enter quantity (e.g., 100)">
                        <span style="font-size: 0.98em; color: rgba(255,255,255,0.9); margin-top: 2px;">Enter the number of sandwiches you want to make.</span>
                    </div>
                    <div class="calc-input-group" id="budgetGroup" style="display: none;">
                        <label for="budgetAmount">Budget ($)</label>
                        <input type="number" id="budgetAmount" min="1" max="10000" placeholder="Enter your budget (e.g., 200)">
                        <span style="font-size: 0.98em; color: rgba(255,255,255,0.9); margin-top: 2px;">Enter the total amount you want to spend.</span>
                    </div>

                    <div class="calc-input-group">
                        <label>Meat amount per sandwich (oz)</label>
                        <select id="meatAmount">
                            <option value="2">2 oz of meat (lighter serving)</option>
                            <option value="2.5" selected>2.5 oz of meat (standard sandwich)</option>
                            <option value="3">3 oz of meat (generous serving)</option>
                        </select>
                        <span style="font-size: 0.9em; color: rgba(255,255,255,0.8); margin-top: 4px;">TSP standard is 2.5 oz per sandwich (~3 thin slices or ~2 thicker slices).</span>
                    </div>

                    <div class="calc-input-group">
                        <label>Meat type</label>
                        <select id="meatType">
                            <option value="">Choose your meat</option>
                            <optgroup label="Popular Options">
                                <option value="ham">üê∑ Kirkland Ham (2-pack, 48 slices, $9.89) - $0.21/slice</option>
                                <option value="kroger-chicken-thin">üêî Kroger Chicken Thin Sliced (9 oz / 18 slices, $3.50) - $0.19/slice</option>
                                <option value="publix-turkey">ü¶É Publix Turkey Breast, Thin Sliced (16 oz / 32 slices, $7.07) - $0.22/slice</option>
                                <option value="kroger-turkey-thin">ü¶É Kroger Turkey Thin Sliced (9 oz / 18 slices, $3.99) - $0.22/slice</option>
                                <option value="kroger-turkey-family">ü¶É Kroger Turkey Family Size (1 lb / 30-32 slices, $4.39) - $0.14/slice</option>
                            </optgroup>
                            <optgroup label="More Options">
                                <option value="turkey">ü¶É Kirkland Turkey (2-pack, 40 slices, $13.99) - $0.35/slice</option>
                                <option value="hillshire-turkey">ü¶É Hillshire Farm Ultra Thin (9 oz / 18 slices, $6.07) - $0.34/slice</option>
                                <option value="land-o-frost-turkey">ü¶É Land O'Frost Premium (16 oz / 32 slices, $9.53) - $0.30/slice</option>
                                <option value="kroger-turkey-regular">ü¶É Kroger Private Selection¬Æ (8 oz / 11-12 slices, $6.49) - $0.56/slice</option>
                                <option value="oscar-mayer-chicken-blackened">üêî Oscar Mayer Blackened Chicken (8 oz / 11-12 slices, $4.49) - $0.39/slice</option>
                                <option value="oscar-mayer-chicken-rotisserie">üêî Oscar Mayer Rotisserie Chicken (16 oz / 32 slices, $7.99) - $0.25/slice</option>
                            </optgroup>
                        </select>
                    </div>
                    
                    <div class="calc-input-group">
                        <label>Cheese type</label>
                        <select id="cheeseType">
                            <option value="">Choose your cheese</option>
                            <optgroup label="üá∫üá∏ American Cheese (Deli Style)">
                                <option value="great-value-american">üá∫üá∏ Great Value American - Walmart (24 slices, $3.98)</option>
                                <option value="kroger-american">üá∫üá∏ Kroger Deli American (24 slices, $4.29)</option>
                                <option value="sargento-american">üá∫üá∏ Sargento Sliced American (22 slices, $4.99)</option>
                                <option value="land-o-lakes-american">üá∫üá∏ Land O'Lakes American (24 slices, $6.49)</option>
                                <option value="boars-head-american">üá∫üá∏ Boar's Head American (24 slices, $8.99)</option>
                            </optgroup>
                        </select>
                    </div>
                    
                    <div class="calc-input-group">
                        <label>Bread type</label>
                        <select id="breadType">
                            <option value="">Choose your bread</option>
                            <option value="great-value-white">üçû Great Value White (20 oz, ~11 sandwiches, $1.48)</option>
                            <option value="kroger-white">üçû Kroger White Sandwich (20 oz, ~11 sandwiches, $1.00‚Äì$1.99)</option>
                            <option value="wonder-classic">üçû Wonder Bread Classic White (20 oz, ~10 sandwiches, $2.47‚Äì$4.79)</option>
                            <option value="wonder-giant">üçû Wonder Bread Giant White (24 oz, ~11 sandwiches, $3.99‚Äì$5.29)</option>
                            <option value="sara-lee-butter">üçû Sara Lee Butter Bread (20 oz, ~10 sandwiches, $2.98‚Äì$3.29)</option>
                            <option value="sara-lee-classic">üçû Sara Lee Classic White (20 oz, ~10 sandwiches, $3.48‚Äì$4.49)</option>
                        </select>
                    </div>
                    
                    <div class="calc-button-container">
                        <button class="calc-button" onclick="calculateNeeds()">Calculate My Order</button>
                    </div>
                </div>
                
                <div class="calc-result" id="calcResult">
                </div>
                
                <button class="export-button" id="exportButton" onclick="generatePDF()" style="display: none;">
                    üìÑ Export to PDF
                </button>
            </div>
            
            <div style="background: rgba(255,193,63,0.25); border: 2px solid #FBAD3F; padding: 20px; border-radius: 12px; margin-top: 25px; font-size: 1.1em;">
                <strong style="color: #B8860B; font-size: 1.2em;">üßä Before You Shop:</strong>
                <span style="color: #8B4513; font-weight: 500;">Please bring a cooler with ice packs to the store to keep meat and cheese cold on the drive home ‚Äî deli ingredients need to stay refrigerated.</span>
            </div>
            
            <div class="shopping-list" id="shoppingList" style="display: none;">
                <h3>üìù Your Shopping Checklist</h3>
                <ul class="checklist" id="shoppingChecklist">
                </ul>
            </div>
        </div>

        <!-- PB&J Calculator Section -->
        <div class="section" id="pbj-calculator">
            <h2>ü•ú Peanut Butter & Jelly Calculator</h2>
            <div class="shopping-calculator">
                <h3 style="color: #fff; text-shadow: 0 2px 8px rgba(35,99,131,0.18);">Plan Your PB&J Sandwiches</h3>
                <div style="margin-bottom: 24px; padding: 18px 32px; background: #f8f9fa; border-radius: 10px; border: 1.5px solid #e0e0e0;">
                    <label style="font-weight: 600; font-size: 1.1em; display: block; margin-bottom: 10px; color: #236383;">How would you like to plan?</label>
                    <div style="display: flex; flex-direction: column; gap: 12px; padding-left: 8px; padding-right: 8px;">
                        <label class="plan-mode-label" style="display: flex; align-items: center; gap: 10px; font-size: 1.05em; cursor:pointer;">
                            <input type="radio" name="pbjPlanMode" id="pbjPlanBySandwiches" value="sandwiches" checked onchange="togglePBJPlanMode()">
                            How much will it cost us to make ___ # of PB&J sandwiches?
                        </label>
                        <label class="plan-mode-label" style="display: flex; align-items: center; gap: 10px; font-size: 1.05em; cursor:pointer;">
                            <input type="radio" name="pbjPlanMode" id="pbjPlanByBudget" value="budget" onchange="togglePBJPlanMode()">
                            How many PB&J sandwiches can we make with a budget of $____?
                        </label>
                    </div>
                </div>
                <div class="calc-form">
                    <div class="calc-input-group" id="pbjCountGroup">
                        <label for="pbjCount">Number of PB&J sandwiches</label>
                        <input type="number" id="pbjCount" min="1" max="2000" placeholder="Enter quantity (e.g., 100)">
                        <span style="font-size: 0.98em; color: rgba(255,255,255,0.9); margin-top: 2px;">Enter the number of PB&J sandwiches you want to make.</span>
                    </div>
                    <div class="calc-input-group" id="pbjBudgetGroup" style="display: none;">
                        <label for="pbjBudgetAmount">Budget ($)</label>
                        <input type="number" id="pbjBudgetAmount" min="1" max="10000" placeholder="Enter your budget (e.g., 100)">
                        <span style="font-size: 0.98em; color: rgba(255,255,255,0.9); margin-top: 2px;">Enter the total amount you want to spend on PB&J supplies.</span>
                    </div>

                    <div class="calc-input-group">
                        <label>Peanut butter type</label>
                        <select id="pbType">
                            <option value="jif-40">ü•ú Jif Creamy 40 oz (1.13kg, ~75 tbsp) - $7.99</option>
                            <option value="skippy-40">ü•ú Skippy Creamy 40 oz (1.13kg, ~75 tbsp) - $7.99</option>
                            <option value="jif-16">ü•ú Jif Creamy 16 oz (454g, ~30 tbsp) - $3.59</option>
                            <option value="skippy-16">ü•ú Skippy Creamy 16.3 oz (462g, ~31 tbsp) - $3.59</option>
                        </select>
                    </div>

                    <div class="calc-input-group">
                        <label>Jelly type</label>
                        <select id="jellyType">
                            <option value="smuckers-32">üçá Smucker's Concord Grape Jelly 32 oz (~60 tbsp) - $4.99</option>
                            <option value="welchs-30">üçá Welch's Concord Grape Jelly 30 oz (~56 tbsp) - $3.59</option>
                            <option value="smuckers-squeeze-20">üçá Smucker's Squeeze Grape Jelly 20 oz (~38 tbsp) - $3.59</option>
                            <option value="welchs-squeeze-18">üçá Welch's Natural Concord Grape Squeeze 18 oz (~34 tbsp) - $3.83</option>
                        </select>
                        <span style="font-size: 0.95em; color: rgba(255,255,255,0.9); margin-top: 4px; font-weight: 600;">‚ö†Ô∏è IMPORTANT: Use JELLY only - no jam, preserves, or fruit spread!</span>
                    </div>

                    <div class="calc-input-group">
                        <label>Bread type</label>
                        <select id="pbjBreadType">
                            <option value="">Choose your bread</option>
                            <option value="great-value-white">üçû Great Value White (20 oz, ~11 sandwiches, $1.48)</option>
                            <option value="kroger-white">üçû Kroger White Sandwich (20 oz, ~11 sandwiches, $1.00‚Äì$1.99)</option>
                            <option value="wonder-classic">üçû Wonder Bread Classic White (20 oz, ~10 sandwiches, $2.47‚Äì$4.79)</option>
                            <option value="wonder-giant">üçû Wonder Bread Giant White (24 oz, ~11 sandwiches, $3.99‚Äì$5.29)</option>
                            <option value="sara-lee-butter">üçû Sara Lee Butter Bread (20 oz, ~10 sandwiches, $2.98‚Äì$3.29)</option>
                            <option value="sara-lee-classic">üçû Sara Lee Classic White (20 oz, ~10 sandwiches, $3.48‚Äì$4.49)</option>
                        </select>
                    </div>

                    <!-- Spatula Option -->
                    <div class="calc-input-group" style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px; margin-top: 10px;">
                        <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 10px;">
                            <a href="https://www.amazon.com/4-Piece-Silicone-Jar-Spatula-Set/dp/B0FDGY1R58" target="_blank" rel="noopener noreferrer">
                                <img src="pb-spreaders.png" alt="4-Piece Silicone Jar Spatula Set - Long handle for reaching bottom of jars" style="max-width: 120px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.2); cursor: pointer;">
                            </a>
                            <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                                <input type="checkbox" id="includeSpatulas" onchange="toggleSpatulaQuantity()" style="width: 28px !important; height: 28px !important; min-width: 28px; min-height: 28px; cursor: pointer; accent-color: #FBAD3F; flex-shrink: 0;">
                                <span>Include spreading spatulas in calculation</span>
                            </label>
                        </div>
                        <div id="spatulaQuantitySection" style="display: none; margin-top: 10px;">
                            <label for="spatulaPackCount" style="font-size: 0.95em;">How many 4-packs do you need?</label>
                            <input type="number" id="spatulaPackCount" min="1" value="1" placeholder="1" style="margin-top: 5px;">
                            <div style="font-size: 0.85em; color: rgba(255,255,255,0.85); margin-top: 8px; padding: 10px; background: rgba(251,173,63,0.2); border-radius: 8px;">
                                <strong>üí° Tip:</strong> You need 2 spatulas per group/table making sandwiches ‚Äî one for peanut butter and one for jelly. Each pack contains 4 spatulas ($5.99/pack).<br>
                                <strong>üì¶ Overnight shipping available on Amazon!</strong>
                            </div>
                        </div>
                    </div>

                    <div class="calc-button-container">
                        <button class="calc-button" onclick="calculatePBJ()">Calculate PB&J Needs</button>
                    </div>
                </div>

                <div class="calc-result" id="pbjResult">
                </div>
            </div>

            <div class="recipe-card" style="margin-top: 25px;">
                <h3>Every PB&J Sandwich Contains</h3>
                <div class="recipe-ingredients">
                    <div class="ingredient">
                        <span class="amount">2</span><span class="item">slices bread</span>
                    </div>
                    <div class="ingredient">
                        <span class="amount">3</span><span class="item">tbsp peanut butter</span>
                    </div>
                    <div class="ingredient">
                        <span class="amount">1.5</span><span class="item">tbsp jelly</span>
                    </div>
                    <div class="ingredient">
                        <span class="amount">1</span><span class="item">zip-lock sandwich bag</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Move Pricing Information section down here -->
        <div class="section" id="pricing-info" style="margin-bottom: 32px;">
            <h2>üìä Pricing Information <span style='font-size:0.7em; font-weight:400;'>(Updated 9/17/2025)</span></h2>
            
            <!-- Important shopping notes - NOT a hazmat warning -->
            <div style="background: #fffbf0; border: 2px solid #f4a261; border-radius: 10px; padding: 20px; margin-bottom: 24px;">
                <h3 style="color: #d97706; font-size: 1.2em; margin-bottom: 16px; font-weight: 600;">
                    üìù Important Shopping Notes
                </h3>
                <div style="display: flex; flex-direction: column; gap: 14px; color: #555; font-size: 1.05em;">
                    <div style="display: flex; gap: 12px; align-items: start;">
                        <span style="font-size: 1.4em; flex-shrink: 0;">ü•©</span>
                        <div>
                            <strong style="color: #333;">Meat: Buy pre-packaged only</strong><br>
                            <span style="font-size: 0.95em;">Don't get meat sliced at the deli counter‚Äîpre-packaged is safer and easier to work with.</span>
                        </div>
                    </div>
                    <div style="display: flex; gap: 12px; align-items: start;">
                        <span style="font-size: 1.4em; flex-shrink: 0;">üßÄ</span>
                        <div>
                            <strong style="color: #333;">Cheese: Avoid individually wrapped slices</strong><br>
                            <span style="font-size: 0.95em;">Individually wrapped slices like Kraft singles are a pain to unwrap, they're "cheese product" (not real cheese), and they turn into a gross mess on sandwiches. Get deli-style sliced cheese‚Äîthe kind sold together in one pack, not individually wrapped processed singles</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Pricing cards - clean, no wild gradients -->
            <!-- Pricing Section - Compact & Colorful -->
<style>
    .pricing-section {
        max-width: 1200px;
        margin: 0 auto;
        padding: 32px 20px;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }
    
    .pricing-header {
        text-align: center;
        margin-bottom: 24px;
    }
    
    .pricing-header h2 {
        color: #236383;
        font-size: 1.8em;
        margin-bottom: 4px;
        font-weight: 700;
    }
    
    .pricing-meta {
        color: #007E8C;
        font-size: 0.9em;
    }
    
    /* Shopping requirements banner */
    .shopping-requirements {
        background: #e8f5f9;
        border: 2px solid #47B3CB;
        color: #236383;
        padding: 14px 20px;
        border-radius: 8px;
        margin-bottom: 24px;
        font-weight: 500;
    }
    
    .requirements-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin-top: 12px;
    }
    
    .requirement-item {
        font-size: 0.95em;
    }
    
    .requirement-header {
        font-weight: 700;
        color: #A31C41;
        margin-bottom: 4px;
        font-size: 1.05em;
    }
    
    .requirement-text {
        color: #555;
        line-height: 1.3;
    }
    
    /* Category sections */
    .price-category {
        margin-bottom: 20px;
    }
    
    .category-label {
        color: #236383;
        font-weight: 700;
        font-size: 1.1em;
        margin-bottom: 10px;
        padding-left: 4px;
    }
    
    /* Product grid */
    .price-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
        gap: 10px;
    }
    
    .price-card {
        border-radius: 8px;
        padding: 12px;
        text-align: center;
        color: white;
        transition: transform 0.2s;
        cursor: pointer;
        position: relative;
        overflow: visible;
        display: flex;
        flex-direction: column;
        gap: 3px;
        min-height: 150px;
    }
    
    .price-card:hover {
        transform: translateY(-3px);
    }
    
    /* Card colors using brand palette */
    .card-meat {
        background: linear-gradient(135deg, #A31C41 0%, #8B1639 100%);
        box-shadow: 0 4px 12px rgba(163, 28, 65, 0.3);
    }
    
    .card-cheese {
        background: linear-gradient(135deg, #236383 0%, #007E8C 100%);
        box-shadow: 0 4px 12px rgba(35, 99, 131, 0.3);
    }
    
    .card-bread {
        background: linear-gradient(135deg, #FBAD3F 0%, #F39C12 100%);
        box-shadow: 0 4px 12px rgba(251, 173, 63, 0.3);
    }
    
    .card-supplies {
        background: linear-gradient(135deg, #47B3CB 0%, #007E8C 100%);
        box-shadow: 0 4px 12px rgba(71, 179, 203, 0.3);
    }
    
    .product-emoji {
        font-size: 1.5em;
        margin-bottom: 4px;
    }
    
    .product-title {
        font-size: 1.05em;
        font-weight: 700;
        line-height: 1.3;
        border-bottom: 1px solid rgba(255,255,255,0.4);
        padding-bottom: 8px;
        margin-bottom: 6px;
    }
    
    .product-size {
        font-size: 0.85em;
        opacity: 0.95;
        margin-bottom: 6px;
        font-weight: 500;
    }
    
    .product-price {
        font-size: 1.5em;
        font-weight: 800;
        margin-top: 6px;
        margin-bottom: 6px;
        text-shadow: 0 1px 2px rgba(0,0,0,0.3);
    }
    
    .price-note {
        font-size: 1.1em;
        font-weight: 600;
        background: rgba(255,255,255,0.25);
        color: #1a1a2e;
        padding: 4px 10px;
        border-radius: 6px;
        margin-top: 4px;
    }
    
    /* Cheese guide - compact */
    .cheese-guide {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 12px;
        margin-top: 16px;
        margin-bottom: 12px;
    }
    
    .cheese-do, .cheese-dont {
        padding: 18px;
        border-radius: 12px;
        font-size: 1.1em;
        line-height: 1.5;
    }

    .cheese-do {
        background: rgba(0, 126, 140, 0.12);
        border: 2px solid #007E8C;
        color: #236383;
    }

    .cheese-dont {
        background: rgba(163, 28, 65, 0.1);
        border: 2px solid #A31C41;
        color: #A31C41;
    }

    .cheese-do strong, .cheese-dont strong {
        display: block;
        margin-bottom: 8px;
        font-size: 1.25em;
    }
    
    /* Mobile responsive */
    @media (max-width: 768px) {
        .price-grid {
            grid-template-columns: 1fr;
            gap: 16px;
        }
        
        .price-card {
            padding: 16px;
            min-height: auto;
        }
        
        .product-title {
            font-size: 1.1em;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }
        
        .product-size {
            font-size: 0.95em;
            word-wrap: break-word;
        }
        
        .product-price {
            font-size: 1.4em;
        }
        
        .price-note {
            font-size: 1.05em;
            word-wrap: break-word;
        }
        
        .cheese-guide {
            grid-template-columns: 1fr;
        }
        
        .requirements-grid {
            grid-template-columns: 1fr;
        }
    }
</style>

<div class="pricing-section">
    <div class="pricing-header">
        <h2>Ingredient Cost Guide</h2>
        <div class="pricing-meta">Based on recent shopping ‚Ä¢ Prices vary by location</div>
    </div>
    
    <!-- Meat Section -->
    <div class="price-category">
        <div class="category-label">MEAT</div>
        <div class="price-grid">
            <div class="price-card card-meat">
                <div class="product-emoji">ü¶É</div>
                <div class="product-title">Kroger Turkey Family Size</div>
                <div class="product-size">1 lb ‚Ä¢ 30-32 slices</div>
                <div class="product-price">$4.39</div>
                <div class="price-note">~$0.14/slice</div>
            </div>
            
            <div class="price-card card-meat">
                <div class="product-emoji">üê∑</div>
                <div class="product-title">Kirkland Ham</div>
                <div class="product-size">2-pack ‚Ä¢ 48 slices</div>
                <div class="product-price">$9.89</div>
                <div class="price-note">~$0.21/slice</div>
            </div>
            
            <div class="price-card card-meat">
                <div class="product-emoji">ü¶É</div>
                <div class="product-title">Publix Turkey Breast</div>
                <div class="product-size">16 oz ‚Ä¢ 32 slices</div>
                <div class="product-price">$7.07</div>
                <div class="price-note">~$0.22/slice</div>
            </div>
            
            <div class="price-card card-meat">
                <div class="product-emoji">ü¶É</div>
                <div class="product-title">Kroger Turkey Thin Sliced</div>
                <div class="product-size">9 oz ‚Ä¢ 18 slices</div>
                <div class="product-price">$3.99</div>
                <div class="price-note">~$0.22/slice</div>
            </div>
        </div>
        
        <details style="margin-top: 20px;">
            <summary style="cursor: pointer; font-weight: 600; color: #1a4d66; font-size: 1.1em; padding: 12px; background: rgba(251,173,63,0.15); border-radius: 8px; margin-bottom: 15px;">
                ‚ûï Show More Meat Options
            </summary>
            <div class="price-grid" style="margin-top: 15px;">
                <div class="price-card card-meat">
                    <div class="product-emoji">ü¶É</div>
                    <div class="product-title">Land O'Frost Premium</div>
                    <div class="product-size">16 oz ‚Ä¢ 32 slices</div>
                    <div class="product-price">$9.53</div>
                    <div class="price-note">~$0.30/slice</div>
                </div>
                
                <div class="price-card card-meat">
                    <div class="product-emoji">ü¶É</div>
                    <div class="product-title">Hillshire Farm Ultra Thin</div>
                    <div class="product-size">9 oz ‚Ä¢ 18 slices</div>
                    <div class="product-price">$6.07</div>
                    <div class="price-note">~$0.34/slice</div>
                </div>
                
                <div class="price-card card-meat">
                    <div class="product-emoji">ü¶É</div>
                    <div class="product-title">Kirkland Turkey</div>
                    <div class="product-size">2-pack ‚Ä¢ 40 slices</div>
                    <div class="product-price">$13.99</div>
                    <div class="price-note">~$0.35/slice</div>
                </div>
                
                <div class="price-card card-meat">
                    <div class="product-emoji">ü¶É</div>
                    <div class="product-title">Kroger Private Selection¬Æ</div>
                    <div class="product-size">8 oz ‚Ä¢ 11-12 slices</div>
                    <div class="product-price">$6.49</div>
                    <div class="price-note">~$0.56/slice</div>
                </div>
            </div>
        </details>
    </div>
    
    <!-- American Cheese Section -->
    <div class="price-category">
        <div class="category-label">AMERICAN CHEESE (Deli Style)</div>
        <div class="price-grid">
            <div class="price-card card-cheese">
                <div class="product-emoji">üá∫üá∏</div>
                <div class="product-title">Great Value American</div>
                <div class="product-size">24 slices</div>
                <div class="product-price">$3.98</div>
                <div class="price-note">~$0.17/slice</div>
            </div>

            <div class="price-card card-cheese">
                <div class="product-emoji">üá∫üá∏</div>
                <div class="product-title">Kroger Deli American</div>
                <div class="product-size">24 slices</div>
                <div class="product-price">$4.29</div>
                <div class="price-note">~$0.18/slice</div>
            </div>

            <div class="price-card card-cheese">
                <div class="product-emoji">üá∫üá∏</div>
                <div class="product-title">Sargento American</div>
                <div class="product-size">22 slices</div>
                <div class="product-price">$4.99</div>
                <div class="price-note">~$0.23/slice</div>
            </div>

            <div class="price-card card-cheese">
                <div class="product-emoji">üá∫üá∏</div>
                <div class="product-title">Land O'Lakes American</div>
                <div class="product-size">24 slices</div>
                <div class="product-price">$6.49</div>
                <div class="price-note">~$0.27/slice</div>
            </div>

            <div class="price-card card-cheese">
                <div class="product-emoji">üá∫üá∏</div>
                <div class="product-title">Boar's Head American</div>
                <div class="product-size">24 slices</div>
                <div class="product-price">$8.99</div>
                <div class="price-note">~$0.37/slice</div>
            </div>
        </div>
    </div>
    
    <!-- Bread Section -->
    <div class="price-category">
        <div class="category-label">BREAD</div>
        <div class="price-grid">
            <div class="price-card card-bread">
                <div class="product-emoji">üçû</div>
                <div class="product-title">Great Value White</div>
                <div class="product-size">20 oz ‚Ä¢ ~11 sandwiches</div>
                <div class="product-price">$1.48</div>
                <div class="price-note">~$0.13/sandwich</div>
            </div>

            <div class="price-card card-bread">
                <div class="product-emoji">üçû</div>
                <div class="product-title">Kroger White Sandwich</div>
                <div class="product-size">20 oz ‚Ä¢ ~11 sandwiches</div>
                <div class="product-price">$1.00‚Äì$1.99</div>
                <div class="price-note">~$0.09‚Äì$0.18/sandwich</div>
            </div>

            <div class="price-card card-bread">
                <div class="product-emoji">üçû</div>
                <div class="product-title">Wonder Bread Classic White</div>
                <div class="product-size">20 oz ‚Ä¢ ~10 sandwiches</div>
                <div class="product-price">$2.47‚Äì$4.79</div>
                <div class="price-note">~$0.25‚Äì$0.48/sandwich</div>
            </div>

            <div class="price-card card-bread">
                <div class="product-emoji">üçû</div>
                <div class="product-title">Wonder Bread Giant White</div>
                <div class="product-size">24 oz ‚Ä¢ ~11 sandwiches</div>
                <div class="product-price">$3.99‚Äì$5.29</div>
                <div class="price-note">~$0.36‚Äì$0.48/sandwich</div>
            </div>

            <div class="price-card card-bread">
                <div class="product-emoji">üçû</div>
                <div class="product-title">Sara Lee Butter Bread</div>
                <div class="product-size">20 oz ‚Ä¢ ~10 sandwiches</div>
                <div class="product-price">$2.98‚Äì$3.29</div>
                <div class="price-note">~$0.30‚Äì$0.33/sandwich</div>
            </div>

            <div class="price-card card-bread">
                <div class="product-emoji">üçû</div>
                <div class="product-title">Sara Lee Classic White</div>
                <div class="product-size">20 oz ‚Ä¢ ~10 sandwiches</div>
                <div class="product-price">$3.48‚Äì$4.49</div>
                <div class="price-note">~$0.35‚Äì$0.45/sandwich</div>
            </div>

        </div>
    </div>

    <!-- Supplies Section -->
    <div class="price-category">
        <div class="category-label">SUPPLIES</div>
        <div class="price-grid">
            <div class="price-card card-supplies">
                <div class="product-emoji">üì¶</div>
                <div class="product-title">Sandwich Bags</div>
                <div class="product-size">480 count</div>
                <div class="product-price">$7.99</div>
                <div class="price-note">~$0.02/bag</div>
            </div>
        </div>
    </div>
    
    <div class="cheese-guide">
        <div class="cheese-do">
            <strong>‚úÖ Right Cheese</strong>
            Deli-style sliced American cheese (NOT individually wrapped)
        </div>
        <div class="cheese-dont">
            <strong>‚ùå Wrong Cheese</strong>
            Kraft singles or any individually plastic-wrapped slices ‚Äî they're "cheese product" (not real cheese), a pain to unwrap, and turn into a gross mess on sandwiches
        </div>
    </div>
</div>
    <!-- Collapsible Ingredient Price Summary moved to very bottom -->
        
        <!-- Move Quick Reference section below calculator -->
        <div class="section">
            <h2>üéØ Quick Reference: Popular Quantities</h2>
            <p style="color: #64748b; font-size: 0.95em; margin-bottom: 16px;">Quantities based on common package sizes (~24 slices cheese, ~30-32 slices meat). Use the calculator above for exact costs with your chosen brands.</p>
            <div class="quick-ref">
                <div class="ref-card">
                    <div style="font-size: 2.5em; margin-bottom: 15px;">üè†</div>
                    <h3>40</h3>
                    <div class="cost-display">
                        <div class="cost-item">~4-5 meat packages</div>
                        <div class="cost-item">~4 cheese packages</div>
                        <div class="cost-item">~2 bread loaves</div>
                    </div>
                </div>
                <div class="ref-card">
                    <div style="font-size: 2.5em; margin-bottom: 15px;">üè¢</div>
                    <h3>80</h3>
                    <div class="cost-display">
                        <div class="cost-item">~8-10 meat packages</div>
                        <div class="cost-item">~7 cheese packages</div>
                        <div class="cost-item">~4 bread loaves</div>
                    </div>
                </div>
                <div class="ref-card">
                    <div style="font-size: 2.5em; margin-bottom: 15px;">üè´</div>
                    <h3>120</h3>
                    <div class="cost-display">
                        <div class="cost-item">~12-15 meat packages</div>
                        <div class="cost-item">~10 cheese packages</div>
                        <div class="cost-item">~6 bread loaves</div>
                    </div>
                </div>
                <div class="ref-card">
                    <div style="font-size: 2.5em; margin-bottom: 15px;">üé™</div>
                    <h3>200</h3>
                    <div class="cost-display">
                        <div class="cost-item">~20-25 meat packages</div>
                        <div class="cost-item">~17 cheese packages</div>
                        <div class="cost-item">~10 bread loaves</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="section" id="recipe">
            <h2>ü•™ Perfect Sandwich Recipe</h2>
            <div class="recipe-card">
                <h3>Every Sandwich Contains</h3>
                <div class="recipe-ingredients">
                    <div class="ingredient">
                        <span class="amount">2</span><span class="item">slices bread (no heels)</span>
                    </div>
                    <div class="ingredient">
                        <span class="amount">2</span><span class="item">slices cheese (one per bread slice)</span>
                    </div>
                    <div class="ingredient">
                        <span class="amount">2-3</span><span class="item">slices deli meat (turkey or ham)</span>
                    </div>
                    <div class="ingredient">
                        <span class="amount">1</span><span class="item">zip-lock sandwich bag</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="safety-banner">
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; text-align: left;">
                <div>üõ°Ô∏è <strong>Keep ingredients refrigerated</strong></div>
                <div>üß§ <strong>Please use gloves & hair ties + hair/beard nets</strong></div>
                <div>üì¶ <strong>Remove only 1 package of meat at a time</strong></div>
                <div>‚ùÑÔ∏è <strong>Return completed loaves immediately</strong></div>
            </div>
        </div>

        <div class="section" id="food-safety">
            <h2>üõ°Ô∏è Food Safety Requirements</h2>
            <div class="tips-grid">
                <div class="tip-card">
                    <h3>üß§ Personal Hygiene</h3>
                    <ul>
                        <li>Wash hands with soap and warm water</li>
                        <li>Wear disposable gloves (required)</li>
                        <li>Change gloves if touching non-food items</li>
                        <li>Use hair ties or nets for long hair</li>
                        <li>Use beard nets if applicable</li>
                        <li>Clean and cover all prep surfaces</li>
                    </ul>
                </div>
                
                <div class="tip-card">
                    <h3>‚ùÑÔ∏è Temperature Control</h3>
                    <ul>
                        <li>Keep all ingredients at 40¬∞F or below</li>
                        <li>Never leave ingredients at 80¬∞F or above</li>
                        <li>Remove only 1 package of meat at a time from fridge</li>
                        <li>Return completed loaves immediately</li>
                        <li>Never put warm sandwiches in coolers</li>
                    </ul>
                </div>
                
                <div class="tip-card">
                    <h3>üì¶ Ingredient Standards</h3>
                    <ul>
                        <li>Use same quality you'd feed your family</li>
                        <li>Pre-packaged deli meat only (no deli counter)</li>
                        <li>Check expiration: 10+ days after purchase</li>
                        <li>Keep nut products away from deli area</li>
                        <li>When in doubt, throw it out!</li>
                    </ul>
                </div>
                
                <div class="tip-card">
                    <h3>üöö Transport Safety</h3>
                    <ul>
                        <li>Cool sandwiches in freezer 20-30 minutes before packing</li>
                        <li>Ensure coolers are cool before loading (not hot from garage)</li>
                        <li>Use ice packs - enough to touch every loaf of sandwiches</li>
                        <li>Fill coolers completely (no air circulation)</li>
                        <li>Once packed, do NOT open cooler - it will rapidly heat up</li>
                        <li>Transport directly to host locations</li>
                    </ul>
                </div>
            </div>
            
            <div class="safety-banner" style="margin-top: 30px;">
                ‚ö†Ô∏è REMEMBER: Recipients may be children, elderly, or immunocompromised. Food safety protects our most vulnerable community members.
            </div>
        </div>
        
        <div class="section">
            <h2>üí° Planning Tips</h2>
            <div class="tips-grid">
                <div class="tip-card">
                    <h3>‚è±Ô∏è Timing Guidelines (+20 min for setup/cleanup)</h3>
                    <ul>
                        <li>Small (50‚Äì100 sandwiches, 3‚Äì5 adults): 45‚Äì90 minutes</li>
                        <li>Medium (200‚Äì300 sandwiches, 5‚Äì8 adults): 1.5‚Äì2.5 hours</li>
                        <li>Large (500+ sandwiches, 10‚Äì20 adults): 2‚Äì4 hours</li>
                        <li>Solo/pair events: plan ~25 sandwiches per adult per hour</li>
                    </ul>
                </div>
                
                <div class="tip-card">
                    <h3>‚ùÑÔ∏è Storage & Transport</h3>
                    <ul>
                        <li>~100 sandwiches per large cooler</li>
                        <li>Plan 2-3 hours ingredient storage</li>
                        <li>Use your own coolers with ice packs</li>
                        <li>Never put warm sandwiches in coolers</li>
                        <li>Once packed, don't open cooler during transport</li>
                    </ul>
                </div>
                
                <div class="tip-card">
                    <h3>‚úÖ Quality Standards</h3>
                    <ul>
                        <li>Same quality you'd serve family</li>
                        <li>10+ days until expiration</li>
                        <li>Pre-packaged deli meat only</li>
                        <li>Add 5-10% buffer for extras</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Clean product names for grid display (strip emoji, parenthetical details, per-slice pricing)
        function cleanName(name) {
            return name.replace(/^[^\w]*/, '').replace(/\s*\(.*$/, '').replace(/\s*-\s*\$[\d.]+\/slice$/, '').trim();
        }

        function calculateNeeds() {
            const bySandwiches = document.getElementById('planBySandwiches').checked;
            let sandwichCount;
            const meatSelect = document.getElementById('meatType');
            const cheeseSelect = document.getElementById('cheeseType');
            const breadSelect = document.getElementById('breadType');
            const meatType = meatSelect.value;
            const cheeseType = cheeseSelect.value;
            const breadType = breadSelect.value;
            const meatName = meatSelect.options[meatSelect.selectedIndex].text;
            const cheeseName = cheeseSelect.options[cheeseSelect.selectedIndex].text;
            const breadName = breadSelect.options[breadSelect.selectedIndex].text;
            const meatGridName = cleanName(meatName);
            const cheeseGridName = cleanName(cheeseName);
            const breadGridName = cleanName(breadName);
            const meatAmount = parseFloat(document.getElementById('meatAmount').value);

            // Ingredient constants (oz-based for accurate package calculation)
            const meatOzPerSandwich = meatAmount; // 2, 2.5, or 3 oz per sandwich (user selected)
            const cheesePerSandwich = 2; // 2 slices per sandwich

            // Package sizes and prices (meatPackageWeightOz = total oz in one purchase unit)
            let meatPackageWeightOz, meatPrice, meatDescription;
            switch(meatType) {
                case 'turkey':
                    meatPackageWeightOz = 40; // 2-pack (~20 oz per pack)
                    meatPrice = 13.99;
                    meatDescription = '2-packs (~40 oz total)';
                    break;
                case 'ham':
                    meatPackageWeightOz = 48; // 2-pack (~24 oz per pack)
                    meatPrice = 9.89;
                    meatDescription = '2-packs (~48 oz total)';
                    break;
                case 'publix-turkey':
                    meatPackageWeightOz = 16; // 16 oz package
                    meatPrice = 7.07;
                    meatDescription = '16 oz packages';
                    break;
                case 'land-o-frost-turkey':
                    meatPackageWeightOz = 16; // 16 oz package
                    meatPrice = 9.53;
                    meatDescription = '16 oz packages';
                    break;
                case 'hillshire-turkey':
                    meatPackageWeightOz = 9; // 9 oz package
                    meatPrice = 6.07;
                    meatDescription = '9 oz packages';
                    break;
                case 'kroger-turkey-regular':
                    meatPackageWeightOz = 8; // 8 oz package
                    meatPrice = 6.49;
                    meatDescription = '8 oz packages';
                    break;
                case 'kroger-turkey-thin':
                    meatPackageWeightOz = 9; // 9 oz package
                    meatPrice = 3.99;
                    meatDescription = '9 oz packages';
                    break;
                case 'kroger-chicken-thin':
                    meatPackageWeightOz = 9; // 9 oz package
                    meatPrice = 3.50;
                    meatDescription = '9 oz packages';
                    break;
                case 'kroger-turkey-family':
                    meatPackageWeightOz = 16; // 1 lb = 16 oz package
                    meatPrice = 4.39;
                    meatDescription = '1 lb (16 oz) packages';
                    break;
                case 'oscar-mayer-chicken-blackened':
                    meatPackageWeightOz = 8; // 8 oz package
                    meatPrice = 4.49;
                    meatDescription = '8 oz packages';
                    break;
                case 'oscar-mayer-chicken-rotisserie':
                    meatPackageWeightOz = 16; // 16 oz package
                    meatPrice = 7.99;
                    meatDescription = '16 oz packages';
                    break;
                default:
                    meatPackageWeightOz = 40;
                    meatPrice = 13.99;
                    meatDescription = 'packages';
            }
            const bagPrice = 7.99;
            let cheesePerPackage, cheesePrice, cheeseDescription;
            switch(cheeseType) {
                // American Cheese options
                case 'great-value-american':
                    cheesePerPackage = 24;
                    cheesePrice = 3.98;
                    cheeseDescription = '24 slices each';
                    break;
                case 'kroger-american':
                    cheesePerPackage = 24;
                    cheesePrice = 4.29;
                    cheeseDescription = '24 slices each';
                    break;
                case 'sargento-american':
                    cheesePerPackage = 22;
                    cheesePrice = 4.99;
                    cheeseDescription = '22 slices each';
                    break;
                case 'land-o-lakes-american':
                    cheesePerPackage = 24;
                    cheesePrice = 6.49;
                    cheeseDescription = '24 slices each';
                    break;
                case 'boars-head-american':
                    cheesePerPackage = 24;
                    cheesePrice = 8.99;
                    cheeseDescription = '24 slices each';
                    break;
                default:
                    cheesePerPackage = 24;
                    cheesePrice = 3.98;
                    cheeseDescription = '24 slices each';
            }
            let breadSandwichesPerPackage, breadDescription, breadPrice;
            switch(breadType) {
                case 'great-value-white':
                    breadSandwichesPerPackage = 11;
                    breadDescription = 'loaves (~11 sandwiches each)';
                    breadPrice = 1.48;
                    break;
                case 'kroger-white':
                    breadSandwichesPerPackage = 11;
                    breadDescription = 'loaves (~11 sandwiches each)';
                    breadPrice = 1.50;
                    break;
                case 'wonder-classic':
                    breadSandwichesPerPackage = 10;
                    breadDescription = 'loaves (~10 sandwiches each)';
                    breadPrice = 3.63;
                    break;
                case 'wonder-giant':
                    breadSandwichesPerPackage = 11;
                    breadDescription = 'loaves (~11 sandwiches each)';
                    breadPrice = 4.64;
                    break;
                case 'sara-lee-butter':
                    breadSandwichesPerPackage = 10;
                    breadDescription = 'loaves (~10 sandwiches each)';
                    breadPrice = 3.14;
                    break;
                case 'sara-lee-classic':
                    breadSandwichesPerPackage = 10;
                    breadDescription = 'loaves (~10 sandwiches each)';
                    breadPrice = 3.99;
                    break;
                default:
                    breadSandwichesPerPackage = 11;
                    breadDescription = 'loaves';
                    breadPrice = 1.48;
            }

            // Validation for ingredient selections
            if (!meatType) {
                alert('Please select a meat type');
                return;
            }
            if (!cheeseType) {
                alert('Please select a cheese type');
                return;
            }
            if (!breadType) {
                alert('Please select a bread type');
                return;
            }

            if (bySandwiches) {
                sandwichCount = parseInt(document.getElementById('sandwichCount').value);
                if (!sandwichCount || sandwichCount <= 0) {
                    alert('Please enter a valid number of sandwiches');
                    return;
                }
            } else {
                const budget = parseFloat(document.getElementById('budgetAmount').value);
                if (!budget) {
                    alert('Please enter a budget amount');
                    return;
                }
                // Estimate max sandwiches for this budget
                // Cost per sandwich = (meat + cheese + bread + bag) per sandwich
                const meatCostPerSandwich = meatPrice / (meatPackageWeightOz / meatOzPerSandwich);
                const cheeseCostPerSandwich = cheesePrice / (cheesePerPackage / cheesePerSandwich);
                const breadCostPerSandwich = breadPrice / breadSandwichesPerPackage;
                const bagCostPerSandwich = bagPrice / 480;
                const totalCostPerSandwich = meatCostPerSandwich + cheeseCostPerSandwich + breadCostPerSandwich + bagCostPerSandwich;
                sandwichCount = Math.floor(budget / totalCostPerSandwich);
                if (sandwichCount < 1) {
                    alert('Budget too low for even 1 sandwich with selected ingredients.');
                    return;
                }
                
            }


            // Calculate packages needed (oz-based for accurate meat package calculation)
            let meatPackages, cheesePackages, breadPackages, bagPackages;
            let meatCost, cheeseCost, breadCost, bagCost, totalCost;
            
            // For budget mode, we need to ensure we stay within budget
            if (!bySandwiches) {
                const budget = parseFloat(document.getElementById('budgetAmount').value);
                
                // Use binary search to find the optimal sandwich count within budget
                let low = 1;
                let high = Math.floor(budget / 0.50); // Assume minimum $0.50 per sandwich
                let bestSandwichCount = 1;
                
                while (low <= high) {
                    let mid = Math.floor((low + high) / 2);
                    
                    meatPackages = Math.ceil((mid * meatOzPerSandwich) / meatPackageWeightOz);
                    cheesePackages = Math.ceil((mid * cheesePerSandwich) / cheesePerPackage);
                    breadPackages = Math.ceil(mid / breadSandwichesPerPackage);
                    bagPackages = Math.ceil(mid / 480);
                    
                    meatCost = meatPackages * meatPrice;
                    cheeseCost = cheesePackages * cheesePrice;
                    breadCost = breadPackages * breadPrice;
                    bagCost = bagPackages * bagPrice;
                    totalCost = Math.round(meatCost + cheeseCost + breadCost + bagCost);
                    
                    if (totalCost <= budget) {
                        bestSandwichCount = mid;
                        low = mid + 1;
                    } else {
                        high = mid - 1;
                    }
                }
                
                sandwichCount = bestSandwichCount;
                
                // Recalculate final costs with the adjusted count
                meatPackages = Math.ceil((sandwichCount * meatOzPerSandwich) / meatPackageWeightOz);
                cheesePackages = Math.ceil((sandwichCount * cheesePerSandwich) / cheesePerPackage);
                breadPackages = Math.ceil(sandwichCount / breadSandwichesPerPackage);
                bagPackages = Math.ceil(sandwichCount / 480);
                
                meatCost = meatPackages * meatPrice;
                cheeseCost = cheesePackages * cheesePrice;
                breadCost = breadPackages * breadPrice;
                bagCost = bagPackages * bagPrice;
                totalCost = Math.round((meatCost + cheeseCost + breadCost + bagCost) * 100) / 100;
            } else {
                // For sandwich count mode, use oz-based calculation
                meatPackages = Math.ceil((sandwichCount * meatOzPerSandwich) / meatPackageWeightOz);
                cheesePackages = Math.ceil((sandwichCount * cheesePerSandwich) / cheesePerPackage);
                breadPackages = Math.ceil(sandwichCount / breadSandwichesPerPackage);
                bagPackages = Math.ceil(sandwichCount / 480);

                meatCost = meatPackages * meatPrice;
                cheeseCost = cheesePackages * cheesePrice;
                breadCost = breadPackages * breadPrice;
                bagCost = bagPackages * bagPrice;
                totalCost = Math.round((meatCost + cheeseCost + breadCost + bagCost) * 100) / 100;
            }
            const coolersNeeded = Math.ceil(sandwichCount / 100);
            const estimatedLoaves = Math.ceil(sandwichCount / 20);
            const icePacksNeeded = Math.max(estimatedLoaves, coolersNeeded * 4);

            // Calculate excess ingredients (oz-based for meat)
            const meatNeeded = sandwichCount * meatOzPerSandwich;
            const cheeseNeeded = sandwichCount * cheesePerSandwich;
            const breadNeeded = sandwichCount;
            
            const meatProvided = meatPackages * meatPackageWeightOz;
            const cheeseProvided = cheesePackages * cheesePerPackage;
            const breadProvided = breadPackages * breadSandwichesPerPackage;
            
            // Calculate actual possible extra sandwiches (limited by the scarcest ingredient)
            const meatExcess = meatProvided - meatNeeded;
            const cheeseExcess = cheeseProvided - cheeseNeeded;
            const breadExcess = breadProvided - breadNeeded;
            
            const possibleExtraFromMeat = Math.floor(meatExcess / meatOzPerSandwich);
            const possibleExtraFromCheese = Math.floor(cheeseExcess / cheesePerSandwich);
            const possibleExtraFromBread = Math.floor(breadExcess / 2); // 2 slices bread per sandwich
            
            const actualExtraSandwiches = Math.min(possibleExtraFromMeat, possibleExtraFromCheese, possibleExtraFromBread);
            
            // For budget mode, update the total sandwich count to include extra sandwiches
            let totalSandwichesPossible = sandwichCount;
            if (!bySandwiches && actualExtraSandwiches > 0) {
                totalSandwichesPossible = sandwichCount + actualExtraSandwiches;
            }

            // Create the result grid with budget status
            let budgetStatusMessage = '';
            if (!bySandwiches) {
                const budget = parseFloat(document.getElementById('budgetAmount').value);
                const remaining = budget - totalCost;
                const savingsPercent = Math.round((remaining / budget) * 100);
                
                // Add warning for tight budgets
                let tightBudgetWarning = '';
                if (budget <= 50) {
                    tightBudgetWarning = `
                        <p style="color: #E65100; margin-top: 12px; font-size: 1em; font-weight: 600;">
                            ‚ö†Ô∏è Note: Budgets under $50 are quite tight and yield limited quantities. Consider increasing your budget for better value and more sandwiches.
                        </p>
                    `;
                }
                
                if (remaining > 5) { // More than $5 remaining
                    budgetStatusMessage = `
                        <div style="background: rgba(76,175,80,0.15); border: 3px solid #4CAF50; border-radius: 12px; padding: 20px; margin-bottom: 25px; text-align: center;">
                            <div style="font-size: 2em; margin-bottom: 12px;">‚úÖ</div>
                            <h4 style="color: #2E7D32; margin-bottom: 12px; font-size: 1.4em; font-weight: 700;">Optimal Budget Planning!</h4>
                            <p style="color: #1B5E20; margin: 0; font-size: 1.2em; font-weight: 500;">
                                <strong>${totalSandwichesPossible} sandwiches</strong> for <strong>$${totalCost.toFixed(2)}</strong> | 
                                Remaining budget: <strong>$${remaining}</strong> (${savingsPercent}% under budget)
                            </p>
                            <p style="color: #2E7D32; font-size: 1em; margin: 12px 0 0 0; font-weight: 400;">
                                This is the maximum number of sandwiches you can make within your $${budget} budget with your selected ingredients.
                            </p>
                            ${tightBudgetWarning}
                        </div>
                    `;
                } else if (remaining > 0) { // Small amount remaining
                    budgetStatusMessage = `
                        <div style="background: rgba(255,152,0,0.2); border: 3px solid #FF9800; border-radius: 12px; padding: 20px; margin-bottom: 25px; text-align: center;">
                            <div style="font-size: 2em; margin-bottom: 12px;">‚ö†Ô∏è</div>
                            <h4 style="color: #E65100; margin-bottom: 12px; font-size: 1.4em; font-weight: 700;">Budget Optimized!</h4>
                            <p style="color: #BF360C; margin: 0; font-size: 1.2em; font-weight: 500;">
                                <strong>${totalSandwichesPossible} sandwiches</strong> for <strong>$${totalCost.toFixed(2)}</strong> | 
                                Only <strong>$${remaining}</strong> remaining (${savingsPercent}% under budget)
                            </p>
                            <p style="color: #E65100; font-size: 1em; margin: 12px 0 0 0; font-weight: 400;">
                                This maximizes your sandwich count within your $${budget} budget.
                            </p>
                            ${tightBudgetWarning}
                        </div>
                    `;
                } else { // Exactly at budget
                    budgetStatusMessage = `
                        <div style="background: rgba(76,175,80,0.15); border: 3px solid #4CAF50; border-radius: 12px; padding: 20px; margin-bottom: 25px; text-align: center;">
                            <div style="font-size: 2em; margin-bottom: 12px;">üéØ</div>
                            <h4 style="color: #2E7D32; margin-bottom: 12px; font-size: 1.4em; font-weight: 700;">Perfect Budget Match!</h4>
                            <p style="color: #1B5E20; margin: 0; font-size: 1.2em; font-weight: 500;">
                                <strong>${totalSandwichesPossible} sandwiches</strong> for exactly <strong>$${totalCost.toFixed(2)}</strong> | 
                                Uses your entire $${budget} budget
                            </p>
                            <p style="color: #2E7D32; font-size: 1em; margin: 12px 0 0 0; font-weight: 400;">
                                This is the maximum number of sandwiches you can make with your selected ingredients and budget.
                            </p>
                            ${tightBudgetWarning}
                        </div>
                    `;
                }
            }
            
            // No longer showing excess ingredient details to maintain trust and professionalism

            const costPerSandwich = (totalCost / sandwichCount).toFixed(2);

            document.getElementById('calcResult').innerHTML = `
                ${budgetStatusMessage}
                <div class="result-summary">
                    <h3>Your Shopping List</h3>
                    <div class="total-sandwiches">${sandwichCount} Sandwiches</div>
                    <div class="total-cost">Estimated total: $${totalCost.toFixed(2)}</div>
                </div>
                <div class="package-grid">
                    <div class="package-tile">
                        <div class="pkg-label">Meat</div>
                        <div class="pkg-count">${meatPackages}</div>
                        <div class="pkg-product">${meatGridName}</div>
                    </div>
                    <div class="package-tile">
                        <div class="pkg-label">Cheese</div>
                        <div class="pkg-count">${cheesePackages}</div>
                        <div class="pkg-product">${cheeseGridName}</div>
                    </div>
                    <div class="package-tile">
                        <div class="pkg-label">Bread</div>
                        <div class="pkg-count">${breadPackages}</div>
                        <div class="pkg-product">${breadGridName}</div>
                    </div>
                </div>
                <ul class="shopping-receipt">
                    <li class="section-label">Meat</li>
                    <li>
                        <input type="checkbox">
                        <div class="item-details">
                            <div class="item-name">${meatPackages} √ó ${meatName}</div>
                            <div class="item-meta">${meatDescription}</div>
                        </div>
                        <div class="item-price">$${meatCost.toFixed(2)}</div>
                    </li>
                    <li class="section-label">Cheese</li>
                    <li>
                        <input type="checkbox">
                        <div class="item-details">
                            <div class="item-name">${cheesePackages} √ó ${cheeseName}</div>
                            <div class="item-meta">${cheeseDescription}</div>
                        </div>
                        <div class="item-price">$${cheeseCost.toFixed(2)}</div>
                    </li>
                    <li class="section-label">Bread</li>
                    <li>
                        <input type="checkbox">
                        <div class="item-details">
                            <div class="item-name">${breadPackages} √ó ${breadName}</div>
                            <div class="item-meta">${breadDescription}</div>
                        </div>
                        <div class="item-price">$${breadCost.toFixed(2)}</div>
                    </li>
                    <li>
                        <input type="checkbox">
                        <div class="item-details">
                            <div class="item-name">${bagPackages} √ó Zip-lock sandwich bags</div>
                            <div class="item-meta">480 count boxes</div>
                        </div>
                        <div class="item-price">$${bagCost.toFixed(2)}</div>
                    </li>
                </ul>
                <div class="receipt-total">
                    <span>Estimated Ingredient Total</span>
                    <span>$${totalCost.toFixed(2)}</span>
                </div>
                <div class="per-sandwich-cost">
                    ‚âà $${costPerSandwich} per sandwich
                </div>
                <div class="pricing-note">
                    Includes meat, cheese, bread, and sandwich bags only. Supplies listed below are not included in this estimate. All prices are estimates based on recent retail pricing and may vary by store and location. Bread prices use the midpoint of the listed price range.
                </div>
                <ul class="shopping-receipt">
                    <li class="section-label">Supplies (not included in total)</li>
                    <li>
                        <input type="checkbox">
                        <div class="item-details">
                            <div class="item-name">${icePacksNeeded} √ó Ice packs</div>
                            <div class="item-meta">Enough to touch every loaf</div>
                        </div>
                    </li>
                    <li>
                        <input type="checkbox">
                        <div class="item-details">
                            <div class="item-name">Food-safe disposable gloves</div>
                            <div class="item-meta">Multiple boxes</div>
                        </div>
                    </li>
                    <li>
                        <input type="checkbox">
                        <div class="item-details">
                            <div class="item-name">Hair ties/nets and beard nets</div>
                        </div>
                    </li>
                    <li>
                        <input type="checkbox">
                        <div class="item-details">
                            <div class="item-name">Hand soap</div>
                        </div>
                    </li>
                    <li>
                        <input type="checkbox">
                        <div class="item-details">
                            <div class="item-name">Paper towels for cleanup</div>
                        </div>
                    </li>
                    <li>
                        <input type="checkbox">
                        <div class="item-details">
                            <div class="item-name">Disinfecting wipes for surfaces</div>
                        </div>
                    </li>
                </ul>
            `;

            document.getElementById('calcResult').style.display = 'block';
            document.getElementById('exportButton').style.display = 'block';
        }
        
        function generatePDF() {
            // Get form data
            const sandwichCount = document.getElementById('sandwichCount').value;
            const meatType = document.getElementById('meatType');
            const cheeseType = document.getElementById('cheeseType');
            const breadType = document.getElementById('breadType');
            
            const meatText = meatType.options[meatType.selectedIndex].text;
            const cheeseText = cheeseType.options[cheeseType.selectedIndex].text;
            const breadText = breadType.options[breadType.selectedIndex].text;
            
            // Calculate the results (same logic as in calculateNeeds)
            const meatOzPerSandwich = parseFloat(document.getElementById('meatAmount').value) || 2.5;
            const cheesePerSandwich = 2;
            let meatPackageWeightOz, meatPrice;
            switch(meatType.value) {
                case 'turkey':
                    meatPackageWeightOz = 40;
                    meatPrice = 13.99;
                    break;
                case 'ham':
                    meatPackageWeightOz = 48;
                    meatPrice = 9.89;
                    break;
                case 'publix-turkey':
                    meatPackageWeightOz = 16;
                    meatPrice = 7.07;
                    break;
                case 'land-o-frost-turkey':
                    meatPackageWeightOz = 16;
                    meatPrice = 9.53;
                    break;
                case 'hillshire-turkey':
                    meatPackageWeightOz = 9;
                    meatPrice = 6.07;
                    break;
                case 'kroger-turkey-regular':
                    meatPackageWeightOz = 8;
                    meatPrice = 6.49;
                    break;
                case 'kroger-turkey-thin':
                    meatPackageWeightOz = 9;
                    meatPrice = 3.99;
                    break;
                case 'kroger-chicken-thin':
                    meatPackageWeightOz = 9;
                    meatPrice = 3.50;
                    break;
                case 'kroger-turkey-family':
                    meatPackageWeightOz = 16;
                    meatPrice = 4.39;
                    break;
                case 'oscar-mayer-chicken-blackened':
                    meatPackageWeightOz = 8;
                    meatPrice = 4.49;
                    break;
                case 'oscar-mayer-chicken-rotisserie':
                    meatPackageWeightOz = 16;
                    meatPrice = 7.99;
                    break;
                default:
                    meatPackageWeightOz = 40;
                    meatPrice = 13.99;
            }
            
            let cheesePerPackage, cheesePrice;
            switch(cheeseType.value) {
                // American Cheese options
                case 'great-value-american':
                    cheesePerPackage = 24;
                    cheesePrice = 3.98;
                    break;
                case 'kroger-american':
                    cheesePerPackage = 24;
                    cheesePrice = 4.29;
                    break;
                case 'sargento-american':
                    cheesePerPackage = 22;
                    cheesePrice = 4.99;
                    break;
                case 'land-o-lakes-american':
                    cheesePerPackage = 24;
                    cheesePrice = 6.49;
                    break;
                case 'boars-head-american':
                    cheesePerPackage = 24;
                    cheesePrice = 8.99;
                    break;
                default:
                    cheesePerPackage = 24;
                    cheesePrice = 3.98;
            }
            
            let breadSandwichesPerPackage, breadPrice;
            switch(breadType.value) {
                case 'great-value-white':
                    breadSandwichesPerPackage = 11;
                    breadPrice = 1.48;
                    break;
                case 'kroger-white':
                    breadSandwichesPerPackage = 11;
                    breadPrice = 1.50;
                    break;
                case 'wonder-classic':
                    breadSandwichesPerPackage = 10;
                    breadPrice = 3.63;
                    break;
                case 'wonder-giant':
                    breadSandwichesPerPackage = 11;
                    breadPrice = 4.64;
                    break;
                case 'sara-lee-butter':
                    breadSandwichesPerPackage = 10;
                    breadPrice = 3.14;
                    break;
                case 'sara-lee-classic':
                    breadSandwichesPerPackage = 10;
                    breadPrice = 3.99;
                    break;
                default:
                    breadSandwichesPerPackage = 11;
                    breadPrice = 1.48;
            }
            
            const meatPackages = Math.ceil((sandwichCount * meatOzPerSandwich) / meatPackageWeightOz);
            const cheesePackages = Math.ceil((sandwichCount * cheesePerSandwich) / cheesePerPackage);
            const breadPackages = Math.ceil(sandwichCount / breadSandwichesPerPackage);
            
            // meatPrice already defined above in the switch statement
            const bagPrice = 7.99;
            
            const meatCost = meatPackages * meatPrice;
            const cheeseCost = cheesePackages * cheesePrice;
            const breadCost = breadPackages * breadPrice;
            const bagCost = Math.ceil(sandwichCount / 480) * bagPrice;
            const totalCost = Math.round((meatCost + cheeseCost + breadCost + bagCost) * 100) / 100;
            const coolersNeeded = Math.ceil(sandwichCount / 100);
            
            // Create printable content
            const date = new Date().toLocaleDateString();
            const printContent = `
                <div class="pdf-content">
                    <div class="pdf-header">
                        <h1>ü•™ TSP Sandwich Planning Guide</h1>
                        <h2>Shopping List & Budget Report</h2>
                        <p>Generated: ${date}</p>
                    </div>
                    
                    <div class="pdf-section">
                        <h3>Order Summary</h3>
                        <p><strong>Number of sandwiches:</strong> ${sandwichCount}</p>
                        <p><strong>Meat type:</strong> ${meatText}</p>
                        <p><strong>Cheese type:</strong> ${cheeseText}</p>
                        <p><strong>Bread type:</strong> ${breadText}</p>
                    </div>
                    
                    <div class="pdf-section">
                        <h3>Budget Summary</h3>
                        <div class="pdf-grid">
                            <div>
                                <p><strong>Meat packages needed:</strong> ${meatPackages}</p>
                                <p><strong>Cheese packages needed:</strong> ${cheesePackages}</p>
                                <p><strong>Bread packages needed:</strong> ${breadPackages}</p>
                            </div>
                            <div>
                                <p style="font-size: 18px; font-weight: bold; color: #236383;">
                                    Total estimated cost: $${totalCost.toFixed(2)}
                                </p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="pdf-section">
                        <h3>Shopping Checklist</h3>
                        <ul class="pdf-checklist">
                            <li>‚òê ${meatPackages} √ó ${meatText.replace('ü¶É ', '').replace('üê∑ ', '')}</li>
                            <li>‚òê ${cheesePackages} √ó ${cheeseText.replace('üßÄ ', '').split(' (')[0]} cheese slices</li>
                            <li>‚òê ${breadPackages} √ó ${breadText.replace('üçû ', '').split(' (')[0]}</li>
                            <li>‚òê ${Math.ceil(sandwichCount / 480)} √ó Zip-lock sandwich bags (480 count)</li>
                            <li>‚òê ${Math.max(Math.ceil(sandwichCount / 20), 4)} √ó Ice packs (enough to touch every loaf)</li>
                            <li>‚òê Food-safe disposable gloves (multiple boxes)</li>
                            <li>‚òê Hair ties/nets and beard nets</li>
                            <li>‚òê Hand soap</li>
                            <li>‚òê Paper towels for cleanup</li>
                            <li>‚òê Disinfecting wipes for surfaces</li>
                        </ul>
                    </div>
                    
                    <div class="pdf-section">
                        <h3>Food Safety Reminders</h3>
                        <ul class="pdf-checklist">
                            <li>‚Ä¢ Keep all ingredients refrigerated at 40¬∞F or below</li>
                            <li>‚Ä¢ Use disposable gloves and hair/beard nets</li>
                            <li>‚Ä¢ Remove only 1 package of meat at a time from fridge</li>
                            <li>‚Ä¢ Cool sandwiches in freezer 20-30 minutes before packing</li>
                            <li>‚Ä¢ Never put warm sandwiches in coolers</li>
                        </ul>
                    </div>
                </div>
            `;
            
            // Create a temporary element with the content
            const originalContent = document.body.innerHTML;
            document.body.innerHTML = printContent;
            
            // Add a print instruction
            window.alert('A print dialog will open. Please select "Save as PDF" or "Microsoft Print to PDF" as your printer destination to save as a PDF file.');
            
            // Open print dialog
            window.print();
            
            // Restore original content after print dialog closes
            setTimeout(() => {
                document.body.innerHTML = originalContent;
                // Reattach event listeners by recalculating if data is available
                const sandwichCountInput = document.getElementById('sandwichCount');
                if (sandwichCountInput && sandwichCountInput.value) {
                    // Just refresh the page to restore functionality
                    window.location.reload();
                }
            }, 1000);
        }

        function togglePlanMode() {
            const bySandwiches = document.getElementById('planBySandwiches').checked;
            document.getElementById('sandwichCountGroup').style.display = bySandwiches ? '' : 'none';
            document.getElementById('budgetGroup').style.display = bySandwiches ? 'none' : '';
        }

        function togglePBJPlanMode() {
            const bySandwiches = document.getElementById('pbjPlanBySandwiches').checked;
            document.getElementById('pbjCountGroup').style.display = bySandwiches ? '' : 'none';
            document.getElementById('pbjBudgetGroup').style.display = bySandwiches ? 'none' : '';
        }

        function toggleSpatulaQuantity() {
            const checkbox = document.getElementById('includeSpatulas');
            const quantitySection = document.getElementById('spatulaQuantitySection');
            if (checkbox && quantitySection) {
                quantitySection.style.display = checkbox.checked ? 'block' : 'none';
            }
        }

        function calculatePBJ() {
            const isBudgetMode = document.getElementById('pbjPlanByBudget').checked;
            const pbType = document.getElementById('pbType').value;
            const jellyType = document.getElementById('jellyType').value;

            // Constants
            const pbPerSandwich = 3; // 3 tbsp per sandwich
            const jellyPerSandwich = 1.5; // 1.5 tbsp per sandwich
            const breadSlicesPerSandwich = 2;

            // Peanut butter options (1 oz PB = 1.875 tbsp)
            let pbJarSize, pbTbspPerJar, pbJarPrice, pbDescription;
            switch(pbType) {
                case 'jif-40':
                    pbJarSize = 40;
                    pbTbspPerJar = 75;
                    pbJarPrice = 7.99;
                    pbDescription = 'Jif Creamy 40 oz (1.13kg)';
                    break;
                case 'skippy-40':
                    pbJarSize = 40;
                    pbTbspPerJar = 75;
                    pbJarPrice = 7.99;
                    pbDescription = 'Skippy Creamy 40 oz (1.13kg)';
                    break;
                case 'jif-16':
                    pbJarSize = 16;
                    pbTbspPerJar = 30;
                    pbJarPrice = 3.59;
                    pbDescription = 'Jif Creamy 16 oz (454g)';
                    break;
                case 'skippy-16':
                    pbJarSize = 16.3;
                    pbTbspPerJar = 31;
                    pbJarPrice = 3.59;
                    pbDescription = 'Skippy Creamy 16.3 oz (462g)';
                    break;
                default:
                    pbJarSize = 40;
                    pbTbspPerJar = 75;
                    pbJarPrice = 7.99;
                    pbDescription = 'Jif Creamy 40 oz (1.13kg)';
            }

            // Jelly options (1 oz jelly = 1.875 tbsp)
            let jellyJarSize, jellyTbspPerJar, jellyJarPrice, jellyDescription;
            switch(jellyType) {
                case 'smuckers-32':
                    jellyJarSize = 32;
                    jellyTbspPerJar = 60;
                    jellyJarPrice = 4.99;
                    jellyDescription = "Smucker's Concord Grape Jelly 32 oz";
                    break;
                case 'welchs-30':
                    jellyJarSize = 30;
                    jellyTbspPerJar = 56;
                    jellyJarPrice = 3.59;
                    jellyDescription = "Welch's Concord Grape Jelly 30 oz";
                    break;
                case 'smuckers-squeeze-20':
                    jellyJarSize = 20;
                    jellyTbspPerJar = 38;
                    jellyJarPrice = 3.59;
                    jellyDescription = "Smucker's Squeeze Grape Jelly 20 oz";
                    break;
                case 'welchs-squeeze-18':
                    jellyJarSize = 18;
                    jellyTbspPerJar = 34;
                    jellyJarPrice = 3.83;
                    jellyDescription = "Welch's Natural Concord Grape Squeeze 18 oz";
                    break;
                default:
                    jellyJarSize = 32;
                    jellyTbspPerJar = 60;
                    jellyJarPrice = 4.99;
                    jellyDescription = "Smucker's Concord Grape Jelly 32 oz";
            }

            // Bread selection
            const pbjBreadSelect = document.getElementById('pbjBreadType');
            const pbjBreadType = pbjBreadSelect.value;
            const pbjBreadName = pbjBreadSelect.options[pbjBreadSelect.selectedIndex].text;
            const pbjBreadGridName = cleanName(pbjBreadName);
            let usableBreadSlicesPerLoaf, breadPrice;
            switch(pbjBreadType) {
                case 'great-value-white':
                    usableBreadSlicesPerLoaf = 22;
                    breadPrice = 1.48;
                    break;
                case 'kroger-white':
                    usableBreadSlicesPerLoaf = 22;
                    breadPrice = 1.50;
                    break;
                case 'wonder-classic':
                    usableBreadSlicesPerLoaf = 20;
                    breadPrice = 3.63;
                    break;
                case 'wonder-giant':
                    usableBreadSlicesPerLoaf = 22;
                    breadPrice = 4.64;
                    break;
                case 'sara-lee-butter':
                    usableBreadSlicesPerLoaf = 20;
                    breadPrice = 3.14;
                    break;
                case 'sara-lee-classic':
                    usableBreadSlicesPerLoaf = 20;
                    breadPrice = 3.99;
                    break;
                default:
                    usableBreadSlicesPerLoaf = 22;
                    breadPrice = 1.48;
            }
            const bagsPerBox = 480;
            const bagBoxPrice = 7.99;

            let pbjCount;

            if (!pbjBreadType) {
                alert('Please select a bread type');
                return;
            }

            if (isBudgetMode) {
                const budget = parseFloat(document.getElementById('pbjBudgetAmount').value);
                if (!budget || budget <= 0) {
                    alert('Please enter a valid budget amount');
                    return;
                }

                // Calculate cost per sandwich to estimate initial count
                const sandwichesPerPbJar = Math.floor(pbTbspPerJar / pbPerSandwich);
                const sandwichesPerJellyJar = Math.floor(jellyTbspPerJar / jellyPerSandwich);
                const sandwichesPerLoaf = Math.floor(usableBreadSlicesPerLoaf / breadSlicesPerSandwich);

                // Use binary search to find max sandwiches within budget
                let low = 1;
                let high = Math.floor(budget / 0.30); // Assume minimum $0.30 per sandwich
                let optimalCount = 0;

                while (low <= high) {
                    const mid = Math.floor((low + high) / 2);

                    // Calculate costs for this sandwich count
                    const testPbJars = Math.ceil((mid * pbPerSandwich) / pbTbspPerJar);
                    const testJellyJars = Math.ceil((mid * jellyPerSandwich) / jellyTbspPerJar);
                    const testBreadLoaves = Math.ceil((mid * breadSlicesPerSandwich) / usableBreadSlicesPerLoaf);
                    const testBagBoxes = Math.ceil(mid / bagsPerBox);

                    const testCost = (testPbJars * pbJarPrice) + (testJellyJars * jellyJarPrice) +
                                    (testBreadLoaves * breadPrice) + (testBagBoxes * bagBoxPrice);

                    if (testCost <= budget) {
                        optimalCount = mid;
                        low = mid + 1;
                    } else {
                        high = mid - 1;
                    }
                }

                if (optimalCount === 0) {
                    alert('Budget too low for even 1 PB&J sandwich with selected ingredients. Minimum needed is approximately $' +
                          (pbJarPrice + jellyJarPrice + breadPrice + bagBoxPrice).toFixed(2));
                    return;
                }

                pbjCount = optimalCount;
            } else {
                pbjCount = parseInt(document.getElementById('pbjCount').value);
                if (!pbjCount || pbjCount <= 0) {
                    alert('Please enter a valid number of PB&J sandwiches');
                    return;
                }
            }

            // Calculate total needs
            const totalPbTbsp = pbjCount * pbPerSandwich;
            const totalJellyTbsp = pbjCount * jellyPerSandwich;
            const totalBreadSlices = pbjCount * breadSlicesPerSandwich;

            // Calculate jars/packages needed
            const pbJarsNeeded = Math.ceil(totalPbTbsp / pbTbspPerJar);
            const jellyJarsNeeded = Math.ceil(totalJellyTbsp / jellyTbspPerJar);
            const breadLoavesNeeded = Math.ceil(totalBreadSlices / usableBreadSlicesPerLoaf);
            const bagBoxesNeeded = Math.ceil(pbjCount / bagsPerBox);

            // Calculate costs
            const pbCost = pbJarsNeeded * pbJarPrice;
            const jellyCost = jellyJarsNeeded * jellyJarPrice;
            const breadCost = breadLoavesNeeded * breadPrice;
            const bagCost = bagBoxesNeeded * bagBoxPrice;

            // Spatula calculation
            const includeSpatulas = document.getElementById('includeSpatulas').checked;
            const spatulaPackPrice = 5.99;
            const spatulasPerPack = 4;
            const spatulaPackCount = includeSpatulas ? Math.max(1, parseInt(document.getElementById('spatulaPackCount').value) || 1) : 0;
            const spatulaCost = spatulaPackCount * spatulaPackPrice;

            const totalCost = Math.round((pbCost + jellyCost + breadCost + bagCost + spatulaCost) * 100) / 100;

            // Budget status message for budget mode
            let budgetStatusMessage = '';
            if (isBudgetMode) {
                const budget = parseFloat(document.getElementById('pbjBudgetAmount').value);
                const remaining = budget - totalCost;
                const savingsPercent = Math.round((remaining / budget) * 100);

                let tightBudgetWarning = '';
                if (budget <= 30) {
                    tightBudgetWarning = `
                        <div style="margin-top: 12px; padding: 10px; background: rgba(255,193,7,0.2); border-radius: 8px; font-size: 0.95em;">
                            ‚ö†Ô∏è Note: Budgets under $30 are quite tight and yield limited quantities. Consider increasing your budget for better value and more sandwiches.
                        </div>
                    `;
                }

                if (remaining >= budget * 0.1) {
                    budgetStatusMessage = `
                        <div style="margin-top: 20px; padding: 20px; background: rgba(46,125,50,0.25); border-radius: 12px; text-align: center; border: 2px solid rgba(46,125,50,0.4);">
                            <h4 style="color: #2E7D32; margin-bottom: 12px; font-size: 1.4em; font-weight: 700;">‚úÖ Optimal Budget Planning!</h4>
                            <div style="color: #1B5E20; font-size: 1.1em;">
                                Remaining budget: <strong>$${remaining.toFixed(2)}</strong> (${savingsPercent}% under budget)
                            </div>
                            <div style="color: #2E7D32; font-size: 0.95em; margin-top: 8px;">
                                This is the maximum number of PB&J sandwiches you can make within your $${budget.toFixed(2)} budget.
                            </div>
                            ${tightBudgetWarning}
                        </div>
                    `;
                } else if (remaining > 0) {
                    budgetStatusMessage = `
                        <div style="margin-top: 20px; padding: 20px; background: rgba(230,81,0,0.2); border-radius: 12px; text-align: center; border: 2px solid rgba(230,81,0,0.4);">
                            <h4 style="color: #E65100; margin-bottom: 12px; font-size: 1.4em; font-weight: 700;">üìä Budget Optimized!</h4>
                            <div style="color: #BF360C; font-size: 1.1em;">
                                Only <strong>$${remaining.toFixed(2)}</strong> remaining (${savingsPercent}% under budget)
                            </div>
                            <div style="color: #E65100; font-size: 0.95em; margin-top: 8px;">
                                This maximizes your PB&J sandwich count within your $${budget.toFixed(2)} budget.
                            </div>
                            ${tightBudgetWarning}
                        </div>
                    `;
                } else {
                    budgetStatusMessage = `
                        <div style="margin-top: 20px; padding: 20px; background: rgba(46,125,50,0.25); border-radius: 12px; text-align: center; border: 2px solid rgba(46,125,50,0.4);">
                            <h4 style="color: #2E7D32; margin-bottom: 12px; font-size: 1.4em; font-weight: 700;">üéØ Perfect Budget Match!</h4>
                            <div style="color: #1B5E20; font-size: 1.1em;">
                                Uses your entire $${budget.toFixed(2)} budget
                            </div>
                            <div style="color: #2E7D32; font-size: 0.95em; margin-top: 8px;">
                                This is the maximum number of PB&J sandwiches you can make with your budget.
                            </div>
                            ${tightBudgetWarning}
                        </div>
                    `;
                }
            }

            const costPerSandwich = (totalCost / pbjCount).toFixed(2);

            // Display results
            document.getElementById('pbjResult').innerHTML = `
                ${budgetStatusMessage}
                <div class="result-summary">
                    <h3>Your PB&J Shopping List</h3>
                    <div class="total-sandwiches">${pbjCount} PB&J Sandwiches</div>
                    <div class="total-cost">Estimated total: $${totalCost.toFixed(2)}</div>
                </div>
                <div class="package-grid">
                    <div class="package-tile">
                        <div class="pkg-label">Peanut Butter</div>
                        <div class="pkg-count">${pbJarsNeeded}</div>
                        <div class="pkg-product">${pbDescription}</div>
                    </div>
                    <div class="package-tile">
                        <div class="pkg-label">Jelly</div>
                        <div class="pkg-count">${jellyJarsNeeded}</div>
                        <div class="pkg-product">${jellyDescription}</div>
                    </div>
                    <div class="package-tile">
                        <div class="pkg-label">Bread</div>
                        <div class="pkg-count">${breadLoavesNeeded}</div>
                        <div class="pkg-product">${pbjBreadGridName}</div>
                    </div>
                </div>
                <ul class="shopping-receipt">
                    <li class="section-label">Peanut Butter</li>
                    <li>
                        <input type="checkbox">
                        <div class="item-details">
                            <div class="item-name">${pbJarsNeeded} √ó ${pbDescription}</div>
                            <div class="item-meta">~${pbTbspPerJar} tbsp per jar</div>
                        </div>
                        <div class="item-price">$${pbCost.toFixed(2)}</div>
                    </li>
                    <li class="section-label">Jelly</li>
                    <li>
                        <input type="checkbox">
                        <div class="item-details">
                            <div class="item-name">${jellyJarsNeeded} √ó ${jellyDescription}</div>
                            <div class="item-meta">~${jellyTbspPerJar} tbsp per jar</div>
                        </div>
                        <div class="item-price">$${jellyCost.toFixed(2)}</div>
                    </li>
                    <li class="section-label">Bread</li>
                    <li>
                        <input type="checkbox">
                        <div class="item-details">
                            <div class="item-name">${breadLoavesNeeded} √ó ${pbjBreadName}</div>
                            <div class="item-meta">${usableBreadSlicesPerLoaf} usable slices per loaf</div>
                        </div>
                        <div class="item-price">$${breadCost.toFixed(2)}</div>
                    </li>
                    <li>
                        <input type="checkbox">
                        <div class="item-details">
                            <div class="item-name">${bagBoxesNeeded} √ó Zip-lock sandwich bags</div>
                            <div class="item-meta">${bagsPerBox} count boxes</div>
                        </div>
                        <div class="item-price">$${bagCost.toFixed(2)}</div>
                    </li>
                    ${includeSpatulas ? `
                    <li>
                        <input type="checkbox">
                        <div class="item-details">
                            <div class="item-name">${spatulaPackCount} √ó Spreading Spatula ${spatulasPerPack}-pack</div>
                            <div class="item-meta">${spatulaPackCount * spatulasPerPack} spatulas total ‚Äî <a href="https://www.amazon.com/4-Piece-Silicone-Jar-Spatula-Set/dp/B0FDGY1R58" target="_blank" rel="noopener noreferrer" style="color: #FF9900; font-weight: 600; text-decoration: underline;">Order on Amazon</a></div>
                        </div>
                        <div class="item-price">$${spatulaCost.toFixed(2)}</div>
                    </li>
                    ` : ''}
                </ul>
                <div class="receipt-total">
                    <span>Estimated Ingredient Total</span>
                    <span>$${totalCost.toFixed(2)}</span>
                </div>
                <div class="per-sandwich-cost">
                    ‚âà $${costPerSandwich} per sandwich
                </div>
                <div class="pricing-note">
                    Includes peanut butter, jelly, bread, and sandwich bags only. Supplies listed below are not included in this estimate. All prices are estimates based on recent retail pricing and may vary by store and location. Bread prices use the midpoint of the listed price range.
                </div>
                <ul class="shopping-receipt">
                    <li class="section-label">Supplies (not included in total)</li>
                    <li>
                        <input type="checkbox">
                        <div class="item-details">
                            <div class="item-name">Food-safe disposable gloves</div>
                            <div class="item-meta">Multiple boxes</div>
                        </div>
                    </li>
                    <li>
                        <input type="checkbox">
                        <div class="item-details">
                            <div class="item-name">Paper towels for cleanup</div>
                        </div>
                    </li>
                </ul>
            `;

            document.getElementById('pbjResult').style.display = 'block';
        }

    </script>
</div>
<div class="section" style="max-width: 700px; margin: 40px auto 24px auto;">
    <details style="background: #fffbe8; border: 1.5px solid #f7c873; border-radius: 10px; box-shadow: 0 2px 8px #f7c87322; padding: 0 0 18px 0; font-size: 1em;">
        <summary style="display: flex; align-items: center; gap: 10px; padding: 0 18px; min-height: 56px; font-weight: 600; font-size: 1.08em; color: #236383; background: linear-gradient(90deg, #ffe6b3 60%, #fffbe8 100%); border-bottom: 1.5px solid #f7c873; border-radius: 10px 10px 0 0; box-shadow: 0 2px 8px #f7c87322; cursor: pointer; outline: none; letter-spacing: 0.01em;">
            <span style="font-size: 1.3em;">üõí</span>
            <span>Ingredient Price Summary</span>
            <span style="margin-left:auto; font-size:0.98em; color:#b97a1a; font-weight:400;">(click to view all ingredient prices used in calculations)</span>
        </summary>
        <div style="padding: 0 18px;">
            <table style="width:100%; margin-top: 10px; border-collapse: collapse;">
                <tr style="background:#fff3d1; color:#b97a1a;"><th style="text-align:left; padding: 6px 10px;">Item</th><th style="text-align:left; padding: 6px 10px;">Price</th><th style="text-align:left; padding: 6px 10px;">Notes</th></tr>
                <tr><td>Turkey (Kirkland 2-pack, 40 slices)</td><td>$13.99</td><td>40 slices total</td></tr>
                <tr><td>Ham (Kirkland 2-pack, 48 slices)</td><td>$9.89</td><td>48 slices total</td></tr>
                <tr><td>Publix Turkey Breast, Roasted, Thin Sliced</td><td>$7.07</td><td>16 oz / 32 slices</td></tr>
                <tr><td>Land O'Frost Premium Oven Roasted Turkey Breast</td><td>$9.53</td><td>16 oz / 32 slices</td></tr>
                <tr><td>Hillshire Farm Ultra Thin Sliced Oven Roasted Turkey Breast</td><td>$6.07</td><td>9 oz / 18 slices</td></tr>
                <tr><td>Kroger Private Selection¬Æ Turkey Breast Oven Roasted Deli Sliced</td><td>$6.49</td><td>8 oz / 11-12 slices</td></tr>
                <tr><td>Kroger¬Æ Turkey Breast Oven Roasted Deli Thin Sliced</td><td>$3.99</td><td>9 oz / 18 slices</td></tr>
                <tr><td>Kroger¬Æ Turkey Breast Oven Roasted Deli Thin Sliced Family Size</td><td>$4.39</td><td>1 lb / 30-32 slices</td></tr>
                <tr><td colspan="3" style="background: #e3f2fd; font-weight: 600;">üá∫üá∏ American Cheese (Deli Style)</td></tr>
                <tr><td>Great Value American (Walmart)</td><td>$3.98</td><td>24 slices</td></tr>
                <tr><td>Kroger Deli American</td><td>$4.29</td><td>24 slices</td></tr>
                <tr><td>Sargento Sliced American</td><td>$4.99</td><td>22 slices</td></tr>
                <tr><td>Land O'Lakes American</td><td>$6.49</td><td>24 slices</td></tr>
                <tr><td>Boar's Head American</td><td>$8.99</td><td>24 slices</td></tr>
                <tr><td>Great Value White</td><td>$1.48</td><td>~11 sandwiches</td></tr>
                <tr><td>Kroger White Sandwich</td><td>$1.00‚Äì$1.99</td><td>~11 sandwiches</td></tr>
                <tr><td>Wonder Bread Classic White</td><td>$2.47‚Äì$4.79</td><td>~10 sandwiches</td></tr>
                <tr><td>Wonder Bread Giant White</td><td>$3.99‚Äì$5.29</td><td>~11 sandwiches</td></tr>
                <tr><td>Sara Lee Butter Bread</td><td>$2.98‚Äì$3.29</td><td>~10 sandwiches</td></tr>
                <tr><td>Sara Lee Classic White</td><td>$3.48‚Äì$4.49</td><td>~10 sandwiches</td></tr>
                <tr><td>Zip-lock Sandwich Bags</td><td>$7.99</td><td>480 count</td></tr>
            </table>
        </div>
    </details>
</div>
</body>
</html>

