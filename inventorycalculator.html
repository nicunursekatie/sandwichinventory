<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TSP Sandwich Planning Guide</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            font-weight: 400;
            line-height: 1.7;
            color: #2c3e50;
            background: linear-gradient(135deg, #236383 0%, #007E8C 100%);
            min-height: 100vh;
            font-size: 16px;
        }
        
        h1 {
            font-weight: 700;
            font-size: 2.5em;
        }
        
        h2 {
            font-weight: 500;
            font-size: 1.8em;
        }
        
        h3 {
            font-weight: 500;
            font-size: 1.3em;
        }
        
        h4 {
            font-weight: 500;
            font-size: 1.1em;
        }
        
        p, li, span {
            font-weight: 400;
            font-size: 1.1em;
        }
        
        .number, strong {
            font-weight: 500;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        
        .header h1 {
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .header p {
            color: #7f8c8d;
            font-size: 1.2em;
        }
        
        .logo {
            display: inline-block;
            background: linear-gradient(45deg, #FBAD3F, #A31C41);
            color: white;
            padding: 10px 20px;
            border-radius: 50px;
            margin-bottom: 20px;
            font-weight: 700;
        }
        
        .section {
            background: white;
            padding: 35px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: 35px;
        }
        
        .section h2 {
            color: #1a4d66;
            margin-bottom: 25px;
            padding-bottom: 12px;
            border-bottom: 4px solid #FBAD3F;
            font-size: 2em;
            font-weight: 700;
            text-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }
        
        .quick-ref {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 2.5em; /* Increased gap for more space between cards */
            margin-bottom: 30px;
        }
        
        @media (max-width: 768px) {
            .quick-ref {
                grid-template-columns: 1fr;
            }
        }
        
        .ref-card {
            background: #fff;
            color: #333;
            padding: 30px 25px;
            border-radius: 16px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(35, 99, 131, 0.15);
            border: 2px solid #f0f0f0;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .ref-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #007E8C, #47B3CB);
            border-radius: 16px 16px 0 0;
        }
        
        .ref-card:nth-child(1) {
            border-top-color: #007E8C;
        }
        
        .ref-card:nth-child(2) {
            border-top-color: #47B3CB;
        }
        
        .ref-card:nth-child(3) {
            border-top-color: #FBAD3F;
        }
        
        .ref-card:nth-child(4) {
            border-top-color: #A31C41;
        }
        
        @media (max-width: 900px) {
          .quick-ref {
            gap: 1.2em;
          }
          .ref-card {
            margin-bottom: 18px;
          }
        }
        
        .ref-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 15px 40px rgba(35, 99, 131, 0.2);
        }
        
        .ref-card h3 {
            font-size: 2.2em;
            margin-bottom: 12px;
            font-weight: 700;
            color: #1a4d66;
        }
        
        .ref-card .serves {
            background: #f8f9fa;
            padding: 10px 18px;
            border-radius: 20px;
            font-size: 1em;
            margin-bottom: 18px;
            display: inline-block;
            font-weight: 500;
            color: #666;
            border: 1px solid #e9ecef;
        }
        
        .cost-display {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin: 18px 0 0 0;
        }
        
        .cost-item {
            background: #f8f9fa;
            padding: 12px 16px;
            border-radius: 10px;
            font-size: 1em;
            font-weight: 600;
            color: #333;
            border: 1px solid #e9ecef;
            transition: all 0.2s ease;
        }
        
        .cost-item:hover {
            background: #e9ecef;
            transform: translateY(-1px);
        }
        
        .shopping-calculator {
            background: linear-gradient(135deg, #007E8C 0%, #47B3CB 100%);
            padding: 40px;
            border-radius: 20px;
            color: white;
            margin-bottom: 20px;
            box-shadow: 0 15px 40px rgba(0,126,140,0.3);
        }
        
        .calc-form {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }
        
        /* PB&J Calculator specific layout fixes */
        #pbj-calculator .calc-form {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
            align-items: start;
        }
        
        #pbj-calculator .calc-input-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
            width: 100%;
        }
        
        #pbj-calculator .calc-input-group input,
        #pbj-calculator .calc-input-group select {
            width: 100%;
            min-width: 0;
            box-sizing: border-box;
        }
        
        @media (max-width: 768px) {
            #pbj-calculator .calc-form {
                grid-template-columns: 1fr;
                gap: 25px;
            }
        }
        
        .calc-input-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .calc-input-group label {
            font-weight: 700;
            font-size: 1.2em;
            color: rgba(255,255,255,0.98);
            text-transform: uppercase;
            letter-spacing: 0.8px;
            margin-bottom: 8px;
            text-shadow: 0 1px 2px rgba(0,0,0,0.2);
        }
        
        .calc-input-group input, .calc-input-group select {
            padding: 18px 24px;
            border: none;
            border-radius: 12px;
            font-size: 1.2em;
            font-weight: 500;
            background: rgba(255,255,255,0.98);
            color: #2c3e50;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        
        .calc-input-group input:focus, .calc-input-group select:focus {
            outline: none;
            background: white;
            border-color: #FBAD3F;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .calc-input-group input::placeholder {
            color: #7f8c8d;
            font-style: italic;
        }
        
        .calc-button {
            background: linear-gradient(135deg, #A31C41 0%, #8B1639 100%);
            color: white;
            border: none;
            padding: 18px 40px;
            border-radius: 12px;
            font-size: 1.2em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 6px 20px rgba(163,28,65,0.4);
            margin-top: 10px;
            width: 100%;
            max-width: 200px;
            justify-self: center;
        }
        
        .calc-button:hover {
            background: linear-gradient(135deg, #8B1639 0%, #A31C41 100%);
            color: white;
            box-shadow: 0 10px 30px rgba(163,28,65,0.6);
        }
        
        .calc-button:active {
            transform: translateY(-1px);
        }
        
        .export-button {
            background: linear-gradient(135deg, #FBAD3F 0%, #F39C12 100%);
            color: white;
            border: none;
            padding: 15px 35px;
            border-radius: 12px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 6px 20px rgba(251,173,63,0.4);
            margin: 15px auto;
            display: block;
            max-width: 250px;
        }
        
        .export-button:hover {
            background: linear-gradient(135deg, #F39C12 0%, #FBAD3F 100%);
            color: white;
            box-shadow: 0 10px 30px rgba(251,173,63,0.6);
        }
        
        .export-button:active {
            transform: translateY(-1px);
        }
        
        /* Print styles for PDF export */
        @media print {
            body * {
                visibility: hidden;
            }
            .pdf-content, .pdf-content * {
                visibility: visible;
            }
            .pdf-content {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
            }
            
            .pdf-header {
                text-align: center;
                margin-bottom: 30px;
            }
            
            .pdf-section {
                margin-bottom: 20px;
                page-break-inside: avoid;
            }
            
            .pdf-section h3 {
                border-bottom: 2px solid #236383;
                padding-bottom: 5px;
                margin-bottom: 15px;
            }
            
            .pdf-grid {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 20px;
                margin-bottom: 20px;
            }
            
            .pdf-checklist {
                list-style: none;
                padding: 0;
            }
            
            .pdf-checklist li {
                margin: 8px 0;
                font-size: 11px;
            }
            
            .no-print {
                display: none !important;
            }
        }
        
        .calc-button-container {
            grid-column: 1 / -1;
            display: flex;
            justify-content: center;
            margin-top: 15px;
        }
        
        .calc-result {
            background: rgba(255,255,255,0.25);
            padding: 25px;
            border-radius: 12px;
            margin-top: 25px;
            display: none;
            border: 1px solid rgba(255,255,255,0.3);
        }
        
        .result-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            margin-top: 15px;
        }
        
        .result-item {
            background: rgba(255,255,255,0.15);
            padding: 25px;
            border-radius: 12px;
            text-align: center;
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        .result-item h4 {
            color: #FBAD3F;
            margin-bottom: 15px;
            font-size: 1.2em;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .result-item .number {
            font-size: 3em;
            font-weight: 700;
            margin-bottom: 12px;
            display: block;
            color: white;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        .result-item .description {
            font-size: 1.2em;
            font-weight: 500;
            color: rgba(255,255,255,0.95);
            line-height: 1.4;
        }
        
        .shopping-list {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            border-left: 5px solid #FBAD3F;
        }
        
        .shopping-list h3 {
            color: #A31C41;
            margin-bottom: 15px;
        }
        
        .checklist {
            list-style: none;
        }
        
        .checklist li {
            padding: 10px 0;
            border-bottom: 1px solid #dee2e6;
            display: flex;
            align-items: center;
        }
        
        .checklist input[type="checkbox"] {
            margin-right: 15px;
            transform: scale(1.2);
        }
        
        .tips-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .tip-card {
            background: linear-gradient(135deg, #236383 0%, #007E8C 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
        }
        
        .tip-card h3 {
            margin-bottom: 15px;
            font-size: 1.3em;
        }
        
        .tip-card ul {
            list-style: none;
        }
        
        .tip-card li {
            padding: 5px 0;
            padding-left: 20px;
            position: relative;
        }
        
        .tip-card li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            top: 5px;
            background: rgba(255,255,255,0.2);
            border-radius: 50%;
            width: 16px;
            height: 16px;
            text-align: center;
            font-size: 12px;
            line-height: 16px;
        }
        
        .safety-banner {
            background: linear-gradient(135deg, #A31C41 0%, #8B1639 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            font-weight: 500;
            font-size: 1em;
            margin: 20px 0;
        }
        
        .safety-banner > div {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            text-align: left;
        }
        
        @media (max-width: 900px) {
            .safety-banner > div {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 500px) {
            .safety-banner > div {
                grid-template-columns: 1fr;
            }
        }
        
        .recipe-card {
            background: linear-gradient(135deg, #236383 0%, #007E8C 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
        }
        
        .recipe-ingredients {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }
        
        /* PB&J Calculator ingredient alignment fix */
        #pbj-calculator .recipe-ingredients {
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
            max-width: 100%;
        }
        
        @media (max-width: 768px) {
            #pbj-calculator .recipe-ingredients {
                grid-template-columns: 1fr;
            }
        }
        
        /* Additional PB&J Calculator improvements */
        #pbj-calculator .calc-input-group label {
            font-size: 1.1em;
            margin-bottom: 10px;
            text-align: left;
        }
        
        #pbj-calculator .calc-input-group input,
        #pbj-calculator .calc-input-group select {
            padding: 16px 20px;
            font-size: 1.1em;
            width: 100%;
            box-sizing: border-box;
        }
        
        #pbj-calculator .calc-input-group input::placeholder {
            color: #7f8c8d;
            font-style: italic;
        }
        
        #pbj-calculator .calc-input-group span {
            font-size: 0.95em;
            color: white;
            margin-top: 5px;
            line-height: 1.4;
            text-shadow: 0 1px 2px rgba(0,0,0,0.3);
            font-weight: 500;
        }
        
        .ingredient {
            background: rgba(255,255,255,0.2);
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            line-height: 1.4;
        }
        
        .ingredient .amount {
            font-size: 1.4em;
            font-weight: 600;
            margin-right: 8px;
        }
        
        .ingredient .item {
            font-size: 1.1em;
            font-weight: 400;
        }
        
        @media (max-width: 768px) {
            body {
                font-size: 18px;
            }
            
            .calc-form {
                grid-template-columns: 1fr;
                gap: 25px;
            }
            
            .calc-input-group input, .calc-input-group select {
                padding: 16px 20px;
                font-size: 1.1em;
            }
            
            .calc-input-group label {
                font-size: 1.1em;
            }
            
            .calc-button {
                padding: 18px 35px;
                font-size: 1.2em;
                max-width: none;
            }
            
            .recipe-ingredients {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2.2em;
            }
            
            .section h2 {
                font-size: 1.7em;
            }
            
            .result-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .result-item .number {
                font-size: 2.5em;
            }
            
            .result-item .description {
                font-size: 1.1em;
            }
        }
        .plan-mode-label {
            color: #236383 !important;
            background: rgba(255,255,255,0.95) !important;
            border-radius: 8px;
            padding: 6px 12px;
            font-weight: 600;
            font-size: 1.05em;
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 4px;
        }
        .plan-mode-label input[type="radio"] {
            accent-color: #A31C41;
        }
        .section h2, .shopping-calculator h3 {
            color: #236383;
            text-shadow: none;
        }
        .price-badge {
            background: #fffbe8;
            color: #A31C41;
            border-radius: 4px;
            padding: 2px 7px;
            font-weight: 700;
            font-size: 1em;
            margin-left: 2px;
            display: inline-block;
        }

        .cta-banner {
            background: linear-gradient(135deg, #A31C41 0%, #8B1639 100%);
            color: white;
            padding: 24px 32px;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(163, 28, 65, 0.35);
            margin-bottom: 28px;
            text-align: center;
            border: 3px solid rgba(251, 173, 63, 0.5);
        }

        .cta-banner h2 {
            color: white !important;
            font-size: 1.8em;
            font-weight: 700;
            margin-bottom: 12px;
            border: none;
            padding: 0;
        }

        .cta-banner p {
            font-size: 1.15em;
            margin-bottom: 18px;
            line-height: 1.5;
        }

        .cta-button {
            display: inline-block;
            background: linear-gradient(135deg, #FBAD3F 0%, #F39C12 100%);
            color: #fff;
            text-decoration: none;
            padding: 16px 40px;
            border-radius: 10px;
            font-size: 1.2em;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            box-shadow: 0 6px 20px rgba(251, 173, 63, 0.4);
            transition: all 0.3s ease;
        }

        .cta-button:hover {
            background: linear-gradient(135deg, #F39C12 0%, #FBAD3F 100%);
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(251, 173, 63, 0.6);
        }

        @media (max-width: 768px) {
            .cta-banner {
                padding: 20px 24px;
            }

            .cta-banner h2 {
                font-size: 1.5em;
            }

            .cta-banner p {
                font-size: 1.05em;
            }

            .cta-button {
                padding: 14px 32px;
                font-size: 1.1em;
            }
        }

        .nav-menu {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            margin-bottom: 25px;
            text-align: center;
        }

        .nav-menu h3 {
            color: #1a4d66;
            font-size: 1.2em;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .nav-links {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            justify-content: center;
        }

        .nav-link {
            background: linear-gradient(135deg, #007E8C 0%, #47B3CB 100%);
            color: white;
            text-decoration: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(0,126,140,0.2);
        }

        .nav-link:hover {
            background: linear-gradient(135deg, #47B3CB 0%, #007E8C 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,126,140,0.3);
        }

        @media (max-width: 768px) {
            .nav-links {
                flex-direction: column;
            }

            .nav-link {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <img src="CMYK_PRINT_TSP-01-01.jpg" alt="The Sandwich Project Logo" style="max-width: 500px; width: 100%; height: auto; margin-bottom: 20px;">
            <p>Interactive Group Event Planning Guide</p>
        </div>

        <div class="nav-menu">
            <h3>Quick Navigation</h3>
            <div class="nav-links">
                <a href="toolkit.html" class="nav-link">üìö Planning Toolkit</a>
                <a href="eventestimator/sandwichprojecteventestimator.html" class="nav-link">üë• Group Capacity Estimator</a>
                <a href="#calculator" class="nav-link">üßÆ Deli Calculator</a>
                <a href="#custom-calculator" class="nav-link">üõí Custom Package Calculator</a>
                <a href="#pbj-calculator" class="nav-link">ü•ú PB&J Calculator</a>
                <a href="#pricing-info" class="nav-link">üìä Pricing Info</a>
                <a href="#recipe" class="nav-link">ü•™ Recipes</a>
                <a href="#food-safety" class="nav-link">üõ°Ô∏è Food Safety</a>
            </div>
        </div>


        <div class="section" id="intro-section" style="margin-bottom: 28px; background: linear-gradient(135deg, #f8f9fa 80%, #e3f6f9 100%); border: 2px solid #FBAD3F; box-shadow: 0 4px 16px #FBAD3F22;">
            <h2 style="color: #A31C41; font-size: 1.7em; font-weight: 700; margin-bottom: 10px;">Welcome to the Sandwich Project Planning Tool!</h2>
            <p style="font-size: 1.15em; color: #236383; margin-bottom: 10px;">
                This page is designed to help volunteers and organizers plan group sandwich-making events when working with The Sandwich Project! Use this tool to estimate costs, quantities, and supplies for your event‚Äî whether you‚Äôre making 20 or 2,000 sandwiches!
            </p>
            <ul style="font-size: 1.08em; color: #236383; margin-bottom: 10px; padding-left: 22px;">
                <li>üßÆ <strong>Interactive Calculator:</strong> Plan by sandwich count or budget.</li>
                <li>üìä <strong>Current Ingredient Pricing:</strong> See up-to-date price estimates for bread, meat, cheese, and bags.</li>
                <li>üéØ <strong>Quick Reference:</strong> Popular quantities and cost estimates at a glance.</li>
                <li>ü•™ <strong>Recipe & Safety:</strong> Standard sandwich recipe and food safety tips.</li>
                <li>üí° <strong>Planning Tips:</strong> Advice for smooth, safe, and successful events.</li>
            </ul>
            <p style="font-size: 1em; color: #888; margin-bottom: 0;">
                <strong>How to use:</strong> Start with the calculator below, or jump to any section for details and tips. All pricing is based on recent shopping at various retailers (Costco, Kroger, Publix, etc.) and may vary by location.
            </p>
        </div>
        
        <!-- Interactive Calculator Section -->
        <div class="section" id="calculator">
            <h2>üßÆ Interactive Calculator</h2>

            <!-- Recipe info box -->
            <div style="background: linear-gradient(135deg, #e8f5f9 0%, #fff 100%); border: 2px solid #47B3CB; border-radius: 12px; padding: 18px 24px; margin-bottom: 25px; display: flex; align-items: center; gap: 20px; flex-wrap: wrap;">
                <div style="font-size: 2.5em;">ü•™</div>
                <div style="flex: 1; min-width: 200px;">
                    <h4 style="color: #1a4d66; margin-bottom: 8px; font-size: 1.15em;">Standard Sandwich Recipe</h4>
                    <div style="display: flex; gap: 20px; flex-wrap: wrap; color: #236383; font-weight: 500;">
                        <span>üçû 2 slices bread</span>
                        <span>üßÄ 2 slices cheese</span>
                        <span>ü•© 3 slices meat</span>
                        <span>üì¶ 1 bag</span>
                    </div>
                    <p style="margin-top: 8px; font-size: 0.95em; color: #64748b;">Calculator uses <strong>slice counts</strong> for accurate purchasing - no more leftover meat!</p>
                </div>
            </div>

            <div class="shopping-calculator">
                <h3 style="color: #fff; text-shadow: 0 2px 8px rgba(35,99,131,0.18);">Plan Your Sandwich Making Shopping Trip</h3>
                <div style="margin-bottom: 24px; padding: 18px 32px; background: #f8f9fa; border-radius: 10px; border: 1.5px solid #e0e0e0;">
                    <label style="font-weight: 600; font-size: 1.1em; display: block; margin-bottom: 10px; color: #236383;">How would you like to plan your sandwich making shopping trip?</label>
                    <div style="display: flex; flex-direction: column; gap: 12px; padding-left: 8px; padding-right: 8px;">
                        <label class="plan-mode-label" style="display: flex; align-items: center; gap: 10px; font-size: 1.05em; cursor:pointer;">
                            <input type="radio" name="planMode" id="planBySandwiches" value="sandwiches" checked onchange="togglePlanMode()">
                            How much will it cost us to make ___ # of sandwiches?
                        </label>
                        <label class="plan-mode-label" style="display: flex; align-items: center; gap: 10px; font-size: 1.05em; cursor:pointer;">
                            <input type="radio" name="planMode" id="planByBudget" value="budget" onchange="togglePlanMode()">
                            How many sandwiches can we make with a budget of $____?
                        </label>
                    </div>
                </div>
                <div class="calc-form">
                    <div class="calc-input-group" id="sandwichCountGroup">
                        <label for="sandwichCount">Number of sandwiches</label>
                        <input type="number" id="sandwichCount" min="1" max="2000" placeholder="Enter quantity (e.g., 100)">
                        <span style="font-size: 0.98em; color: #236383; margin-top: 2px;">Enter the number of sandwiches you want to make.</span>
                    </div>
                    <div class="calc-input-group" id="budgetGroup" style="display: none;">
                        <label for="budgetAmount">Budget ($)</label>
                        <input type="number" id="budgetAmount" min="1" max="10000" placeholder="Enter your budget (e.g., 200)">
                        <span style="font-size: 0.98em; color: #236383; margin-top: 2px;">Enter the total amount you want to spend.</span>
                    </div>

                    <!-- Meat amount is fixed at 3 slices per standard recipe - hidden input -->
                    <input type="hidden" id="meatAmount" value="3">

                    <div class="calc-input-group">
                        <label>Meat type</label>
                        <select id="meatType">
                            <option value="">Choose your meat</option>
                            <optgroup label="‚≠ê Best Value Options">
                                <option value="ham">üê∑ Kirkland Ham (2-pack, 48 slices, $9.89) - $0.21/slice</option>
                                <option value="kroger-chicken-thin">üêî Kroger Chicken Thin Sliced (9 oz / 18 slices, $3.50) - $0.19/slice</option>
                                <option value="publix-turkey">ü¶É Publix Turkey Breast, Thin Sliced (16 oz / 32 slices, $7.07) - $0.22/slice</option>
                                <option value="kroger-turkey-thin">ü¶É Kroger Turkey Thin Sliced (9 oz / 18 slices, $3.99) - $0.22/slice</option>
                                <option value="kroger-turkey-family">ü¶É Kroger Turkey Family Size (1 lb / 30-32 slices, $4.39) - $0.14/slice ‚≠ê BEST!</option>
                            </optgroup>
                            <optgroup label="More Options">
                                <option value="turkey">ü¶É Kirkland Turkey (2-pack, 40 slices, $13.99) - $0.35/slice</option>
                                <option value="hillshire-turkey">ü¶É Hillshire Farm Ultra Thin (9 oz / 18 slices, $6.07) - $0.34/slice</option>
                                <option value="land-o-frost-turkey">ü¶É Land O'Frost Premium (16 oz / 32 slices, $9.53) - $0.30/slice</option>
                                <option value="kroger-turkey-regular">ü¶É Kroger Private Selection¬Æ (8 oz / 11-12 slices, $6.49) - $0.56/slice</option>
                                <option value="oscar-mayer-chicken-blackened">üêî Oscar Mayer Blackened Chicken (8 oz / 11-12 slices, $4.49) - $0.39/slice</option>
                                <option value="oscar-mayer-chicken-rotisserie">üêî Oscar Mayer Rotisserie Chicken (16 oz / 32 slices, $7.99) - $0.25/slice</option>
                            </optgroup>
                        </select>
                    </div>
                    
                    <div class="calc-input-group">
                        <label>Cheese type</label>
                        <select id="cheeseType">
                            <option value="">Choose your cheese</option>
                            <option value="adams-reserve">üßÄ Adams Reserve (44 slices, $7.70)</option>
                            <option value="finlandia">üßÄ Finlandia Variety (40 slices, $9.69)</option>
                            <option value="arla-havarti">üßÄ Arla Havarti (32 slices, $9.69)</option>
                        </select>
                    </div>
                    
                    <div class="calc-input-group">
                        <label>Bread type</label>
                        <select id="breadType">
                            <option value="">Choose your bread</option>
                            <option value="natures-own-double">üçû Nature's Own Double Loaf (20 sandwiches, $3.99-4.99)</option>
                            <option value="sunbeam-double">üçû Sunbeam Double Loaf (26 sandwiches, $5.39)</option>
                            <option value="sunbeam-single">üçû Sunbeam Single Loaf (13 sandwiches, $2.70)</option>
                            <option value="other-double">üçû Other Brands Double Loaf (20 sandwiches, $5.39)</option>
                            <option value="other-single">üçû Other Brands Single Loaf (10 sandwiches, $2.70)</option>
                        </select>
                        </select>
                    </div>
                    
                    <div class="calc-button-container">
                        <button class="calc-button" onclick="calculateNeeds()">Calculate My Order</button>
                    </div>
                </div>
                
                <div class="calc-result" id="calcResult">
                </div>
                
                <button class="export-button" id="exportButton" onclick="generatePDF()" style="display: none;">
                    üìÑ Export to PDF
                </button>
            </div>
            
            <div style="background: rgba(255,193,63,0.25); border: 2px solid #FBAD3F; padding: 20px; border-radius: 12px; margin-top: 25px; font-size: 1.1em;">
                <strong style="color: #B8860B; font-size: 1.2em;">üí° Pro Tips:</strong> 
                <span style="color: #8B4513; font-weight: 500;">Consider buying an extra loaf of bread. Cool sandwiches in freezer for 20-30 minutes before loading into coolers that have been brought inside to cool down.</span>
            </div>
            
            <div class="shopping-list" id="shoppingList" style="display: none;">
                <h3>üìù Your Shopping Checklist</h3>
                <ul class="checklist" id="shoppingChecklist">
                </ul>
            </div>
        </div>

        <!-- Custom Package Calculator Section -->
        <div class="section" id="custom-calculator">
            <h2>üõí Custom Package Calculator</h2>
            <p style="color: #64748b; margin-bottom: 20px;">Found meat at Sam's Club, Costco, or another store that's not in our dropdown? Enter your package details below to calculate how many sandwiches you can make!</p>

            <div class="shopping-calculator" style="background: linear-gradient(135deg, #A31C41 0%, #8B1639 100%);">
                <h3 style="color: #fff; text-shadow: 0 2px 8px rgba(0,0,0,0.2);">Calculate Sandwiches from Your Package</h3>

                <!-- Input method toggle -->
                <div style="margin-bottom: 24px; padding: 18px; background: rgba(255,255,255,0.95); border-radius: 10px;">
                    <label style="font-weight: 600; font-size: 1.1em; display: block; margin-bottom: 12px; color: #236383;">What info do you have from the package label?</label>
                    <div style="display: flex; flex-direction: column; gap: 10px;">
                        <label style="display: flex; align-items: center; gap: 10px; font-size: 1em; cursor: pointer; color: #333; padding: 8px; border-radius: 6px; background: #f8f9fa;">
                            <input type="radio" name="customInputMethod" value="slices" checked onchange="toggleCustomInputMethod()">
                            <span><strong>I can count the slices</strong> (most accurate)</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 10px; font-size: 1em; cursor: pointer; color: #333; padding: 8px; border-radius: 6px; background: #f8f9fa;">
                            <input type="radio" name="customInputMethod" value="oz" onchange="toggleCustomInputMethod()">
                            <span><strong>I only have oz/servings info</strong> (we'll estimate slices)</span>
                        </label>
                    </div>
                </div>

                <div class="calc-form">
                    <!-- Method 1: Direct slice count -->
                    <div id="sliceInputGroup" class="calc-input-group">
                        <label for="customPackageSlices">Number of slices in package</label>
                        <input type="number" id="customPackageSlices" min="1" max="500" placeholder="e.g., 24">
                        <span style="font-size: 0.95em; color: rgba(255,255,255,0.9); margin-top: 4px;">Count the slices or check the label</span>
                    </div>

                    <!-- Method 2: Oz/Servings based estimation -->
                    <div id="ozInputGroup" style="display: none;">
                        <div class="calc-input-group" style="margin-bottom: 20px;">
                            <label for="customPackageOz">Package weight (oz)</label>
                            <input type="number" id="customPackageOz" min="1" max="100" step="0.1" placeholder="e.g., 16">
                            <span style="font-size: 0.95em; color: rgba(255,255,255,0.9); margin-top: 4px;">Look for "Net Wt" on the package</span>
                        </div>

                        <div class="calc-input-group" style="margin-bottom: 20px;">
                            <label for="customServings">Servings per container (optional)</label>
                            <input type="number" id="customServings" min="1" max="100" placeholder="e.g., 8">
                            <span style="font-size: 0.95em; color: rgba(255,255,255,0.9); margin-top: 4px;">If listed on nutrition label</span>
                        </div>

                        <div class="calc-input-group" style="margin-bottom: 20px;">
                            <label for="customServingSize">Serving size in oz (optional)</label>
                            <input type="number" id="customServingSize" min="0.5" max="10" step="0.1" placeholder="e.g., 2">
                            <span style="font-size: 0.95em; color: rgba(255,255,255,0.9); margin-top: 4px;">Usually 2 oz for deli meat</span>
                        </div>

                        <div class="calc-input-group">
                            <label for="customSliceThickness">Slice thickness</label>
                            <select id="customSliceThickness">
                                <option value="thin">Thin sliced (~0.5 oz per slice) - most common</option>
                                <option value="regular">Regular sliced (~0.75 oz per slice)</option>
                                <option value="thick">Thick sliced (~1 oz per slice)</option>
                            </select>
                            <span style="font-size: 0.95em; color: rgba(255,255,255,0.9); margin-top: 4px;">Check if package says "thin sliced" or similar</span>
                        </div>

                        <div id="sliceEstimate" style="margin-top: 15px; padding: 12px; background: rgba(251,173,63,0.3); border-radius: 8px; display: none;">
                            <span style="color: #fff; font-weight: 600;">Estimated slices: </span>
                            <span id="estimatedSliceCount" style="color: #FBAD3F; font-weight: 700; font-size: 1.2em;">--</span>
                            <button onclick="useEstimatedSlices()" style="margin-left: 15px; padding: 6px 12px; background: #FBAD3F; color: #333; border: none; border-radius: 6px; font-weight: 600; cursor: pointer;">Use this estimate</button>
                        </div>
                    </div>

                    <div class="calc-input-group">
                        <label for="customPackagePrice">Package price ($)</label>
                        <input type="number" id="customPackagePrice" min="0" step="0.01" placeholder="e.g., 8.99">
                        <span style="font-size: 0.95em; color: rgba(255,255,255,0.9); margin-top: 4px;">The price you paid for this package</span>
                    </div>

                    <!-- Meat amount is fixed at 3 slices per standard recipe -->
                    <input type="hidden" id="customMeatSlicesPerSandwich" value="3">

                    <div class="calc-button-container">
                        <button class="calc-button" onclick="calculateCustomPackage()">Calculate Sandwiches</button>
                    </div>
                </div>

                <div class="calc-result" id="customResult"></div>
            </div>

            <!-- Full Custom Shopping Calculator -->
            <div style="margin-top: 30px;">
                <h3 style="color: #1a4d66; margin-bottom: 15px;">üìä Full Custom Shopping List Builder</h3>
                <p style="color: #64748b; margin-bottom: 20px;">Have custom packages for all your ingredients? Enter details below to build a complete shopping list.</p>

                <div class="shopping-calculator" style="background: linear-gradient(135deg, #236383 0%, #1a4d66 100%);">
                    <div class="calc-form">
                        <div class="calc-input-group">
                            <label for="customTargetSandwiches">Target number of sandwiches</label>
                            <input type="number" id="customTargetSandwiches" min="1" max="5000" placeholder="e.g., 100">
                        </div>

                        <div class="calc-input-group">
                            <label for="customMeatSlices">Slices per meat package</label>
                            <input type="number" id="customMeatSlices" min="1" max="500" placeholder="e.g., 30">
                        </div>

                        <div class="calc-input-group">
                            <label for="customMeatPrice">Meat package price ($)</label>
                            <input type="number" id="customMeatPrice" min="0" step="0.01" placeholder="e.g., 7.99">
                        </div>

                        <div class="calc-input-group">
                            <label for="customCheeseSlices">Slices per cheese package</label>
                            <input type="number" id="customCheeseSlices" min="1" max="200" placeholder="e.g., 40">
                        </div>

                        <div class="calc-input-group">
                            <label for="customCheesePrice">Cheese package price ($)</label>
                            <input type="number" id="customCheesePrice" min="0" step="0.01" placeholder="e.g., 7.70">
                        </div>

                        <div class="calc-input-group">
                            <label for="customBreadSandwiches">Sandwiches per bread package</label>
                            <input type="number" id="customBreadSandwiches" min="1" max="100" placeholder="e.g., 20">
                            <span style="font-size: 0.95em; color: rgba(255,255,255,0.9); margin-top: 4px;">A double loaf typically makes 20 sandwiches</span>
                        </div>

                        <div class="calc-input-group">
                            <label for="customBreadPrice">Bread package price ($)</label>
                            <input type="number" id="customBreadPrice" min="0" step="0.01" placeholder="e.g., 4.49">
                        </div>

                        <div class="calc-button-container">
                            <button class="calc-button" onclick="calculateFullCustom()">Calculate Full Order</button>
                        </div>
                    </div>

                    <div class="calc-result" id="fullCustomResult"></div>
                </div>
            </div>

            <!-- Recipe reminder -->
            <div class="recipe-card" style="margin-top: 25px;">
                <h3>Standard Sandwich Recipe (Per Sandwich)</h3>
                <div class="recipe-ingredients">
                    <div class="ingredient">
                        <span class="amount">2</span><span class="item">slices bread</span>
                    </div>
                    <div class="ingredient">
                        <span class="amount">2</span><span class="item">slices cheese</span>
                    </div>
                    <div class="ingredient">
                        <span class="amount">3</span><span class="item">slices meat</span>
                    </div>
                    <div class="ingredient">
                        <span class="amount">1</span><span class="item">sandwich bag</span>
                    </div>
                </div>
                <p style="margin-top: 15px; font-size: 0.95em; opacity: 0.9;">3 slices of deli meat = approximately 2-3 oz depending on slice thickness</p>
            </div>
        </div>

        <!-- PB&J Calculator Section -->
        <div class="section" id="pbj-calculator">
            <h2>ü•ú Peanut Butter & Jelly Calculator</h2>
            <div class="shopping-calculator">
                <h3 style="color: #fff; text-shadow: 0 2px 8px rgba(35,99,131,0.18);">Plan Your PB&J Sandwiches</h3>
                <div class="calc-form">
                    <div class="calc-input-group">
                        <label for="pbjCount">Number of PB&J sandwiches</label>
                        <input type="number" id="pbjCount" min="1" max="2000" placeholder="Enter quantity (e.g., 100)">
                        <span style="font-size: 0.98em; color: #236383; margin-top: 2px;">Enter the number of PB&J sandwiches you want to make.</span>
                    </div>

                    <div class="calc-input-group">
                        <label>Peanut butter type</label>
                        <select id="pbType">
                            <option value="jif-40">ü•ú Jif Creamy 40 oz (1.13kg, ~75 tbsp) - $7.99</option>
                            <option value="skippy-40">ü•ú Skippy Creamy 40 oz (1.13kg, ~75 tbsp) - $7.99</option>
                            <option value="jif-16">ü•ú Jif Creamy 16 oz (454g, ~30 tbsp) - $3.59</option>
                            <option value="skippy-16">ü•ú Skippy Creamy 16.3 oz (462g, ~31 tbsp) - $3.59</option>
                        </select>
                    </div>

                    <div class="calc-input-group">
                        <label>Jelly type</label>
                        <select id="jellyType">
                            <option value="smuckers-32">üçá Smucker's Concord Grape Jelly 32 oz (~60 tbsp) - $4.99</option>
                            <option value="welchs-30">üçá Welch's Concord Grape Jelly 30 oz (~56 tbsp) - $3.59</option>
                            <option value="smuckers-squeeze-20">üçá Smucker's Squeeze Grape Jelly 20 oz (~38 tbsp) - $3.59</option>
                            <option value="welchs-squeeze-18">üçá Welch's Natural Concord Grape Squeeze 18 oz (~34 tbsp) - $3.83</option>
                        </select>
                        <span style="font-size: 0.95em; color: #236383; margin-top: 4px; font-weight: 600;">‚ö†Ô∏è IMPORTANT: Use JELLY only - no jam, preserves, or fruit spread!</span>
                    </div>

                    <div class="calc-button-container">
                        <button class="calc-button" onclick="calculatePBJ()">Calculate PB&J Needs</button>
                    </div>
                </div>

                <div class="calc-result" id="pbjResult">
                </div>
            </div>

            <div class="recipe-card" style="margin-top: 25px;">
                <h3>Every PB&J Sandwich Contains</h3>
                <div class="recipe-ingredients">
                    <div class="ingredient">
                        <span class="amount">2</span><span class="item">slices bread</span>
                    </div>
                    <div class="ingredient">
                        <span class="amount">3</span><span class="item">tbsp peanut butter</span>
                    </div>
                    <div class="ingredient">
                        <span class="amount">1.5</span><span class="item">tbsp jelly</span>
                    </div>
                    <div class="ingredient">
                        <span class="amount">1</span><span class="item">zip-lock sandwich bag</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Move Pricing Information section down here -->
        <div class="section" id="pricing-info" style="margin-bottom: 32px;">
            <h2>üìä Pricing Information <span style='font-size:0.7em; font-weight:400;'>(Updated 9/17/2025)</span></h2>
            
            <!-- Important shopping notes - NOT a hazmat warning -->
            <div style="background: #fffbf0; border: 2px solid #f4a261; border-radius: 10px; padding: 20px; margin-bottom: 24px;">
                <h3 style="color: #d97706; font-size: 1.2em; margin-bottom: 16px; font-weight: 600;">
                    üìù Important Shopping Notes
                </h3>
                <div style="display: flex; flex-direction: column; gap: 14px; color: #555; font-size: 1.05em;">
                    <div style="display: flex; gap: 12px; align-items: start;">
                        <span style="font-size: 1.4em; flex-shrink: 0;">ü•©</span>
                        <div>
                            <strong style="color: #333;">Meat: Buy pre-packaged only</strong><br>
                            <span style="font-size: 0.95em;">Don't get meat sliced at the deli counter‚Äîpre-packaged is safer and easier to work with.</span>
                        </div>
                    </div>
                    <div style="display: flex; gap: 12px; align-items: start;">
                        <span style="font-size: 1.4em; flex-shrink: 0;">üßÄ</span>
                        <div>
                            <strong style="color: #333;">Cheese: Avoid individually wrapped slices</strong><br>
                            <span style="font-size: 0.95em;">Individually wrapped American cheese slices do not hold up well and are so much to work to unwrap during sandwich-making. Get deli-style sliced cheese‚Äîthe kind sold together in one pack, not individually wrapped processed singles</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Pricing cards - clean, no wild gradients -->
            <!-- Pricing Section - Compact & Colorful -->
<style>
    .pricing-section {
        max-width: 1200px;
        margin: 0 auto;
        padding: 32px 20px;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }
    
    .pricing-header {
        text-align: center;
        margin-bottom: 24px;
    }
    
    .pricing-header h2 {
        color: #236383;
        font-size: 1.8em;
        margin-bottom: 4px;
        font-weight: 700;
    }
    
    .pricing-meta {
        color: #007E8C;
        font-size: 0.9em;
    }
    
    /* Shopping requirements banner */
    .shopping-requirements {
        background: #e8f5f9;
        border: 2px solid #47B3CB;
        color: #236383;
        padding: 14px 20px;
        border-radius: 8px;
        margin-bottom: 24px;
        font-weight: 500;
    }
    
    .requirements-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin-top: 12px;
    }
    
    .requirement-item {
        font-size: 0.95em;
    }
    
    .requirement-header {
        font-weight: 700;
        color: #A31C41;
        margin-bottom: 4px;
        font-size: 1.05em;
    }
    
    .requirement-text {
        color: #555;
        line-height: 1.3;
    }
    
    /* Category sections */
    .price-category {
        margin-bottom: 20px;
    }
    
    .category-label {
        color: #236383;
        font-weight: 700;
        font-size: 1.1em;
        margin-bottom: 10px;
        padding-left: 4px;
    }
    
    /* Product grid */
    .price-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
        gap: 10px;
    }
    
    .price-card {
        border-radius: 8px;
        padding: 12px;
        text-align: center;
        color: white;
        transition: transform 0.2s;
        cursor: pointer;
        position: relative;
        overflow: hidden;
        display: flex;
        flex-direction: column;
        gap: 3px;
    }
    
    .price-card:hover {
        transform: translateY(-3px);
    }
    
    /* Card colors using brand palette */
    .card-meat {
        background: linear-gradient(135deg, #A31C41 0%, #8B1639 100%);
        box-shadow: 0 4px 12px rgba(163, 28, 65, 0.3);
    }
    
    .card-cheese {
        background: linear-gradient(135deg, #236383 0%, #007E8C 100%);
        box-shadow: 0 4px 12px rgba(35, 99, 131, 0.3);
    }
    
    .card-bread {
        background: linear-gradient(135deg, #FBAD3F 0%, #F39C12 100%);
        box-shadow: 0 4px 12px rgba(251, 173, 63, 0.3);
    }
    
    .card-supplies {
        background: linear-gradient(135deg, #47B3CB 0%, #007E8C 100%);
        box-shadow: 0 4px 12px rgba(71, 179, 203, 0.3);
    }
    
    .product-emoji {
        font-size: 1.5em;
        margin-bottom: 4px;
    }
    
    .product-title {
        font-size: 1.05em;
        font-weight: 700;
        line-height: 1.3;
        border-bottom: 1px solid rgba(255,255,255,0.4);
        padding-bottom: 8px;
        margin-bottom: 6px;
    }
    
    .product-size {
        font-size: 0.85em;
        opacity: 0.95;
        margin-bottom: 6px;
        font-weight: 500;
    }
    
    .product-price {
        font-size: 1.5em;
        font-weight: 800;
        margin-top: 6px;
        margin-bottom: 6px;
        text-shadow: 0 1px 2px rgba(0,0,0,0.3);
    }
    
    .price-note {
        font-size: 1.1em;
        font-weight: 600;
        background: rgba(255,255,255,0.25);
        padding: 4px 10px;
        border-radius: 6px;
        margin-top: 4px;
    }
    
    /* Cheese guide - compact */
    .cheese-guide {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 12px;
        margin-top: 16px;
        margin-bottom: 12px;
    }
    
    .cheese-do, .cheese-dont {
        padding: 12px;
        border-radius: 8px;
        font-size: 0.9em;
    }
    
    .cheese-do {
        background: #d4edda;
        border: 2px solid #28a745;
        color: #155724;
    }
    
    .cheese-dont {
        background: #f8d7da;
        border: 2px solid #dc3545;
        color: #721c24;
    }
    
    .cheese-do strong, .cheese-dont strong {
        display: block;
        margin-bottom: 4px;
        font-size: 1.1em;
    }
    
    /* Mobile responsive */
    @media (max-width: 768px) {
        .price-grid {
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }
        
        .price-card {
            padding: 15px;
        }
        
        .product-title {
            font-size: 1em;
        }
        
        .product-price {
            font-size: 1.3em;
        }
        
        .price-note {
            font-size: 1em;
        }
        
        .cheese-guide {
            grid-template-columns: 1fr;
        }
        
        .requirements-grid {
            grid-template-columns: 1fr;
        }
    }
</style>

<div class="pricing-section">
    <div class="pricing-header">
        <h2>Ingredient Cost Guide</h2>
        <div class="pricing-meta">Based on recent shopping ‚Ä¢ Prices vary by location</div>
    </div>
    
    <!-- Meat Section -->
    <div class="price-category">
        <div class="category-label">MEAT - Best Value Options</div>
        <div class="price-grid">
            <div class="price-card card-meat" style="border: 2px solid #FBAD3F;">
                <div class="product-emoji">ü¶É</div>
                <div class="product-title">Kroger Turkey Family Size ‚≠ê</div>
                <div class="product-size">1 lb ‚Ä¢ 30-32 slices</div>
                <div class="product-price">$4.39</div>
                <div class="price-note">~$0.14/slice ‚Ä¢ BEST VALUE!</div>
            </div>
            
            <div class="price-card card-meat">
                <div class="product-emoji">üê∑</div>
                <div class="product-title">Kirkland Ham</div>
                <div class="product-size">2-pack ‚Ä¢ 48 slices</div>
                <div class="product-price">$9.89</div>
                <div class="price-note">~$0.21/slice</div>
            </div>
            
            <div class="price-card card-meat">
                <div class="product-emoji">ü¶É</div>
                <div class="product-title">Publix Turkey Breast</div>
                <div class="product-size">16 oz ‚Ä¢ 32 slices</div>
                <div class="product-price">$7.07</div>
                <div class="price-note">~$0.22/slice</div>
            </div>
            
            <div class="price-card card-meat">
                <div class="product-emoji">ü¶É</div>
                <div class="product-title">Kroger Turkey Thin Sliced</div>
                <div class="product-size">9 oz ‚Ä¢ 18 slices</div>
                <div class="product-price">$3.99</div>
                <div class="price-note">~$0.22/slice</div>
            </div>
        </div>
        
        <details style="margin-top: 20px;">
            <summary style="cursor: pointer; font-weight: 600; color: #1a4d66; font-size: 1.1em; padding: 12px; background: rgba(251,173,63,0.15); border-radius: 8px; margin-bottom: 15px;">
                ‚ûï Show More Meat Options
            </summary>
            <div class="price-grid" style="margin-top: 15px;">
                <div class="price-card card-meat">
                    <div class="product-emoji">ü¶É</div>
                    <div class="product-title">Land O'Frost Premium</div>
                    <div class="product-size">16 oz ‚Ä¢ 32 slices</div>
                    <div class="product-price">$9.53</div>
                    <div class="price-note">~$0.30/slice</div>
                </div>
                
                <div class="price-card card-meat">
                    <div class="product-emoji">ü¶É</div>
                    <div class="product-title">Hillshire Farm Ultra Thin</div>
                    <div class="product-size">9 oz ‚Ä¢ 18 slices</div>
                    <div class="product-price">$6.07</div>
                    <div class="price-note">~$0.34/slice</div>
                </div>
                
                <div class="price-card card-meat">
                    <div class="product-emoji">ü¶É</div>
                    <div class="product-title">Kirkland Turkey</div>
                    <div class="product-size">2-pack ‚Ä¢ 40 slices</div>
                    <div class="product-price">$13.99</div>
                    <div class="price-note">~$0.35/slice</div>
                </div>
                
                <div class="price-card card-meat">
                    <div class="product-emoji">ü¶É</div>
                    <div class="product-title">Kroger Private Selection¬Æ</div>
                    <div class="product-size">8 oz ‚Ä¢ 11-12 slices</div>
                    <div class="product-price">$6.49</div>
                    <div class="price-note">~$0.56/slice</div>
                </div>
            </div>
        </details>
    </div>
    
    <!-- Cheese Section -->
    <div class="price-category">
        <div class="category-label">CHEESE</div>
        <div class="price-grid">
            <div class="price-card card-cheese">
                <div class="product-emoji">üßÄ</div>
                <div class="product-title">Adams Reserve</div>
                <div class="product-size">44 slices</div>
                <div class="product-price">$7.70</div>
                <div class="price-note">~$0.18/slice</div>
            </div>
            
            <div class="price-card card-cheese">
                <div class="product-emoji">üßÄ</div>
                <div class="product-title">Finlandia</div>
                <div class="product-size">40 slices</div>
                <div class="product-price">$9.69</div>
                <div class="price-note">~$0.24/slice</div>
            </div>
            
            <div class="price-card card-cheese">
                <div class="product-emoji">üßÄ</div>
                <div class="product-title">Arla Havarti</div>
                <div class="product-size">32 slices</div>
                <div class="product-price">$9.69</div>
                <div class="price-note">~$0.30/slice</div>
            </div>
        </div>
    </div>
    
    <!-- Bread & Supplies Section -->
    <div class="price-category">
        <div class="category-label">BREAD & SUPPLIES</div>
        <div class="price-grid">
            <div class="price-card card-bread">
                <div class="product-emoji">üçû</div>
                <div class="product-title">Nature's Own</div>
                <div class="product-size">Double loaf</div>
                <div class="product-price">$4.49</div>
                <div class="price-note">~$0.22/sandwich</div>
            </div>
            
            <div class="price-card card-bread">
                <div class="product-emoji">üçû</div>
                <div class="product-title">Store Brand</div>
                <div class="product-size">Double loaf</div>
                <div class="product-price">$5.39</div>
                <div class="price-note">~$0.27/sandwich</div>
            </div>
            
            <div class="price-card card-supplies">
                <div class="product-emoji">üì¶</div>
                <div class="product-title">Sandwich Bags</div>
                <div class="product-size">480 count</div>
                <div class="product-price">$7.99</div>
                <div class="price-note">~$0.02/bag</div>
            </div>
        </div>
    </div>
    
    <div class="cheese-guide">
        <div class="cheese-do">
            <strong>‚úÖ Right Cheese</strong>
            Regular sliced cheese: cheddar, swiss, provolone
        </div>
        <div class="cheese-dont">
            <strong>‚ùå Wrong Cheese</strong>
            Kraft singles or any individually plastic-wrapped slices
        </div>
    </div>
</div>
    <!-- Collapsible Ingredient Price Summary moved to very bottom -->
        
        <!-- Move Quick Reference section below calculator -->
        <div class="section">
            <h2>üéØ Quick Reference: Popular Quantities</h2>
            <p style="color: #64748b; font-size: 0.95em; margin-bottom: 16px;">Costs include meat, cheese, bread, and bags. Based on 3 slices meat per sandwich, Adams Reserve cheese, Nature's Own bread. Prices may vary by location.</p>
            <div class="quick-ref">
                <div class="ref-card">
                    <div style="font-size: 2.5em; margin-bottom: 15px;">üè¢</div>
                    <h3>100</h3>
                    <div class="serves">üë• Serves 50-75 people</div>
                    <div class="cost-display">
                        <div class="cost-item">ü¶É Turkey (Kirkland): $181</div>
                        <div class="cost-item">üê∑ Ham (Kirkland): $138</div>
                        <div class="cost-item" style="font-size: 0.9em; color: #64748b; margin-top: 4px;">‚≠ê Best Value: Kroger Turkey Family - $152</div>
                    </div>
                </div>
                <div class="ref-card">
                    <div style="font-size: 2.5em; margin-bottom: 15px;">üè´</div>
                    <h3>200</h3>
                    <div class="serves">üë• Serves 100-150 people</div>
                    <div class="cost-display">
                        <div class="cost-item">ü¶É Turkey (Kirkland): $362</div>
                        <div class="cost-item">üê∑ Ham (Kirkland): $276</div>
                        <div class="cost-item" style="font-size: 0.9em; color: #64748b; margin-top: 4px;">‚≠ê Best Value: Kroger Turkey Family - $304</div>
                    </div>
                </div>
                <div class="ref-card">
                    <div style="font-size: 2.5em; margin-bottom: 15px;">üé™</div>
                    <h3>500</h3>
                    <div class="serves">üë• Serves 250-375 people</div>
                    <div class="cost-display">
                        <div class="cost-item">ü¶É Turkey (Kirkland): $905</div>
                        <div class="cost-item">üê∑ Ham (Kirkland): $690</div>
                        <div class="cost-item" style="font-size: 0.9em; color: #64748b; margin-top: 4px;">‚≠ê Best Value: Kroger Turkey Family - $760</div>
                    </div>
                </div>
                <div class="ref-card">
                    <div style="font-size: 2.5em; margin-bottom: 15px;">üé°</div>
                    <h3>1000</h3>
                    <div class="serves">üë• Serves 500-750 people</div>
                    <div class="cost-display">
                        <div class="cost-item">ü¶É Turkey (Kirkland): $1,810</div>
                        <div class="cost-item">üê∑ Ham (Kirkland): $1,380</div>
                        <div class="cost-item" style="font-size: 0.9em; color: #64748b; margin-top: 4px;">‚≠ê Best Value: Kroger Turkey Family - $1,520</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="section" id="recipe">
            <h2>ü•™ Perfect Sandwich Recipe</h2>
            <div class="recipe-card">
                <h3>Deli Sandwich - Every Sandwich Contains</h3>
                <div style="margin-bottom: 20px; text-align: center;">
                    <img src="sandwich assembly with ounces.png" alt="Deli sandwich assembly guide" style="width: 100%; max-width: 400px; height: auto; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                </div>
                <div class="recipe-ingredients">
                    <div class="ingredient">
                        <span class="amount">2</span><span class="item">slices bread (no heels)</span>
                    </div>
                    <div class="ingredient">
                        <span class="amount">2</span><span class="item">slices cheese (one per bread slice)</span>
                    </div>
                    <div class="ingredient">
                        <span class="amount">3</span><span class="item">slices deli meat (turkey or ham) = 2-3 oz total</span>
                    </div>
                    <div class="ingredient">
                        <span class="amount">1</span><span class="item">zip-lock sandwich bag</span>
                    </div>
                </div>
                <div style="margin-top: 16px; padding: 12px; background: rgba(255,255,255,0.15); border-radius: 8px; font-size: 0.95em;">
                    <strong>Assembly Order:</strong> Bread ‚Üí Cheese ‚Üí Meat ‚Üí Cheese ‚Üí Bread
                </div>
            </div>
            
            <div class="recipe-card" style="margin-top: 30px;">
                <h3>PB&J Sandwich - Assembly Instructions</h3>
                <div style="margin-bottom: 20px; text-align: center;">
                    <img src="PBJ & ASSEMBLY PEANUT BUTTER ON BOTH SIDES, JELLY ON ONE (1).png" alt="PB&J sandwich assembly guide" style="width: 100%; max-width: 400px; height: auto; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                </div>
                <div class="recipe-ingredients">
                    <div class="ingredient">
                        <span class="amount">2</span><span class="item">slices bread (no heels)</span>
                    </div>
                    <div class="ingredient">
                        <span class="amount">1 heaping tbsp</span><span class="item">peanut butter on each slice of bread</span>
                    </div>
                    <div class="ingredient">
                        <span class="amount">1 tbsp</span><span class="item">jelly on one side only (not too close to edges)</span>
                    </div>
                    <div class="ingredient">
                        <span class="amount">1</span><span class="item">zip-lock sandwich bag</span>
                    </div>
                </div>
                <div style="margin-top: 16px; padding: 12px; background: #f8f9fa; border-radius: 8px; font-size: 0.95em; color: #64748b;">
                    <strong>Assembly:</strong> Spread peanut butter on both slices of bread, then add jelly to one side. Press the two pieces together gently.
                </div>
            </div>
        </div>

        <div class="safety-banner">
            <div>
                <div>üõ°Ô∏è <strong>Keep ingredients refrigerated</strong></div>
                <div>üß§ <strong>Please use gloves & hair ties + hair/beard nets</strong></div>
                <div>üì¶ <strong>Remove only 1 package of meat at a time</strong></div>
                <div>‚ùÑÔ∏è <strong>Return completed loaves immediately</strong></div>
            </div>
        </div>

        <div class="section" id="food-safety">
            <h2>üõ°Ô∏è Food Safety Requirements</h2>
            <div class="tips-grid">
                <div class="tip-card">
                    <h3>üß§ Personal Hygiene</h3>
                    <ul>
                        <li>Wash hands with soap and warm water</li>
                        <li>Wear disposable gloves (required)</li>
                        <li>Change gloves if touching non-food items</li>
                        <li>Use hair ties or nets for long hair</li>
                        <li>Use beard nets if applicable</li>
                        <li>Clean and cover all prep surfaces</li>
                    </ul>
                </div>
                
                <div class="tip-card">
                    <h3>‚ùÑÔ∏è Temperature Control</h3>
                    <ul>
                        <li>Keep all ingredients at 40¬∞F or below</li>
                        <li>Never leave ingredients at 80¬∞F or above</li>
                        <li>Remove only 1 package of meat at a time from fridge</li>
                        <li>Return completed loaves immediately</li>
                        <li>Never put warm sandwiches in coolers</li>
                    </ul>
                </div>
                
                <div class="tip-card">
                    <h3>üì¶ Ingredient Standards</h3>
                    <ul>
                        <li>Use same quality you'd feed your family</li>
                        <li>Pre-packaged deli meat only (no deli counter)</li>
                        <li>Check expiration: 10+ days after purchase</li>
                        <li>Keep nut products away from deli area</li>
                        <li>When in doubt, throw it out!</li>
                    </ul>
                </div>
                
                <div class="tip-card">
                    <h3>üöö Transport Safety</h3>
                    <ul>
                        <li>Cool sandwiches in freezer 20-30 minutes before packing</li>
                        <li>Ensure coolers are cool before loading (not hot from garage)</li>
                        <li>Use ice packs - enough to touch every loaf of sandwiches</li>
                        <li>Fill coolers completely (no air circulation)</li>
                        <li>Once packed, do NOT open cooler - it will rapidly heat up</li>
                        <li>Transport directly to host locations</li>
                    </ul>
                </div>
            </div>
            
            <div class="safety-banner" style="margin-top: 30px;">
                ‚ö†Ô∏è REMEMBER: Recipients may be children, elderly, or immunocompromised. Food safety protects our most vulnerable community members.
            </div>
        </div>
        
        <div class="section">
            <h2>üí° Planning Tips</h2>
            <div class="tips-grid">
                <div class="tip-card">
                    <h3>‚è±Ô∏è Timing Guidelines</h3>
                    <ul>
                        <li>Small (50-100): 45-90 minutes</li>
                        <li>Medium (200-300): 2-3 hours</li>
                        <li>Large (500+): 4-8 hours</li>
                        <li>Add 20 min for setup/cleanup</li>
                    </ul>
                </div>
                
                <div class="tip-card">
                    <h3>‚ùÑÔ∏è Storage & Transport</h3>
                    <ul>
                        <li>~100 sandwiches per large cooler</li>
                        <li>Plan 2-3 hours ingredient storage</li>
                        <li>Use your own coolers with ice packs</li>
                        <li>Never put warm sandwiches in coolers</li>
                        <li>Once packed, don't open cooler during transport</li>
                    </ul>
                </div>
                
                <div class="tip-card">
                    <h3>‚úÖ Quality Standards</h3>
                    <ul>
                        <li>Same quality you'd serve family</li>
                        <li>10+ days until expiration</li>
                        <li>Pre-packaged deli meat only</li>
                        <li>Add 5-10% buffer for extras</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        function calculateNeeds() {
            const bySandwiches = document.getElementById('planBySandwiches').checked;
            let sandwichCount;
            const meatType = document.getElementById('meatType').value;
            const cheeseType = document.getElementById('cheeseType').value;
            const breadType = document.getElementById('breadType').value;
            const meatAmount = parseInt(document.getElementById('meatAmount').value);

            // Ingredient constants - SLICE-BASED CALCULATION
            // Each sandwich uses: 2 slices bread, 2 slices cheese, and 3 slices meat (standard recipe)
            const meatSlicesPerSandwich = meatAmount; // User selected: 3 slices (standard) or 2 slices (lighter)
            const cheesePerSandwich = 2; // 2 slices per sandwich

            // Legacy oz-based variables kept for budget mode cost estimation
            // These are approximate and used for price calculations only
            const meatPerSandwichOz = meatSlicesPerSandwich; // Rough estimate: ~1oz per slice average

            // Package sizes and prices
            let meatPerPackage, meatPrice, meatDescription, meatPackageWeightOz;
            switch(meatType) {
                case 'turkey':
                    meatPerPackage = 40;
                    meatPrice = 13.99;
                    meatDescription = '2-packs (40 slices each)';
                    // Estimate: 40 slices at ~0.5 oz per slice = 20 oz per package, but it's a 2-pack so 40 oz total
                    meatPackageWeightOz = 40; // 2-pack, estimate 20 oz per pack
                    break;
                case 'ham':
                    meatPerPackage = 48;
                    meatPrice = 9.89;
                    meatDescription = '2-packs (48 slices each)';
                    // Estimate: 48 slices at ~0.5 oz per slice = 24 oz per package, but it's a 2-pack so 48 oz total
                    meatPackageWeightOz = 48; // 2-pack, estimate 24 oz per pack
                    break;
                case 'publix-turkey':
                    meatPerPackage = 32; // 16 oz = 32 slices (0.5 oz per slice)
                    meatPrice = 7.07;
                    meatDescription = '16 oz packages (32 slices)';
                    meatPackageWeightOz = 16;
                    break;
                case 'land-o-frost-turkey':
                    meatPerPackage = 32; // 16 oz = 32 slices (0.5 oz per slice)
                    meatPrice = 9.53;
                    meatDescription = '16 oz packages (32 slices)';
                    meatPackageWeightOz = 16;
                    break;
                case 'hillshire-turkey':
                    meatPerPackage = 18; // 9 oz = 18 slices (0.5 oz per slice)
                    meatPrice = 6.07;
                    meatDescription = '9 oz packages (18 slices)';
                    meatPackageWeightOz = 9;
                    break;
                case 'kroger-turkey-regular':
                    meatPerPackage = 11.5; // 8 oz = 11-12 slices average (0.7 oz per slice)
                    meatPrice = 6.49;
                    meatDescription = '8 oz packages (11-12 slices)';
                    meatPackageWeightOz = 8;
                    break;
                case 'kroger-turkey-thin':
                    meatPerPackage = 18; // 9 oz = 18 slices (0.5 oz per slice)
                    meatPrice = 3.99;
                    meatDescription = '9 oz packages (18 slices)';
                    meatPackageWeightOz = 9;
                    break;
                case 'kroger-chicken-thin':
                    meatPerPackage = 18; // 9 oz = 18 slices (0.5 oz per slice)
                    meatPrice = 3.50;
                    meatDescription = '9 oz packages (18 slices)';
                    meatPackageWeightOz = 9;
                    break;
                case 'kroger-turkey-family':
                    meatPerPackage = 31; // 16 oz (1 lb) = 30-32 slices average (0.5 oz per slice)
                    meatPrice = 4.39;
                    meatDescription = '1 lb packages (30-32 slices)';
                    meatPackageWeightOz = 16; // 1 lb = 16 oz
                    break;
                case 'oscar-mayer-chicken-blackened':
                    meatPerPackage = 11.5; // 8 oz = 11-12 slices average (0.7 oz per slice)
                    meatPrice = 4.49;
                    meatDescription = '8 oz packages (11-12 slices)';
                    meatPackageWeightOz = 8;
                    break;
                case 'oscar-mayer-chicken-rotisserie':
                    meatPerPackage = 32; // 16 oz = 32 slices (0.5 oz per slice)
                    meatPrice = 7.99;
                    meatDescription = '16 oz packages (32 slices)';
                    meatPackageWeightOz = 16;
                    break;
                default:
                    meatPerPackage = 40;
                    meatPrice = 13.99;
                    meatDescription = 'packages';
                    meatPackageWeightOz = 20; // Default estimate
            }
            const bagPrice = 7.99;
            let cheesePerPackage, cheesePrice, cheeseDescription;
            switch(cheeseType) {
                case 'adams-reserve':
                    cheesePerPackage = 44;
                    cheesePrice = 7.70;
                    cheeseDescription = '44 slices each';
                    break;
                case 'finlandia':
                    cheesePerPackage = 40;
                    cheesePrice = 9.69;
                    cheeseDescription = '40 slices each';
                    break;
                case 'arla-havarti':
                    cheesePerPackage = 32;
                    cheesePrice = 9.69;
                    cheeseDescription = '32 slices each';
                    break;
                default:
                    cheesePerPackage = 44;
                    cheesePrice = 7.70;
                    cheeseDescription = '44 slices each';
            }
            let breadSandwichesPerPackage, breadDescription, breadPrice;
            switch(breadType) {
                case 'natures-own-double':
                    breadSandwichesPerPackage = 20;
                    breadDescription = 'double loaves (20 sandwiches each)';
                    breadPrice = 4.49;
                    break;
                case 'sunbeam-double':
                    breadSandwichesPerPackage = 26;
                    breadDescription = 'double loaves (26 sandwiches each)';
                    breadPrice = 5.39;
                    break;
                case 'sunbeam-single':
                    breadSandwichesPerPackage = 13;
                    breadDescription = 'single loaves (13 sandwiches each)';
                    breadPrice = 2.70;
                    break;
                case 'other-double':
                    breadSandwichesPerPackage = 20;
                    breadDescription = 'double loaves (20 sandwiches each)';
                    breadPrice = 5.39;
                    break;
                case 'other-single':
                    breadSandwichesPerPackage = 10;
                    breadDescription = 'single loaves (10 sandwiches each)';
                    breadPrice = 2.70;
                    break;
                default:
                    breadSandwichesPerPackage = 20;
                    breadDescription = 'packages';
                    breadPrice = 5.39;
            }

            // Validation for ingredient selections
            if (!meatType) {
                alert('Please select a meat type');
                return;
            }
            if (!cheeseType) {
                alert('Please select a cheese type');
                return;
            }
            if (!breadType) {
                alert('Please select a bread type');
                return;
            }

            if (bySandwiches) {
                sandwichCount = parseInt(document.getElementById('sandwichCount').value);
                if (!sandwichCount || sandwichCount <= 0) {
                    alert('Please enter a valid number of sandwiches');
                    return;
                }
            } else {
                const budget = parseFloat(document.getElementById('budgetAmount').value);
                if (!budget) {
                    alert('Please enter a budget amount');
                    return;
                }
                // Estimate max sandwiches for this budget
                // Cost per sandwich = (meat + cheese + bread + bag) per sandwich
                // Calculate sandwiches per package based on weight
                const sandwichesPerMeatPackage = meatPackageWeightOz / meatPerSandwichOz;
                const meatCostPerSandwich = meatPrice / sandwichesPerMeatPackage;
                const cheeseCostPerSandwich = cheesePrice / (cheesePerPackage / cheesePerSandwich);
                const breadCostPerSandwich = breadPrice / breadSandwichesPerPackage;
                const bagCostPerSandwich = bagPrice / 480;
                const totalCostPerSandwich = meatCostPerSandwich + cheeseCostPerSandwich + breadCostPerSandwich + bagCostPerSandwich;
                sandwichCount = Math.floor(budget / totalCostPerSandwich);
                if (sandwichCount < 1) {
                    alert('Budget too low for even 1 sandwich with selected ingredients.');
                    return;
                }
                
            }


            // Calculate packages needed
            let meatPackages, cheesePackages, breadPackages, bagPackages;
            let meatCost, cheeseCost, breadCost, bagCost, totalCost;
            
            // For budget mode, we need to ensure we stay within budget
            if (!bySandwiches) {
                const budget = parseFloat(document.getElementById('budgetAmount').value);

                // Use binary search to find the optimal sandwich count within budget
                let low = 1;
                let high = Math.floor(budget / 0.50); // Assume minimum $0.50 per sandwich
                let bestSandwichCount = 1;

                while (low <= high) {
                    let mid = Math.floor((low + high) / 2);

                    // Calculate packages based on SLICES (fixes over-ordering bug)
                    const totalMeatSlicesNeeded = mid * meatSlicesPerSandwich;
                    meatPackages = Math.ceil(totalMeatSlicesNeeded / meatPerPackage);
                    cheesePackages = Math.ceil((mid * cheesePerSandwich) / cheesePerPackage);
                    breadPackages = Math.ceil(mid / breadSandwichesPerPackage);
                    bagPackages = Math.ceil(mid / 480);

                    meatCost = meatPackages * meatPrice;
                    cheeseCost = cheesePackages * cheesePrice;
                    breadCost = breadPackages * breadPrice;
                    bagCost = bagPackages * bagPrice;
                    totalCost = Math.round(meatCost + cheeseCost + breadCost + bagCost);

                    if (totalCost <= budget) {
                        bestSandwichCount = mid;
                        low = mid + 1;
                    } else {
                        high = mid - 1;
                    }
                }

                sandwichCount = bestSandwichCount;

                // Recalculate final costs with the adjusted count using SLICE-BASED calculation
                const totalMeatSlicesNeeded = sandwichCount * meatSlicesPerSandwich;
                meatPackages = Math.ceil(totalMeatSlicesNeeded / meatPerPackage);
                cheesePackages = Math.ceil((sandwichCount * cheesePerSandwich) / cheesePerPackage);
                breadPackages = Math.ceil(sandwichCount / breadSandwichesPerPackage);
                bagPackages = Math.ceil(sandwichCount / 480);

                meatCost = meatPackages * meatPrice;
                cheeseCost = cheesePackages * cheesePrice;
                breadCost = breadPackages * breadPrice;
                bagCost = bagPackages * bagPrice;
                totalCost = Math.round(meatCost + cheeseCost + breadCost + bagCost);
            } else {
                // For sandwich count mode, use SLICE-BASED calculation (fixes over-ordering bug)
                const totalMeatSlicesNeeded = sandwichCount * meatSlicesPerSandwich;
                meatPackages = Math.ceil(totalMeatSlicesNeeded / meatPerPackage);
                cheesePackages = Math.ceil((sandwichCount * cheesePerSandwich) / cheesePerPackage);
                breadPackages = Math.ceil(sandwichCount / breadSandwichesPerPackage);
                bagPackages = Math.ceil(sandwichCount / 480);

                meatCost = meatPackages * meatPrice;
                cheeseCost = cheesePackages * cheesePrice;
                breadCost = breadPackages * breadPrice;
                bagCost = bagPackages * bagPrice;
                totalCost = Math.round(meatCost + cheeseCost + breadCost + bagCost);
            }
            const coolersNeeded = Math.ceil(sandwichCount / 100);

            // Helper function to format package size nicely
            function formatPackageSize(oz) {
                if (oz >= 16) {
                    const lbs = Math.floor(oz / 16);
                    const remainingOz = oz % 16;
                    if (remainingOz === 0) {
                        return `${lbs} ${lbs === 1 ? 'lb' : 'lbs'}`;
                    } else {
                        return `${lbs} ${lbs === 1 ? 'lb' : 'lbs'} ${remainingOz} oz`;
                    }
                }
                return `${oz} oz`;
            }
            
            // Calculate excess ingredients (using SLICES for all calculations)
            const meatSlicesNeeded = sandwichCount * meatSlicesPerSandwich;
            const meatSlicesProvided = meatPackages * meatPerPackage;
            const cheeseNeeded = sandwichCount * cheesePerSandwich;
            const breadNeeded = sandwichCount;

            const cheeseProvided = cheesePackages * cheesePerPackage;
            const breadProvided = breadPackages * breadSandwichesPerPackage;

            // Calculate actual possible extra sandwiches (limited by the scarcest ingredient)
            const meatExcessSlices = meatSlicesProvided - meatSlicesNeeded;
            const cheeseExcess = cheeseProvided - cheeseNeeded;
            const breadExcess = breadProvided - breadNeeded;

            const possibleExtraFromMeat = Math.floor(meatExcessSlices / meatSlicesPerSandwich);
            const possibleExtraFromCheese = Math.floor(cheeseExcess / cheesePerSandwich);
            const possibleExtraFromBread = Math.floor(breadExcess); // 1 sandwich per extra bread slot

            const actualExtraSandwiches = Math.min(possibleExtraFromMeat, possibleExtraFromCheese, possibleExtraFromBread);

            // For budget mode, update the total sandwich count to include extra sandwiches
            let totalSandwichesPossible = sandwichCount;
            if (!bySandwiches && actualExtraSandwiches > 0) {
                totalSandwichesPossible = sandwichCount + actualExtraSandwiches;
            }

            // Create the result grid with budget status
            let budgetStatusMessage = '';
            if (!bySandwiches) {
                const budget = parseFloat(document.getElementById('budgetAmount').value);
                const remaining = budget - totalCost;
                const savingsPercent = Math.round((remaining / budget) * 100);
                
                // Add warning for tight budgets
                let tightBudgetWarning = '';
                if (budget <= 50) {
                    tightBudgetWarning = `
                        <p style="color: #E65100; margin-top: 12px; font-size: 1em; font-weight: 600;">
                            ‚ö†Ô∏è Note: Budgets under $50 are quite tight and yield limited quantities. Consider increasing your budget for better value and more sandwiches.
                        </p>
                    `;
                }
                
                if (remaining > 5) { // More than $5 remaining
                    budgetStatusMessage = `
                        <div style="background: rgba(76,175,80,0.15); border: 3px solid #4CAF50; border-radius: 12px; padding: 20px; margin-bottom: 25px; text-align: center;">
                            <div style="font-size: 2em; margin-bottom: 12px;">‚úÖ</div>
                            <h4 style="color: #2E7D32; margin-bottom: 12px; font-size: 1.4em; font-weight: 700;">Optimal Budget Planning!</h4>
                            <p style="color: #1B5E20; margin: 0; font-size: 1.2em; font-weight: 500;">
                                <strong>${totalSandwichesPossible} sandwiches</strong> for <strong>$${totalCost}</strong> | 
                                Remaining budget: <strong>$${remaining}</strong> (${savingsPercent}% under budget)
                            </p>
                            <p style="color: #2E7D32; font-size: 1em; margin: 12px 0 0 0; font-weight: 400;">
                                This is the maximum number of sandwiches you can make within your $${budget} budget with your selected ingredients.
                            </p>
                            ${tightBudgetWarning}
                        </div>
                    `;
                } else if (remaining > 0) { // Small amount remaining
                    budgetStatusMessage = `
                        <div style="background: rgba(255,152,0,0.2); border: 3px solid #FF9800; border-radius: 12px; padding: 20px; margin-bottom: 25px; text-align: center;">
                            <div style="font-size: 2em; margin-bottom: 12px;">‚ö†Ô∏è</div>
                            <h4 style="color: #E65100; margin-bottom: 12px; font-size: 1.4em; font-weight: 700;">Budget Optimized!</h4>
                            <p style="color: #BF360C; margin: 0; font-size: 1.2em; font-weight: 500;">
                                <strong>${totalSandwichesPossible} sandwiches</strong> for <strong>$${totalCost}</strong> | 
                                Only <strong>$${remaining}</strong> remaining (${savingsPercent}% under budget)
                            </p>
                            <p style="color: #E65100; font-size: 1em; margin: 12px 0 0 0; font-weight: 400;">
                                This maximizes your sandwich count within your $${budget} budget.
                            </p>
                            ${tightBudgetWarning}
                        </div>
                    `;
                } else { // Exactly at budget
                    budgetStatusMessage = `
                        <div style="background: rgba(76,175,80,0.15); border: 3px solid #4CAF50; border-radius: 12px; padding: 20px; margin-bottom: 25px; text-align: center;">
                            <div style="font-size: 2em; margin-bottom: 12px;">üéØ</div>
                            <h4 style="color: #2E7D32; margin-bottom: 12px; font-size: 1.4em; font-weight: 700;">Perfect Budget Match!</h4>
                            <p style="color: #1B5E20; margin: 0; font-size: 1.2em; font-weight: 500;">
                                <strong>${totalSandwichesPossible} sandwiches</strong> for exactly <strong>$${totalCost}</strong> | 
                                Uses your entire $${budget} budget
                            </p>
                            <p style="color: #2E7D32; font-size: 1em; margin: 12px 0 0 0; font-weight: 400;">
                                This is the maximum number of sandwiches you can make with your selected ingredients and budget.
                            </p>
                            ${tightBudgetWarning}
                        </div>
                    `;
                }
            }
            
            // No longer showing excess ingredient details to maintain trust and professionalism

            // Format package description
            function formatPackageSize(oz) {
                if (oz >= 16) {
                    const lbs = Math.floor(oz / 16);
                    const remainingOz = oz % 16;
                    if (remainingOz === 0) {
                        return `${lbs} ${lbs === 1 ? 'lb' : 'lbs'}`;
                    } else {
                        return `${lbs} ${lbs === 1 ? 'lb' : 'lbs'} ${remainingOz} oz`;
                    }
                }
                return `${oz} oz`;
            }
            
            document.getElementById('calcResult').innerHTML = `
                ${budgetStatusMessage}
                <div class="result-grid">
                    <div class="result-item">
                        <h4>Meat Packages</h4>
                        <div class="number">${meatPackages}</div>
                        <div class="description">${meatDescription} (${formatPackageSize(meatPackageWeightOz)} each)</div>
                    </div>
                    <div class="result-item">
                        <h4>Cheese Packages</h4>
                        <div class="number">${cheesePackages}</div>
                        <div class="description">${cheeseDescription}</div>
                    </div>
                    <div class="result-item">
                        <h4>Bread Packages</h4>
                        <div class="number">${breadPackages}</div>
                        <div class="description">${breadDescription}</div>
                    </div>
                    <div class="result-item">
                        <h4>Total Cost</h4>
                        <div class="number">$${totalCost}</div>
                        <div class="description">estimated retail pricing</div>
                    </div>
                </div>
            `;

            // Generate dynamic shopping checklist
            // Get meat type name for shopping list
            let meatTypeName;
            switch(meatType) {
                case 'turkey':
                    meatTypeName = 'Turkey';
                    break;
                case 'ham':
                    meatTypeName = 'Ham';
                    break;
                case 'publix-turkey':
                    meatTypeName = 'Publix Turkey Breast, Roasted, Thin Sliced';
                    break;
                case 'land-o-frost-turkey':
                    meatTypeName = 'Land O\'Frost Premium Oven Roasted Turkey Breast';
                    break;
                case 'hillshire-turkey':
                    meatTypeName = 'Hillshire Farm Ultra Thin Sliced Oven Roasted Turkey Breast';
                    break;
                case 'kroger-turkey-regular':
                    meatTypeName = 'Kroger Private Selection¬Æ Turkey Breast Oven Roasted Deli Sliced';
                    break;
                case 'kroger-turkey-thin':
                    meatTypeName = 'Kroger¬Æ Turkey Breast Oven Roasted Deli Thin Sliced';
                    break;
                case 'kroger-chicken-thin':
                    meatTypeName = 'Kroger¬Æ Chicken Breast Deli Thin Sliced';
                    break;
                case 'kroger-turkey-family':
                    meatTypeName = 'Kroger¬Æ Turkey Breast Oven Roasted Deli Thin Sliced Family Size';
                    break;
                case 'oscar-mayer-chicken-blackened':
                    meatTypeName = 'Oscar Mayer Deli Fresh Blackened Chicken Breast Thin Sliced Lunchmeat';
                    break;
                case 'oscar-mayer-chicken-rotisserie':
                    meatTypeName = 'Oscar Mayer Deli Fresh Rotisserie Seasoned Chicken Breast Thin Sliced Lunchmeat';
                    break;
                default:
                    meatTypeName = 'Meat';
            }
            
            // Create shopping description with package count
            const meatShoppingDescription = `${meatPackages} √ó ${meatTypeName} (${formatPackageSize(meatPackageWeightOz)} packages)`;
            let cheeseShoppingDescription;
            switch(cheeseType) {
                case 'adams-reserve':
                    cheeseShoppingDescription = 'Adams Reserve Cheese slices (44 slices per package)';
                    break;
                case 'finlandia':
                    cheeseShoppingDescription = 'Finlandia Variety Cheese slices (40 slices per package)';
                    break;
                case 'arla-havarti':
                    cheeseShoppingDescription = 'Arla Havarti Cheese slices (32 slices per package)';
                    break;
                default:
                    cheeseShoppingDescription = 'Cheese slices';
            }
            const estimatedLoaves = Math.ceil(sandwichCount / 20);
            const icePacksNeeded = Math.max(estimatedLoaves, coolersNeeded * 4);
            document.getElementById('shoppingChecklist').innerHTML = `
                <li><input type="checkbox"> ${meatShoppingDescription}</li>
                <li><input type="checkbox"> ${cheesePackages} √ó ${cheeseShoppingDescription}</li>
                <li><input type="checkbox"> ${breadPackages} √ó Bread ${breadDescription}</li>
                <li><input type="checkbox"> ${bagPackages} √ó Zip-lock sandwich bags (480 count)</li>
                <li><input type="checkbox"> ${icePacksNeeded} √ó Ice packs (enough to touch every loaf)</li>
                <li><input type="checkbox"> Food-safe disposable gloves (multiple boxes)</li>
                <li><input type="checkbox"> Hair ties/nets and beard nets</li>
                <li><input type="checkbox"> Hand soap</li>
                <li><input type="checkbox"> Paper towels for cleanup</li>
                <li><input type="checkbox"> Disinfecting wipes for surfaces</li>
            `;
            document.getElementById('calcResult').style.display = 'block';
            document.getElementById('shoppingList').style.display = 'block';
            document.getElementById('exportButton').style.display = 'block';
        }
        
        function generatePDF() {
            // Get form data
            const sandwichCount = parseInt(document.getElementById('sandwichCount').value);
            const meatType = document.getElementById('meatType');
            const cheeseType = document.getElementById('cheeseType');
            const breadType = document.getElementById('breadType');
            const meatAmount = parseInt(document.getElementById('meatAmount').value);
            
            const meatText = meatType.options[meatType.selectedIndex].text;
            const cheeseText = cheeseType.options[cheeseType.selectedIndex].text;
            const breadText = breadType.options[breadType.selectedIndex].text;
            
            // Calculate the results (same logic as in calculateNeeds) - SLICE-BASED
            const meatSlicesPerSandwich = meatAmount; // 3 slices (standard) or 2 slices (lighter)
            const cheesePerSandwich = 2;
            
            // Helper function to format package size nicely
            function formatPackageSize(oz) {
                if (oz >= 16) {
                    const lbs = Math.floor(oz / 16);
                    const remainingOz = oz % 16;
                    if (remainingOz === 0) {
                        return `${lbs} ${lbs === 1 ? 'lb' : 'lbs'}`;
                    } else {
                        return `${lbs} ${lbs === 1 ? 'lb' : 'lbs'} ${remainingOz} oz`;
                    }
                }
                return `${oz} oz`;
            }
            
            // Get meat type name
            let meatTypeName;
            switch(meatType.value) {
                case 'turkey':
                    meatTypeName = 'Turkey';
                    break;
                case 'ham':
                    meatTypeName = 'Ham';
                    break;
                case 'publix-turkey':
                    meatTypeName = 'Publix Turkey Breast, Roasted, Thin Sliced';
                    break;
                case 'land-o-frost-turkey':
                    meatTypeName = 'Land O\'Frost Premium Oven Roasted Turkey Breast';
                    break;
                case 'hillshire-turkey':
                    meatTypeName = 'Hillshire Farm Ultra Thin Sliced Oven Roasted Turkey Breast';
                    break;
                case 'kroger-turkey-regular':
                    meatTypeName = 'Kroger Private Selection¬Æ Turkey Breast Oven Roasted Deli Sliced';
                    break;
                case 'kroger-turkey-thin':
                    meatTypeName = 'Kroger¬Æ Turkey Breast Oven Roasted Deli Thin Sliced';
                    break;
                case 'kroger-chicken-thin':
                    meatTypeName = 'Kroger¬Æ Chicken Breast Deli Thin Sliced';
                    break;
                case 'kroger-turkey-family':
                    meatTypeName = 'Kroger¬Æ Turkey Breast Oven Roasted Deli Thin Sliced Family Size';
                    break;
                case 'oscar-mayer-chicken-blackened':
                    meatTypeName = 'Oscar Mayer Deli Fresh Blackened Chicken Breast Thin Sliced Lunchmeat';
                    break;
                case 'oscar-mayer-chicken-rotisserie':
                    meatTypeName = 'Oscar Mayer Deli Fresh Rotisserie Seasoned Chicken Breast Thin Sliced Lunchmeat';
                    break;
                default:
                    meatTypeName = 'Meat';
            }
            let meatPerPackage, meatPrice, meatPackageWeightOz;
            switch(meatType.value) {
                case 'turkey':
                    meatPerPackage = 40;
                    meatPrice = 13.99;
                    meatPackageWeightOz = 40; // 2-pack, estimate 20 oz per pack
                    break;
                case 'ham':
                    meatPerPackage = 48;
                    meatPrice = 9.89;
                    meatPackageWeightOz = 48; // 2-pack, estimate 24 oz per pack
                    break;
                case 'publix-turkey':
                    meatPerPackage = 32; // 16 oz = 32 slices (0.5 oz per slice)
                    meatPrice = 7.07;
                    meatPackageWeightOz = 16;
                    break;
                case 'land-o-frost-turkey':
                    meatPerPackage = 32; // 16 oz = 32 slices (0.5 oz per slice)
                    meatPrice = 9.53;
                    meatPackageWeightOz = 16;
                    break;
                case 'hillshire-turkey':
                    meatPerPackage = 18; // 9 oz = 18 slices (0.5 oz per slice)
                    meatPrice = 6.07;
                    meatPackageWeightOz = 9;
                    break;
                case 'kroger-turkey-regular':
                    meatPerPackage = 11.5; // 8 oz = 11-12 slices average (0.7 oz per slice)
                    meatPrice = 6.49;
                    meatPackageWeightOz = 8;
                    break;
                case 'kroger-turkey-thin':
                    meatPerPackage = 18; // 9 oz = 18 slices (0.5 oz per slice)
                    meatPrice = 3.99;
                    meatPackageWeightOz = 9;
                    break;
                case 'kroger-chicken-thin':
                    meatPerPackage = 18; // 9 oz = 18 slices (0.5 oz per slice)
                    meatPrice = 3.50;
                    meatPackageWeightOz = 9;
                    break;
                case 'kroger-turkey-family':
                    meatPerPackage = 31; // 16 oz (1 lb) = 30-32 slices average (0.5 oz per slice)
                    meatPrice = 4.39;
                    meatPackageWeightOz = 16; // 1 lb = 16 oz
                    break;
                case 'oscar-mayer-chicken-blackened':
                    meatPerPackage = 11.5; // 8 oz = 11-12 slices average (0.7 oz per slice)
                    meatPrice = 4.49;
                    meatPackageWeightOz = 8;
                    break;
                case 'oscar-mayer-chicken-rotisserie':
                    meatPerPackage = 32; // 16 oz = 32 slices (0.5 oz per slice)
                    meatPrice = 7.99;
                    meatPackageWeightOz = 16;
                    break;
                default:
                    meatPerPackage = 40;
                    meatPrice = 13.99;
                    meatPackageWeightOz = 20; // Default estimate
            }
            
            let cheesePerPackage, cheesePrice;
            switch(cheeseType.value) {
                case 'adams-reserve':
                    cheesePerPackage = 44;
                    cheesePrice = 7.70;
                    break;
                case 'finlandia':
                    cheesePerPackage = 40;
                    cheesePrice = 9.69;
                    break;
                case 'arla-havarti':
                    cheesePerPackage = 32;
                    cheesePrice = 9.69;
                    break;
                default:
                    cheesePerPackage = 44;
                    cheesePrice = 7.70;
            }
            
            let breadSandwichesPerPackage, breadPrice;
            switch(breadType.value) {
                case 'natures-own-double':
                    breadSandwichesPerPackage = 20;
                    breadPrice = 4.49;
                    break;
                case 'sunbeam-double':
                    breadSandwichesPerPackage = 26;
                    breadPrice = 5.39;
                    break;
                case 'sunbeam-single':
                    breadSandwichesPerPackage = 13;
                    breadPrice = 2.70;
                    break;
                case 'other-double':
                    breadSandwichesPerPackage = 20;
                    breadPrice = 5.39;
                    break;
                case 'other-single':
                    breadSandwichesPerPackage = 10;
                    breadPrice = 2.70;
                    break;
                default:
                    breadSandwichesPerPackage = 20;
                    breadPrice = 5.39;
            }
            
            // Calculate packages based on SLICES (fixes over-ordering bug)
            const totalMeatSlicesNeeded = sandwichCount * meatSlicesPerSandwich;
            const meatPackages = Math.ceil(totalMeatSlicesNeeded / meatPerPackage);
            const cheesePackages = Math.ceil((sandwichCount * cheesePerSandwich) / cheesePerPackage);
            const breadPackages = Math.ceil(sandwichCount / breadSandwichesPerPackage);
            
            // meatPrice already defined above in the switch statement
            const bagPrice = 7.99;
            
            const meatCost = meatPackages * meatPrice;
            const cheeseCost = cheesePackages * cheesePrice;
            const breadCost = breadPackages * breadPrice;
            const bagCost = Math.ceil(sandwichCount / 480) * bagPrice;
            const totalCost = Math.round(meatCost + cheeseCost + breadCost + bagCost);
            const coolersNeeded = Math.ceil(sandwichCount / 100);
            
            // Create printable content
            const date = new Date().toLocaleDateString();
            const printContent = `
                <div class="pdf-content">
                    <div class="pdf-header">
                        <h1>ü•™ TSP Sandwich Planning Guide</h1>
                        <h2>Shopping List & Budget Report</h2>
                        <p>Generated: ${date}</p>
                    </div>
                    
                    <div class="pdf-section">
                        <h3>Order Summary</h3>
                        <p><strong>Number of sandwiches:</strong> ${sandwichCount}</p>
                        <p><strong>Meat type:</strong> ${meatText}</p>
                        <p><strong>Cheese type:</strong> ${cheeseText}</p>
                        <p><strong>Bread type:</strong> ${breadText}</p>
                    </div>
                    
                    <div class="pdf-section">
                        <h3>Budget Summary</h3>
                        <div class="pdf-grid">
                            <div>
                                <p><strong>Meat packages needed:</strong> ${meatPackages} (${formatPackageSize(meatPackageWeightOz)} each)</p>
                                <p><strong>Cheese packages needed:</strong> ${cheesePackages}</p>
                                <p><strong>Bread packages needed:</strong> ${breadPackages}</p>
                            </div>
                            <div>
                                <p style="font-size: 18px; font-weight: bold; color: #236383;">
                                    Total estimated cost: $${totalCost}
                                </p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="pdf-section">
                        <h3>Shopping Checklist</h3>
                        <ul class="pdf-checklist">
                            <li>‚òê ${meatPackages} √ó ${meatTypeName} (${formatPackageSize(meatPackageWeightOz)} packages)</li>
                            <li>‚òê ${cheesePackages} √ó ${cheeseText.replace('üßÄ ', '').split(' (')[0]} cheese slices</li>
                            <li>‚òê ${breadPackages} √ó ${breadText.replace('üçû ', '').split(' (')[0]}</li>
                            <li>‚òê ${Math.ceil(sandwichCount / 480)} √ó Zip-lock sandwich bags (480 count)</li>
                            <li>‚òê ${Math.max(Math.ceil(sandwichCount / 20), 4)} √ó Ice packs (enough to touch every loaf)</li>
                            <li>‚òê Food-safe disposable gloves (multiple boxes)</li>
                            <li>‚òê Hair ties/nets and beard nets</li>
                            <li>‚òê Hand soap</li>
                            <li>‚òê Paper towels for cleanup</li>
                            <li>‚òê Disinfecting wipes for surfaces</li>
                        </ul>
                    </div>
                    
                    <div class="pdf-section">
                        <h3>Food Safety Reminders</h3>
                        <ul class="pdf-checklist">
                            <li>‚Ä¢ Keep all ingredients refrigerated at 40¬∞F or below</li>
                            <li>‚Ä¢ Use disposable gloves and hair/beard nets</li>
                            <li>‚Ä¢ Remove only 1 package of meat at a time from fridge</li>
                            <li>‚Ä¢ Cool sandwiches in freezer 20-30 minutes before packing</li>
                            <li>‚Ä¢ Never put warm sandwiches in coolers</li>
                        </ul>
                    </div>
                </div>
            `;
            
            // Create a temporary element with the content
            const originalContent = document.body.innerHTML;
            document.body.innerHTML = printContent;
            
            // Add a print instruction
            window.alert('A print dialog will open. Please select "Save as PDF" or "Microsoft Print to PDF" as your printer destination to save as a PDF file.');
            
            // Open print dialog
            window.print();
            
            // Restore original content after print dialog closes
            setTimeout(() => {
                document.body.innerHTML = originalContent;
                // Reattach event listeners by recalculating if data is available
                const sandwichCountInput = document.getElementById('sandwichCount');
                if (sandwichCountInput && sandwichCountInput.value) {
                    // Just refresh the page to restore functionality
                    window.location.reload();
                }
            }, 1000);
        }

        function togglePlanMode() {
            const bySandwiches = document.getElementById('planBySandwiches').checked;
            document.getElementById('sandwichCountGroup').style.display = bySandwiches ? '' : 'none';
            document.getElementById('budgetGroup').style.display = bySandwiches ? 'none' : '';
        }

        function calculatePBJ() {
            const pbjCount = parseInt(document.getElementById('pbjCount').value);
            const pbType = document.getElementById('pbType').value;
            const jellyType = document.getElementById('jellyType').value;

            if (!pbjCount || pbjCount <= 0) {
                alert('Please enter a valid number of PB&J sandwiches');
                return;
            }

            // Constants
            const pbPerSandwich = 3; // 3 tbsp per sandwich
            const jellyPerSandwich = 1.5; // 1.5 tbsp per sandwich
            const breadSlicesPerSandwich = 2;

            // Peanut butter options (1 oz PB = 1.875 tbsp)
            let pbJarSize, pbTbspPerJar, pbJarPrice, pbDescription;
            switch(pbType) {
                case 'jif-40':
                    pbJarSize = 40;
                    pbTbspPerJar = 75;
                    pbJarPrice = 7.99;
                    pbDescription = 'Jif Creamy 40 oz (1.13kg)';
                    break;
                case 'skippy-40':
                    pbJarSize = 40;
                    pbTbspPerJar = 75;
                    pbJarPrice = 7.99;
                    pbDescription = 'Skippy Creamy 40 oz (1.13kg)';
                    break;
                case 'jif-16':
                    pbJarSize = 16;
                    pbTbspPerJar = 30;
                    pbJarPrice = 3.59;
                    pbDescription = 'Jif Creamy 16 oz (454g)';
                    break;
                case 'skippy-16':
                    pbJarSize = 16.3;
                    pbTbspPerJar = 31;
                    pbJarPrice = 3.59;
                    pbDescription = 'Skippy Creamy 16.3 oz (462g)';
                    break;
                default:
                    pbJarSize = 40;
                    pbTbspPerJar = 75;
                    pbJarPrice = 7.99;
                    pbDescription = 'Jif Creamy 40 oz (1.13kg)';
            }

            // Jelly options (1 oz jelly = 1.875 tbsp)
            let jellyJarSize, jellyTbspPerJar, jellyJarPrice, jellyDescription;
            switch(jellyType) {
                case 'smuckers-32':
                    jellyJarSize = 32;
                    jellyTbspPerJar = 60;
                    jellyJarPrice = 4.99;
                    jellyDescription = "Smucker's Concord Grape Jelly 32 oz";
                    break;
                case 'welchs-30':
                    jellyJarSize = 30;
                    jellyTbspPerJar = 56;
                    jellyJarPrice = 3.59;
                    jellyDescription = "Welch's Concord Grape Jelly 30 oz";
                    break;
                case 'smuckers-squeeze-20':
                    jellyJarSize = 20;
                    jellyTbspPerJar = 38;
                    jellyJarPrice = 3.59;
                    jellyDescription = "Smucker's Squeeze Grape Jelly 20 oz";
                    break;
                case 'welchs-squeeze-18':
                    jellyJarSize = 18;
                    jellyTbspPerJar = 34;
                    jellyJarPrice = 3.83;
                    jellyDescription = "Welch's Natural Concord Grape Squeeze 18 oz";
                    break;
                default:
                    jellyJarSize = 32;
                    jellyTbspPerJar = 60;
                    jellyJarPrice = 4.99;
                    jellyDescription = "Smucker's Concord Grape Jelly 32 oz";
            }

            // Other container sizes
            const breadSlicesPerLoaf = 22; // Standard loaf (20 usable + 2 heels)
            const usableBreadSlicesPerLoaf = 20; // Excluding heels
            const bagsPerBox = 480;

            // Other prices
            const breadPrice = 2.70; // Average single loaf price
            const bagBoxPrice = 7.99;

            // Calculate total needs
            const totalPbTbsp = pbjCount * pbPerSandwich;
            const totalJellyTbsp = pbjCount * jellyPerSandwich;
            const totalBreadSlices = pbjCount * breadSlicesPerSandwich;

            // Calculate jars/packages needed
            const pbJarsNeeded = Math.ceil(totalPbTbsp / pbTbspPerJar);
            const jellyJarsNeeded = Math.ceil(totalJellyTbsp / jellyTbspPerJar);
            const breadLoavesNeeded = Math.ceil(totalBreadSlices / usableBreadSlicesPerLoaf);
            const bagBoxesNeeded = Math.ceil(pbjCount / bagsPerBox);

            // Calculate costs
            const pbCost = pbJarsNeeded * pbJarPrice;
            const jellyCost = jellyJarsNeeded * jellyJarPrice;
            const breadCost = breadLoavesNeeded * breadPrice;
            const bagCost = bagBoxesNeeded * bagBoxPrice;
            const totalCost = Math.round((pbCost + jellyCost + breadCost + bagCost) * 100) / 100;

            // Display results
            document.getElementById('pbjResult').innerHTML = `
                <div class="result-grid">
                    <div class="result-item">
                        <h4>Peanut Butter</h4>
                        <div class="number">${pbJarsNeeded}</div>
                        <div class="description">${pbDescription}<br>(~${pbTbspPerJar} tbsp each)</div>
                        <div style="margin-top: 10px; font-size: 0.9em;">$${pbCost.toFixed(2)}</div>
                    </div>
                    <div class="result-item">
                        <h4>Jelly</h4>
                        <div class="number">${jellyJarsNeeded}</div>
                        <div class="description">${jellyDescription}<br>(~${jellyTbspPerJar} tbsp each)</div>
                        <div style="margin-top: 10px; font-size: 0.9em;">$${jellyCost.toFixed(2)}</div>
                    </div>
                    <div class="result-item">
                        <h4>Bread Loaves</h4>
                        <div class="number">${breadLoavesNeeded}</div>
                        <div class="description">single loaves<br>(${usableBreadSlicesPerLoaf} usable slices each)</div>
                        <div style="margin-top: 10px; font-size: 0.9em;">$${breadCost.toFixed(2)}</div>
                    </div>
                    <div class="result-item">
                        <h4>Sandwich Bags</h4>
                        <div class="number">${bagBoxesNeeded}</div>
                        <div class="description">${bagsPerBox} count boxes</div>
                        <div style="margin-top: 10px; font-size: 0.9em;">$${bagCost.toFixed(2)}</div>
                    </div>
                </div>
                <div style="margin-top: 25px; padding: 20px; background: rgba(251,173,63,0.2); border-radius: 12px; text-align: center;">
                    <h4 style="color: #fff; font-size: 1.4em; margin-bottom: 10px;">Total Estimated Cost</h4>
                    <div style="font-size: 3em; font-weight: 700; color: #fff;">$${totalCost.toFixed(2)}</div>
                    <div style="color: rgba(255,255,255,0.9); font-size: 1.1em; margin-top: 8px;">
                        for ${pbjCount} PB&J sandwiches<br>
                        (‚âà $${(totalCost / pbjCount).toFixed(2)} per sandwich)
                    </div>
                </div>
            `;

            document.getElementById('pbjResult').style.display = 'block';
        }

        // Custom Package Calculator - Toggle between slice count and oz/servings input
        function toggleCustomInputMethod() {
            const method = document.querySelector('input[name="customInputMethod"]:checked').value;
            const sliceGroup = document.getElementById('sliceInputGroup');
            const ozGroup = document.getElementById('ozInputGroup');

            if (method === 'slices') {
                sliceGroup.style.display = 'flex';
                ozGroup.style.display = 'none';
            } else {
                sliceGroup.style.display = 'none';
                ozGroup.style.display = 'block';
            }
        }

        // Estimate slices from oz/servings info
        function estimateSlicesFromOz() {
            let packageOz = parseFloat(document.getElementById('customPackageOz').value);
            const servings = parseFloat(document.getElementById('customServings').value);
            const servingSize = parseFloat(document.getElementById('customServingSize').value);
            const thickness = document.getElementById('customSliceThickness').value;

            // If package oz not provided but servings info is available, calculate it
            if ((!packageOz || packageOz <= 0) && servings > 0 && servingSize > 0) {
                packageOz = servings * servingSize;
            }

            if (!packageOz || packageOz <= 0) {
                document.getElementById('sliceEstimate').style.display = 'none';
                return;
            }

            // Oz per slice based on thickness
            let ozPerSlice;
            switch (thickness) {
                case 'thin': ozPerSlice = 0.5; break;
                case 'regular': ozPerSlice = 0.75; break;
                case 'thick': ozPerSlice = 1.0; break;
                default: ozPerSlice = 0.5;
            }

            // Calculate estimated slices
            const estimatedSlices = Math.round(packageOz / ozPerSlice);

            // Show the estimate
            document.getElementById('estimatedSliceCount').textContent = estimatedSlices;
            document.getElementById('sliceEstimate').style.display = 'block';

            // Store the estimate for later use
            document.getElementById('sliceEstimate').dataset.estimate = estimatedSlices;
        }

        // Use the estimated slice count
        function useEstimatedSlices() {
            const estimate = document.getElementById('sliceEstimate').dataset.estimate;
            if (estimate) {
                document.getElementById('customPackageSlices').value = estimate;
                // Switch back to slice input method to show the value
                document.querySelector('input[name="customInputMethod"][value="slices"]').checked = true;
                toggleCustomInputMethod();
            }
        }

        // Add event listeners for oz estimation inputs
        document.addEventListener('DOMContentLoaded', function() {
            const ozInputs = ['customPackageOz', 'customServings', 'customServingSize', 'customSliceThickness'];
            ozInputs.forEach(function(id) {
                const element = document.getElementById(id);
                if (element) {
                    element.addEventListener('input', estimateSlicesFromOz);
                    element.addEventListener('change', estimateSlicesFromOz);
                }
            });
        });

        // Custom Package Calculator - Single Package
        function calculateCustomPackage() {
            const inputMethod = document.querySelector('input[name="customInputMethod"]:checked').value;
            let slicesInPackage;

            if (inputMethod === 'slices') {
                slicesInPackage = parseInt(document.getElementById('customPackageSlices').value);
            } else {
                // Use oz-based estimation
                const packageOz = parseFloat(document.getElementById('customPackageOz').value);
                const thickness = document.getElementById('customSliceThickness').value;

                if (!packageOz || packageOz <= 0) {
                    alert('Please enter the package weight in oz');
                    return;
                }

                let ozPerSlice;
                switch (thickness) {
                    case 'thin': ozPerSlice = 0.5; break;
                    case 'regular': ozPerSlice = 0.75; break;
                    case 'thick': ozPerSlice = 1.0; break;
                    default: ozPerSlice = 0.5;
                }
                slicesInPackage = Math.round(packageOz / ozPerSlice);
            }

            const packagePrice = parseFloat(document.getElementById('customPackagePrice').value);
            const meatSlicesPerSandwich = parseInt(document.getElementById('customMeatSlicesPerSandwich').value);

            if (!slicesInPackage || slicesInPackage <= 0) {
                alert('Please enter a valid number of slices or package oz');
                return;
            }

            // Calculate sandwiches possible from this package
            const sandwichesPossible = Math.floor(slicesInPackage / meatSlicesPerSandwich);
            const leftoverSlices = slicesInPackage % meatSlicesPerSandwich;
            const costPerSandwich = packagePrice ? (packagePrice / sandwichesPossible).toFixed(2) : 'N/A';
            const costPerSlice = packagePrice ? (packagePrice / slicesInPackage).toFixed(2) : 'N/A';
            const isEstimate = inputMethod === 'oz';

            // Display result
            document.getElementById('customResult').innerHTML = `
                ${isEstimate ? `
                <div style="background: rgba(251,173,63,0.25); border: 1px solid #FBAD3F; padding: 12px; border-radius: 8px; margin-bottom: 20px; text-align: center;">
                    <span style="color: #fff;">üìä Based on estimated <strong>${slicesInPackage} slices</strong> (from oz + thickness)</span>
                </div>
                ` : ''}
                <div class="result-grid">
                    <div class="result-item">
                        <h4>Sandwiches from This Package</h4>
                        <div class="number">${sandwichesPossible}</div>
                        <div class="description">at ${meatSlicesPerSandwich} slice${meatSlicesPerSandwich === 1 ? '' : 's'} per sandwich (standard recipe)</div>
                    </div>
                    <div class="result-item">
                        <h4>Leftover Slices</h4>
                        <div class="number">${leftoverSlices}</div>
                        <div class="description">slices remaining after full sandwiches</div>
                    </div>
                    ${packagePrice ? `
                    <div class="result-item">
                        <h4>Cost Per Sandwich</h4>
                        <div class="number">$${costPerSandwich}</div>
                        <div class="description">meat cost only</div>
                    </div>
                    <div class="result-item">
                        <h4>Cost Per Slice</h4>
                        <div class="number">$${costPerSlice}</div>
                        <div class="description">compare with other products</div>
                    </div>
                    ` : ''}
                </div>
                <div style="margin-top: 20px; padding: 15px; background: rgba(255,255,255,0.15); border-radius: 10px;">
                    <h4 style="color: #FBAD3F; margin-bottom: 10px;">Need Multiple Packages?</h4>
                    <p style="color: rgba(255,255,255,0.9); margin-bottom: 10px;">To make <strong>100 sandwiches</strong> with this product:</p>
                    <div style="font-size: 1.3em; color: #fff; font-weight: 600;">
                        You would need <strong>${Math.ceil((100 * meatSlicesPerSandwich) / slicesInPackage)}</strong> packages
                        ${packagePrice ? `(‚âà $${(Math.ceil((100 * meatSlicesPerSandwich) / slicesInPackage) * packagePrice).toFixed(2)} for meat)` : ''}
                    </div>
                </div>
            `;
            document.getElementById('customResult').style.display = 'block';
        }

        // Full Custom Shopping Calculator
        function calculateFullCustom() {
            const targetSandwiches = parseInt(document.getElementById('customTargetSandwiches').value);
            const meatSlicesPerPkg = parseInt(document.getElementById('customMeatSlices').value);
            const meatPricePerPkg = parseFloat(document.getElementById('customMeatPrice').value) || 0;
            const cheeseSlicesPerPkg = parseInt(document.getElementById('customCheeseSlices').value);
            const cheesePricePerPkg = parseFloat(document.getElementById('customCheesePrice').value) || 0;
            const breadSandwichesPerPkg = parseInt(document.getElementById('customBreadSandwiches').value);
            const breadPricePerPkg = parseFloat(document.getElementById('customBreadPrice').value) || 0;

            // Validate required fields
            if (!targetSandwiches || targetSandwiches <= 0) {
                alert('Please enter a valid target number of sandwiches');
                return;
            }
            if (!meatSlicesPerPkg || meatSlicesPerPkg <= 0) {
                alert('Please enter the number of meat slices per package');
                return;
            }
            if (!cheeseSlicesPerPkg || cheeseSlicesPerPkg <= 0) {
                alert('Please enter the number of cheese slices per package');
                return;
            }
            if (!breadSandwichesPerPkg || breadSandwichesPerPkg <= 0) {
                alert('Please enter the number of sandwiches per bread package');
                return;
            }

            // Standard recipe: 3 slices meat, 2 slices cheese per sandwich
            const meatSlicesPerSandwich = 3;
            const cheeseSlicesPerSandwich = 2;

            // Calculate packages needed
            const totalMeatSlicesNeeded = targetSandwiches * meatSlicesPerSandwich;
            const totalCheeseSlicesNeeded = targetSandwiches * cheeseSlicesPerSandwich;

            const meatPackagesNeeded = Math.ceil(totalMeatSlicesNeeded / meatSlicesPerPkg);
            const cheesePackagesNeeded = Math.ceil(totalCheeseSlicesNeeded / cheeseSlicesPerPkg);
            const breadPackagesNeeded = Math.ceil(targetSandwiches / breadSandwichesPerPkg);
            const bagPackagesNeeded = Math.ceil(targetSandwiches / 480);

            // Calculate costs
            const meatCost = meatPackagesNeeded * meatPricePerPkg;
            const cheeseCost = cheesePackagesNeeded * cheesePricePerPkg;
            const breadCost = breadPackagesNeeded * breadPricePerPkg;
            const bagCost = bagPackagesNeeded * 7.99; // Standard bag price
            const totalCost = meatCost + cheeseCost + breadCost + bagCost;

            // Calculate extras (leftover slices)
            const meatSlicesProvided = meatPackagesNeeded * meatSlicesPerPkg;
            const cheeseSlicesProvided = cheesePackagesNeeded * cheeseSlicesPerPkg;
            const breadSandwichesProvided = breadPackagesNeeded * breadSandwichesPerPkg;

            const extraMeatSlices = meatSlicesProvided - totalMeatSlicesNeeded;
            const extraCheeseSlices = cheeseSlicesProvided - totalCheeseSlicesNeeded;
            const extraBreadSlots = breadSandwichesProvided - targetSandwiches;

            // Calculate possible extra sandwiches
            const extraFromMeat = Math.floor(extraMeatSlices / meatSlicesPerSandwich);
            const extraFromCheese = Math.floor(extraCheeseSlices / cheeseSlicesPerSandwich);
            const extraFromBread = extraBreadSlots;
            const possibleExtraSandwiches = Math.min(extraFromMeat, extraFromCheese, extraFromBread);

            // Display results
            document.getElementById('fullCustomResult').innerHTML = `
                <div class="result-grid">
                    <div class="result-item">
                        <h4>Meat Packages</h4>
                        <div class="number">${meatPackagesNeeded}</div>
                        <div class="description">${meatSlicesPerPkg} slices each<br>(${extraMeatSlices} extra slices)</div>
                        ${meatPricePerPkg ? `<div style="margin-top: 10px; font-size: 0.9em;">$${meatCost.toFixed(2)}</div>` : ''}
                    </div>
                    <div class="result-item">
                        <h4>Cheese Packages</h4>
                        <div class="number">${cheesePackagesNeeded}</div>
                        <div class="description">${cheeseSlicesPerPkg} slices each<br>(${extraCheeseSlices} extra slices)</div>
                        ${cheesePricePerPkg ? `<div style="margin-top: 10px; font-size: 0.9em;">$${cheeseCost.toFixed(2)}</div>` : ''}
                    </div>
                    <div class="result-item">
                        <h4>Bread Packages</h4>
                        <div class="number">${breadPackagesNeeded}</div>
                        <div class="description">${breadSandwichesPerPkg} sandwiches each<br>(${extraBreadSlots} extra spots)</div>
                        ${breadPricePerPkg ? `<div style="margin-top: 10px; font-size: 0.9em;">$${breadCost.toFixed(2)}</div>` : ''}
                    </div>
                    <div class="result-item">
                        <h4>Sandwich Bags</h4>
                        <div class="number">${bagPackagesNeeded}</div>
                        <div class="description">480-count boxes</div>
                        <div style="margin-top: 10px; font-size: 0.9em;">$${bagCost.toFixed(2)}</div>
                    </div>
                </div>
                ${(meatPricePerPkg || cheesePricePerPkg || breadPricePerPkg) ? `
                <div style="margin-top: 25px; padding: 20px; background: rgba(251,173,63,0.2); border-radius: 12px; text-align: center;">
                    <h4 style="color: #fff; font-size: 1.4em; margin-bottom: 10px;">Total Estimated Cost</h4>
                    <div style="font-size: 3em; font-weight: 700; color: #fff;">$${totalCost.toFixed(2)}</div>
                    <div style="color: rgba(255,255,255,0.9); font-size: 1.1em; margin-top: 8px;">
                        for ${targetSandwiches} sandwiches<br>
                        (‚âà $${(totalCost / targetSandwiches).toFixed(2)} per sandwich)
                    </div>
                </div>
                ` : ''}
                ${possibleExtraSandwiches > 0 ? `
                <div style="margin-top: 15px; padding: 15px; background: rgba(76,175,80,0.2); border-radius: 10px; text-align: center;">
                    <p style="color: #fff; font-size: 1.1em; margin: 0;">
                        <strong>Bonus:</strong> You'll have enough leftover ingredients to make <strong>${possibleExtraSandwiches}</strong> extra sandwiches!
                    </p>
                </div>
                ` : ''}
            `;
            document.getElementById('fullCustomResult').style.display = 'block';
        }

    </script>
</div>
<div class="section" style="max-width: 700px; margin: 40px auto 24px auto;">
    <details style="background: #fffbe8; border: 1.5px solid #f7c873; border-radius: 10px; box-shadow: 0 2px 8px #f7c87322; padding: 0 0 18px 0; font-size: 1em;">
        <summary style="display: flex; align-items: center; gap: 10px; padding: 0 18px; min-height: 56px; font-weight: 600; font-size: 1.08em; color: #236383; background: linear-gradient(90deg, #ffe6b3 60%, #fffbe8 100%); border-bottom: 1.5px solid #f7c873; border-radius: 10px 10px 0 0; box-shadow: 0 2px 8px #f7c87322; cursor: pointer; outline: none; letter-spacing: 0.01em;">
            <span style="font-size: 1.3em;">üõí</span>
            <span>Ingredient Price Summary</span>
            <span style="margin-left:auto; font-size:0.98em; color:#b97a1a; font-weight:400;">(click to view all ingredient prices used in calculations)</span>
        </summary>
        <div style="padding: 0 18px;">
            <table style="width:100%; margin-top: 10px; border-collapse: collapse;">
                <tr style="background:#fff3d1; color:#b97a1a;"><th style="text-align:left; padding: 6px 10px;">Item</th><th style="text-align:left; padding: 6px 10px;">Price</th><th style="text-align:left; padding: 6px 10px;">Notes</th></tr>
                <tr><td>Turkey (Kirkland 2-pack, 40 slices)</td><td>$13.99</td><td>40 slices total</td></tr>
                <tr><td>Ham (Kirkland 2-pack, 48 slices)</td><td>$9.89</td><td>48 slices total</td></tr>
                <tr><td>Publix Turkey Breast, Roasted, Thin Sliced</td><td>$7.07</td><td>16 oz / 32 slices</td></tr>
                <tr><td>Land O'Frost Premium Oven Roasted Turkey Breast</td><td>$9.53</td><td>16 oz / 32 slices</td></tr>
                <tr><td>Hillshire Farm Ultra Thin Sliced Oven Roasted Turkey Breast</td><td>$6.07</td><td>9 oz / 18 slices</td></tr>
                <tr><td>Kroger Private Selection¬Æ Turkey Breast Oven Roasted Deli Sliced</td><td>$6.49</td><td>8 oz / 11-12 slices</td></tr>
                <tr><td>Kroger¬Æ Turkey Breast Oven Roasted Deli Thin Sliced</td><td>$3.99</td><td>9 oz / 18 slices</td></tr>
                <tr><td>Kroger¬Æ Turkey Breast Oven Roasted Deli Thin Sliced Family Size</td><td>$4.39</td><td>1 lb / 30-32 slices</td></tr>
                <tr><td>Adams Reserve Cheese</td><td>$7.70</td><td>44 slices</td></tr>
                <tr><td>Finlandia Swiss Cheese</td><td>$9.69</td><td>40 slices</td></tr>
                <tr><td>Arla Havarti Cheese</td><td>$9.69</td><td>32 slices</td></tr>
                <tr><td>Nature's Own Double Loaf</td><td>$3.99‚Äì$4.99</td><td>20 sandwiches</td></tr>
                <tr><td>Sunbeam Double Loaf</td><td>$5.39</td><td>26 sandwiches</td></tr>
                <tr><td>Sunbeam Single Loaf</td><td>$2.70</td><td>13 sandwiches</td></tr>
                <tr><td>Other Brands Double Loaf</td><td>$5.39</td><td>20 sandwiches</td></tr>
                <tr><td>Other Brands Single Loaf</td><td>$2.70</td><td>10 sandwiches</td></tr>
                <tr><td>Zip-lock Sandwich Bags</td><td>$7.99</td><td>480 count</td></tr>
            </table>
        </div>
    </details>
</div>
</body>
</html>

