<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Group Capacity Estimator - The Sandwich Project</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, #236383 0%, #007E8C 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 600px;
            width: 100%;
            padding: 40px;
        }
        
        .header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 10px;
            padding-bottom: 15px;
            border-bottom: 3px solid #47B3CB;
            position: relative;
        }
        
        .header::after {
            content: '';
            position: absolute;
            bottom: -3px;
            right: 0;
            width: 30%;
            height: 3px;
            background: linear-gradient(90deg, #47B3CB 0%, #FBAD3F 100%);
        }
        
        .logo {
            width: 50px;
            height: 50px;
            flex-shrink: 0;
            transition: transform 0.3s;
        }
        
        .logo:hover {
            transform: rotate(10deg) scale(1.1);
        }
        
        h1 {
            color: #236383;
            font-size: 28px;
            flex: 1;
        }
        
        .subtitle {
            color: #646464;
            margin-bottom: 30px;
            font-size: 14px;
        }
        
        .input-group {
            margin-bottom: 25px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            color: #646464;
            font-weight: 600;
            font-size: 14px;
            transition: color 0.3s;
        }
        
        .input-group:focus-within label {
            color: #007E8C;
        }
        
        input {
            width: 100%;
            padding: 12px;
            border: 2px solid #D1D3D4;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s;
            background: white;
        }
        
        input:focus {
            outline: none;
            border-color: #47B3CB;
            box-shadow: 0 0 0 3px rgba(71,179,203,0.1);
        }
        
        input:hover:not(:focus) {
            border-color: #FBAD3F;
        }
        
        .slider-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        input[type="range"] {
            flex: 1;
            accent-color: #FBAD3F;
        }
        
        .slider-value {
            min-width: 60px;
            text-align: center;
            font-weight: bold;
            color: #236383;
        }
        
        .results {
            background: linear-gradient(135deg, #236383 0%, #007E8C 100%);
            border-radius: 12px;
            padding: 25px;
            margin-top: 30px;
            color: white;
            position: relative;
            overflow: hidden;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .results:hover {
            transform: translateY(-2px);
            box-shadow: 0 25px 70px rgba(35,99,131,0.4);
        }
        
        .results::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -10%;
            width: 60%;
            height: 200%;
            background: linear-gradient(120deg, transparent 0%, rgba(71,179,203,0.1) 100%);
            transform: rotate(15deg);
            pointer-events: none;
        }
        
        .result-item {
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(255,255,255,0.15);
        }
        
        .result-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }
        
        .result-label {
            font-size: 14px;
            opacity: 0.9;
            margin-bottom: 5px;
        }
        
        .result-value {
            font-size: 32px;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        
        .result-detail {
            font-size: 13px;
            opacity: 0.8;
            margin-top: 5px;
        }
        
        .efficiency-note {
            background: white;
            border-left: 4px solid #FBAD3F;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            font-size: 13px;
            line-height: 1.5;
            color: #236383;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .efficiency-note strong {
            color: #007E8C;
            display: block;
            margin-bottom: 5px;
            font-size: 14px;
        }
        
        .budget-section {
            background: linear-gradient(to bottom, #f9f9f9, #f5f5f5);
            border-radius: 12px;
            padding: 20px;
            margin-top: 25px;
            border: 2px solid #47B3CB;
            position: relative;
        }
        
        .budget-section::before {
            content: 'ðŸ’°';
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 24px;
            opacity: 0.3;
        }
        
        .budget-title {
            color: #236383;
            font-weight: 600;
            margin-bottom: 15px;
            font-size: 16px;
        }
        
        .cost-breakdown {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding: 8px 0;
            border-bottom: 1px solid #D1D3D4;
        }
        
        .cost-label {
            color: #646464;
            font-size: 14px;
        }
        
        .cost-value {
            color: #007E8C;
            font-weight: 600;
        }
        
        .total-cost {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 2px solid #FBAD3F;
        }
        
        .total-cost .cost-value {
            font-size: 24px;
            color: #236383;
        }
        
        #limitingFactor[data-status="limited"] {
            color: #A31C41;
        }
        
        #limitingFactor[data-status="sufficient"] {
            color: #007E8C;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <svg class="logo" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                <!-- Sandwich layers -->
                <path d="M 20,70 Q 15,70 15,65 L 15,60 Q 15,55 20,55 L 80,55 Q 85,55 85,60 L 85,65 Q 85,70 80,70 Z" fill="#FBAD3F" opacity="0.9"/>
                <path d="M 18,60 L 82,60 L 78,50 L 22,50 Z" fill="#FBAD3F" opacity="0.7"/>
                <path d="M 20,50 Q 15,50 15,45 L 15,40 Q 15,35 20,35 L 80,35 Q 85,35 85,40 L 85,45 Q 85,50 80,50 Z" fill="#FBAD3F"/>
                <!-- Toothpick -->
                <rect x="48" y="20" width="4" height="35" rx="2" fill="#646464"/>
                <circle cx="50" cy="20" r="5" fill="#646464"/>
            </svg>
            <h1>Group Capacity Estimator</h1>
        </div>
        <p class="subtitle">Estimate sandwich production based on adult and student volunteers</p>
        
        <div class="input-group">
            <label for="adults">Number of Adults</label>
            <input type="number" id="adults" min="0" max="500" value="10" placeholder="Enter number of adults">
            <div class="slider-container" style="margin-top: 10px;">
                <input type="range" id="adultsSlider" min="0" max="200" value="10" style="opacity: 0.6;">
            </div>
        </div>
        
        <div class="input-group">
            <label for="students">Number of Students/Kids</label>
            <input type="number" id="students" min="0" max="500" value="5" placeholder="Enter number of students/kids">
            <div class="slider-container" style="margin-top: 10px;">
                <input type="range" id="studentsSlider" min="0" max="200" value="5" style="opacity: 0.6;">
            </div>
        </div>
        
        <div class="input-group">
            <label for="hours">Hours Available</label>
            <input type="number" id="hours" min="0.5" max="8" step="0.5" value="2" placeholder="Enter hours (e.g., 2.5)">
            <div class="slider-container" style="margin-top: 10px;">
                <input type="range" id="hoursSlider" min="0.5" max="4" step="0.5" value="2" style="opacity: 0.6;">
            </div>
        </div>
        
        <div class="input-group">
            <label for="budget">Budget Available ($)</label>
            <input type="number" id="budget" placeholder="Enter budget (optional)" min="0" step="10">
        </div>
        
        <div class="results">
            <div class="result-item">
                <div class="result-label">Estimated Sandwiches</div>
                <div class="result-value" id="sandwichCount">--</div>
                <div class="result-detail" id="perPersonRate"></div>
            </div>
            
            <div class="result-item">
                <div class="result-label">Production Rate</div>
                <div class="result-value" id="hourlyRate">--</div>
                <div class="result-detail">sandwiches per hour</div>
            </div>
            
            <div class="efficiency-note">
                <strong>Efficiency Level:</strong> <span id="efficiencyLevel"></span>
                <br><span id="efficiencyTip"></span>
            </div>

            <div style="margin-top: 20px; padding: 15px; background: linear-gradient(135deg, #007E8C 0%, #47B3CB 100%); border-radius: 12px; text-align: center;">
                <a href="../inventorycalculator.html" style="color: white; text-decoration: none; font-size: 16px; font-weight: 600; display: block;">
                    ðŸ“Š Go to Inventory Calculator for Detailed Shopping Lists â†’
                </a>
            </div>
        </div>
        
        <div class="budget-section" id="budgetSection" style="display: none;">
            <div class="budget-title">Budget Analysis</div>
            <div class="cost-breakdown">
                <span class="cost-label">Cost per sandwich (avg)</span>
                <span class="cost-value">$1.50</span>
            </div>
            <div class="cost-breakdown">
                <span class="cost-label">Sandwiches from budget</span>
                <span class="cost-value" id="budgetSandwiches">--</span>
            </div>
            <div class="cost-breakdown">
                <span class="cost-label">Production capacity</span>
                <span class="cost-value" id="capacitySandwiches">--</span>
            </div>
            <div class="total-cost">
                <div class="cost-breakdown">
                    <span class="cost-label"><strong id="limitingFactor">--</strong></span>
                    <span class="cost-value" id="recommendation">--</span>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        const adultsInput = document.getElementById('adults');
        const adultsSlider = document.getElementById('adultsSlider');
        const studentsInput = document.getElementById('students');
        const studentsSlider = document.getElementById('studentsSlider');
        const hoursInput = document.getElementById('hours');
        const hoursSlider = document.getElementById('hoursSlider');
        const budgetInput = document.getElementById('budget');
        const sandwichCount = document.getElementById('sandwichCount');
        const hourlyRate = document.getElementById('hourlyRate');
        const perPersonRate = document.getElementById('perPersonRate');
        const efficiencyLevel = document.getElementById('efficiencyLevel');
        const efficiencyTip = document.getElementById('efficiencyTip');
        const budgetSection = document.getElementById('budgetSection');
        const budgetSandwiches = document.getElementById('budgetSandwiches');
        const capacitySandwiches = document.getElementById('capacitySandwiches');
        const limitingFactor = document.getElementById('limitingFactor');
        const recommendation = document.getElementById('recommendation');
        
        const COST_PER_SANDWICH = 1.50;
        
        // Productivity rates per hour (based on actual experience)
        // 10 adults = 250 sandwiches/hour = 25 sandwiches per adult per hour
        // 20 people = 500 sandwiches/hour = 25 sandwiches per person per hour
        // Students are slower than adults
        const ADULT_PRODUCTIVITY = 25; // Adults: 25 sandwiches per hour (based on real data)
        const STUDENT_PRODUCTIVITY = 15; // Students: ~15 sandwiches per hour (slower than adults)
        
        function roundToSensibleNumber(num) {
            // Round to practical numbers for event planning
            if (num <= 50) {
                return Math.round(num / 5) * 5;  // Round to nearest 5
            } else if (num <= 200) {
                return Math.round(num / 10) * 10;  // Round to nearest 10
            } else if (num <= 500) {
                return Math.round(num / 25) * 25;  // Round to nearest 25
            } else {
                return Math.round(num / 50) * 50;  // Round to nearest 50
            }
        }
        
        function calculateProductivity(adults, students) {
            // Calculate total productivity based on adult vs student rates
            const totalAdults = adults || 0;
            const totalStudents = students || 0;
            
            if (totalAdults === 0 && totalStudents === 0) return 0;
            
            const adultProductivity = totalAdults * ADULT_PRODUCTIVITY;
            const studentProductivity = totalStudents * STUDENT_PRODUCTIVITY;
            
            return adultProductivity + studentProductivity;
        }
        
        function getEfficiencyDescription(adults, students, totalProductivity) {
            const totalVolunteers = adults + students;
            const adultRatio = totalVolunteers > 0 ? adults / totalVolunteers : 0;
            
            if (totalVolunteers === 0) {
                return {
                    level: "No volunteers",
                    tip: "Add some volunteers to start making sandwiches!"
                };
            } else if (adultRatio >= 0.8) {
                return {
                    level: "Adult-led production",
                    tip: "Great adult leadership! High productivity with experienced volunteers."
                };
            } else if (adultRatio >= 0.5) {
                return {
                    level: "Balanced team",
                    tip: "Good mix of adults and students. Adults provide guidance while students learn."
                };
            } else if (adultRatio >= 0.2) {
                return {
                    level: "Student-heavy team",
                    tip: "More students than adults. Consider recruiting more adult volunteers for better efficiency."
                };
            } else {
                return {
                    level: "Student-led production",
                    tip: "Mostly students volunteering. Great learning opportunity, but consider adult supervision for safety."
                };
            }
        }
        
        function updateCalculations() {
            const adults = parseInt(adultsInput.value) || 0;
            const students = parseInt(studentsInput.value) || 0;
            const hours = parseFloat(hoursInput.value) || 0.5;
            const budget = parseFloat(budgetInput.value) || 0;
            const totalVolunteers = adults + students;
            
            // Keep sliders in sync
            if (adults <= 200) {
                adultsSlider.value = adults;
            }
            if (students <= 200) {
                studentsSlider.value = students;
            }
            if (hours <= 4) {
                hoursSlider.value = hours;
            }
            
            // Calculate sandwiches based on adult/student productivity rates
            const totalProductivityPerHour = calculateProductivity(adults, students);
            const rawTotalSandwiches = totalProductivityPerHour * hours;
            const totalSandwiches = roundToSensibleNumber(rawTotalSandwiches);
            const sandwichesPerHour = roundToSensibleNumber(totalProductivityPerHour);
            
            sandwichCount.textContent = totalSandwiches.toLocaleString();
            hourlyRate.textContent = sandwichesPerHour.toLocaleString();
            
            // Update per-person rate display
            if (totalVolunteers > 0) {
                const avgRatePerPerson = totalProductivityPerHour / totalVolunteers;
                perPersonRate.textContent = `~${Math.round(avgRatePerPerson)} sandwiches per person/hour`;
            } else {
                perPersonRate.textContent = `(No volunteers)`;
            }
            
            // Update efficiency description
            const efficiencyInfo = getEfficiencyDescription(adults, students, totalProductivityPerHour);
            efficiencyLevel.textContent = efficiencyInfo.level;
            efficiencyTip.textContent = efficiencyInfo.tip;
            
            // Budget analysis
            if (budget > 0) {
                budgetSection.style.display = 'block';
                const sandwichesFromBudget = Math.floor(budget / COST_PER_SANDWICH);
                budgetSandwiches.textContent = sandwichesFromBudget.toLocaleString();
                capacitySandwiches.textContent = totalSandwiches.toLocaleString();
                
                if (sandwichesFromBudget < totalSandwiches) {
                    limitingFactor.textContent = "âš ï¸ Budget Limited";
                    limitingFactor.setAttribute('data-status', 'limited');
                    const shortfall = (totalSandwiches - sandwichesFromBudget) * COST_PER_SANDWICH;
                    recommendation.textContent = `Need $${shortfall.toFixed(2)} more to reach capacity`;
                } else {
                    limitingFactor.textContent = "âœ… Budget Sufficient";
                    limitingFactor.setAttribute('data-status', 'sufficient');
                    const excess = budget - (totalSandwiches * COST_PER_SANDWICH);
                    if (excess > 50) {
                        recommendation.textContent = `Consider adding volunteers or time`;
                    } else {
                        recommendation.textContent = `Well matched to capacity!`;
                    }
                }
            } else {
                budgetSection.style.display = 'none';
            }
        }
        
        // Sync sliders with input fields
        function syncFromSlider(slider, input) {
            input.value = slider.value;
            updateCalculations();
        }
        
        // Event listeners for inputs
        adultsInput.addEventListener('input', updateCalculations);
        studentsInput.addEventListener('input', updateCalculations);
        hoursInput.addEventListener('input', updateCalculations);
        budgetInput.addEventListener('input', updateCalculations);
        
        // Event listeners for sliders
        adultsSlider.addEventListener('input', () => syncFromSlider(adultsSlider, adultsInput));
        studentsSlider.addEventListener('input', () => syncFromSlider(studentsSlider, studentsInput));
        hoursSlider.addEventListener('input', () => syncFromSlider(hoursSlider, hoursInput));
        
        // Initial calculation
        updateCalculations();
    </script>
</body>
</html>